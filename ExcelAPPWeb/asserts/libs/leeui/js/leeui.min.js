!function($){Function.prototype.leeExtend=function(e,t){if("function"!=typeof e)return this;this.base=e.prototype,this.base.constructor=e;var i=function(){};i.prototype=e.prototype,this.prototype=new i,this.prototype.constructor=this,t&&$.extend(this.prototype,t)},Function.prototype.leeDefer=function(e,t,i){var n=this;return setTimeout(function(){n.apply(e,i||[])},t)},window.leeUI=$.leeUI={version:"1.0.0",managerCount:0,managers:{},managerIdPrev:"leeUI",autoNewId:!0,error:{managerIsExist:"管理器id已经存在"},pluginPrev:"lee",attrPrev:"data",getId:function(e){var t=(e=e||this.managerIdPrev)+(1e3+this.managerCount);return this.managerCount++,t},add:function(e){if(2==arguments.length){var t=arguments[1];return t.id=t.id||t.options.id||e.id,void this.addManager(t)}e.id||(e.id=this.getId(e.__idPrev())),this.managers[e.id]=e},remove:function(e){if("string"==typeof e||"number"==typeof e)delete leeUI.managers[e];else if("object"==typeof e)if(e instanceof leeUI.core.Component)delete leeUI.managers[e.id];else{if(!$(e).attr(this.idAttrName))return!1;delete leeUI.managers[$(e).attr(this.idAttrName)]}},get:function(e,t){if(t=t||"uiid","string"==typeof e||"number"==typeof e)return leeUI.managers[e];if("object"!=typeof e)return null;var i=e.length?e[0]:e,n=i[t]||$(i).attr(t);return n?leeUI.managers[n]:null},find:function(e){var t=[];for(var i in this.managers){var n=this.managers[i];e instanceof Function?n instanceof e&&t.push(n):e instanceof Array?-1!=$.inArray(n.__getType(),e)&&t.push(n):n.__getType()==e&&t.push(n)}return t},run:function(n,l,o){if(n){if(o=$.extend({defaultsNamespace:"leeUIDefaults",methodsNamespace:"leeUIMethods",controlNamespace:"controls",idAttrName:"uiid",isStatic:!1,hasElement:!0,propertyToElemnt:null},o||{}),n=(n=n.replace(/^leeUIGet/,"")).replace(/^leeUI/,""),null==this||this==window||o.isStatic)return leeUI.plugins[n]||(leeUI.plugins[n]={fn:$[leeUI.pluginPrev+n],isStatic:!0}),new $.leeUI[o.controlNamespace][n]($.extend({},$[o.defaultsNamespace][n]||{},$[o.defaultsNamespace][n+"String"]||{},0<l.length?l[0]:{}));if(leeUI.plugins[n]||(leeUI.plugins[n]={fn:$.fn[leeUI.pluginPrev+n],isStatic:!1}),/Manager$/.test(n))return leeUI.get(this,o.idAttrName);if(this.each(function(){if(this[o.idAttrName]||$(this).attr(o.idAttrName)){var e=leeUI.get(this[o.idAttrName]||$(this).attr(o.idAttrName));e&&0<l.length&&e.set(l[0])}else if(!(1<=l.length&&"string"==typeof l[0])){var t=0<l.length?l[0]:null,i=$.extend({},$[o.defaultsNamespace][n],$[o.defaultsNamespace][n+"String"],t);o.propertyToElemnt&&(i[o.propertyToElemnt]=this),o.hasElement?new $.leeUI[o.controlNamespace][n](this,i):new $.leeUI[o.controlNamespace][n](i)}}),0==this.length)return null;if(0==l.length)return leeUI.get(this,o.idAttrName);if("object"==typeof l[0])return leeUI.get(this,o.idAttrName);if("string"==typeof l[0]){var e=leeUI.get(this,o.idAttrName);if(null==e)return;if("option"!=l[0]){var t=l[0];if(!e[t])return;var i=Array.apply(null,l);return i.shift(),e[t].apply(e,i)}if(2==l.length)return e.get(l[1]);if(3<=l.length)return e.set(l[1],l[2])}return null}},defaults:{},methods:{},core:{},controls:{},plugins:{}},$.leeUIDefaults={},$.leeUIMethods={},leeUI.defaults=$.leeUIDefaults,leeUI.methods=$.leeUIMethods,$.fn.leeUI=function(e){return e?leeUI.run.call(this,e,arguments):leeUI.get(this)},leeUI.core.Component=function(e){this.events=this.events||{},this.options=e||{},this.children={}},$.extend(leeUI.core.Component.prototype,{__getType:function(){return"leeUI.core.Component"},__idPrev:function(){return"leeUI"},set:function(e,t,i){if(e)if("object"!=typeof e){var n=e;if(0!=n.indexOf("on")){if(this.options||(this.options={}),0!=this.trigger("propertychange",[e,t])){this.options[n]=t;var l="_set"+n.substr(0,1).toUpperCase()+n.substr(1);this[l]&&this[l].call(this,t,i),this.trigger("propertychanged",[e,t])}}else"function"==typeof t&&this.bind(n.substr(2),t)}else{var o;if(o=this.options!=e?($.extend(this.options,e),e):$.extend({},e),null==t||1==t)for(var a in o)0==a.indexOf("on")&&this.set(a,o[a]);if(null==t||0==t)for(var a in o)0!=a.indexOf("on")&&this.set(a,o[a],i)}},get:function(e){var t="_get"+e.substr(0,1).toUpperCase()+e.substr(1);return this[t]?this[t].call(this,e):this.options[e]},hasBind:function(e){var t=e.toLowerCase(),i=this.events[t];return!(!i||!i.length)},trigger:function(e,t){if(e){var i=e.toLowerCase(),n=this.events[i];if(n){(t=t||[])instanceof Array==0&&(t=[t]);for(var l=0;l<n.length;l++){var o=n[l];if(0==o.handler.apply(o.context,t))return!1}}}},bind:function(e,t,i){if("object"!=typeof e){if("function"!=typeof t)return!1;var n=e.toLowerCase(),l=this.events[n]||[];i=i||this,l.push({handler:t,context:i}),this.events[n]=l}else for(var o in e)this.bind(o,e[o])},unbind:function(e,t){if(e){var i=e.toLowerCase(),n=this.events[i];if(n&&n.length)if(t){for(var l=0,o=n.length;l<o;l++)if(n[l].handler==t){n.splice(l,1);break}}else delete this.events[i]}else this.events={}},destroy:function(){leeUI.remove(this)}}),leeUI.core.UIComponent=function(e,t){leeUI.core.UIComponent.base.constructor.call(this,t);var i=this._extendMethods();i&&$.extend(this,i),this.element=e,this._init(),this._preRender(),this.trigger("render"),this._render(),this.trigger("rendered"),this._rendered()},leeUI.core.UIComponent.leeExtend(leeUI.core.Component,{__getType:function(){return"leeUI.core.UIComponent"},_extendMethods:function(){},_init:function(){if(this.type=this.__getType(),this.element?this._isExternal?this.id=leeUI.getId(this.__idPrev()):this.id=this.options.id||this.element.id||leeUI.getId(this.__idPrev()):this.id=this.options.id||leeUI.getId(this.__idPrev()),leeUI.add(this),this.element){var attributes=this.attr();if(attributes&&attributes instanceof Array)for(var i=0;i<attributes.length;i++){var name=attributes[i];$(this.element).attr(name)&&(this.options[name]=$(this.element).attr(name))}var p=this.options;if($(this.element).attr("leeUI"))try{var attroptions=$(this.element).attr("leeUI");0!=attroptions.indexOf("{")&&(attroptions="{"+attroptions+"}"),eval("attroptions = "+attroptions+";"),attroptions&&$.extend(p,attroptions)}catch(e){}$.extend(p,loadDataOp(this.__getType(),$(this.element)))}function loadDataOp(e,t){var i={};if(!e||-1!=e.indexOf("."))return i;var n=leeUI.defaults[e];if(!n)return i;for(var l in n)if(t.attr(leeUI.attrPrev+"-"+l)){var o=t.attr(leeUI.attrPrev+"-"+l);"boolean"==typeof n[l]?i[l]="true"==o||"1"==o:i[l]=o}return i}},_preRender:function(){},_render:function(){},_rendered:function(){if(this.element){if(this._isExternal)return;$(this.element).attr("uiid",this.id)}},_setCls:function(e){this.element&&e&&$(this.element).addClass(e)},attr:function(){return[]},destroy:function(){this.element&&$(this.element).remove(),this.options=null,leeUI.remove(this)}}),leeUI.controls.Input=function(e,t){leeUI.controls.Input.base.constructor.call(this,e,t)},leeUI.controls.Input.leeExtend(leeUI.core.UIComponent,{__getType:function(){return"leeUI.controls.Input"},attr:function(){return["nullText"]},setValue:function(e){return this.set("value",e)},getValue:function(){return this.get("value")},_setReadonly:function(e){var t=this.wrapper||this.text;if(t&&t.hasClass("l-text")){var i=this.inputText;e?(i&&i.attr("readonly","readonly"),t.addClass("l-text-readonly")):(i&&i.removeAttr("readonly"),t.removeClass("l-text-readonly"))}},setReadonly:function(e){return this.set("readonly",e)},setEnabled:function(){return this.set("disabled",!1)},setDisabled:function(){return this.set("disabled",!0)},updateStyle:function(){},resize:function(e,t){this.set({width:e-2,height:t+2})}}),leeUI.draggable={dragging:!1},leeUI.resizable={reszing:!1},leeUI.getEditor=function(m){var b=m.type,w=m.control,x=m.master;if(!b)return null;var y=0;w&&(w=w.substr(0,1).toUpperCase()+w.substr(1));var e={create:function(e,t,i){var n=t.field||t.column,l=i||{},o=!!t.column,a=$.extend({},m.options),r="text";-1!=$.inArray(b,["password","file","checkbox","radio"])&&(r=b),m.password&&(r="password");var s=$("<input id='txt_grid_"+t.column.id+"' type='"+r+"'/>");if(m.body&&(s=m.body.clone()),s.appendTo(e),t.field){var d=n.name,c=$.isFunction(l.prefixID)?l.prefixID(x):l.prefixID||"";if(a.id=n.id||c+n.name,-1!=$.inArray(b,["select","combobox","autocomplete","popup"])&&(d=n.textField||n.comboboxName,n.comboboxName&&!n.id&&(a.id=(l.prefixID||"")+n.comboboxName)),-1!=$.inArray(b,["select","combobox","autocomplete","popup","radiolist","checkboxlist","listbox"])&&(a.valueFieldID=c+n.name),!m.body){var u=c+d,h=(new Date).getTime()+"_"+ ++y+"_"+n.name;s.attr($.extend({id:h,name:u},n.attr)),n.cssClass&&s.addClass(n.cssClass),n.validate&&!x.options.unSetValidateAttr&&s.attr("validate",leeUI.toJSON(n.validate))}$.extend(a,n.options)}if(n.dictionary&&(n.editor=n.editor||{},!n.editor.data)){var p=[],g=n.dictionary.split("|");$(g).each(function(e,t){var i=t.split(","),n=i[0],l=2<=i.length?i[1]:i[0];p.push({id:n,value:n,text:l})}),n.editor.data=p}if(n.editor){n.editor.options&&($.extend(a,n.editor.options),delete n.editor.options),n.editor.valueColumnName&&(a.valueField=n.editor.valueColumnName,delete n.editor.valueColumnName),n.editor.displayColumnName&&(a.textField=n.editor.displayColumnName,delete n.editor.displayColumnName);var f=n.editor.p||n.editor.ext;f&&(f="function"==typeof f?f(t):f,$.extend(a,f),delete n.editor.p,delete n.editor.ext),$.extend(a,n.editor)}o?(a.host_grid=this,a.host_grid_row=t.record,a.host_grid_column=t.column,a.gridEditParm=t):(a.host_form=this,(n.readonly||a.host_form.get("readonly"))&&(a.readonly=!0));var v=s["lee"+w](a);return o&&setTimeout(function(){s.focus(),s.select(),"DropDown"==w&&s.leeUI()._toggleSelectBox(!1)},100),v},getValue:function(e,t){var i=t.field||t.column;if(e.getValue){var n=e.getValue(),l=t.column?t.column.editor.type:t.field.type;if(i&&i.editor&&i.editor.isArrayValue&&n&&(n=n.split(";")),i&&i.editor&&i.editor.isRef&&e.getText&&(n=[n,e.getText()]),i&&i.editor&&i.editor.isRefMul&&e.getText){var o=n.split(";"),a=e.getText().split(";");n=[];for(var r=0;r<o.length;r++)n.push([o[r],a[r]])}return"int"==l||"digits"==l?n=n?parseInt(n,10):0:"float"!=l&&"number"!=l||(n=n?parseFloat(n):0),n}},setValue:function(e,t,i){var n=i.field||i.column;if(e.setValue){if("Lookup"==e.type)return void e.setValue(t,t);if(n&&n.editor&&n.editor.isArrayValue&&t&&(t=t.join(";")),n&&n.editor&&n.editor.isRef&&$.isArray(t)&&(t=t[0]),n&&n.editor&&n.editor.isRefMul&&$.isArray(t)){for(var l=[],o=0;o<t.length;o++)l.push(1<t[o].length?t[o][1]:t[o][0]);t=l.join(";")}e.setValue(t)}},getText:function(e,t){t.field||t.column;if(e.getText)return e.getText()},setText:function(e,t,i){if(t&&e.setText)e.setText(t);else{var n=i.field||i.column;if(t=e.setValue()||i.value||"",n&&n.editor&&n.editor.isRef&&$.isArray(t)&&1<t.length&&(t=t[1]),n&&n.editor&&n.editor.isRefMul&&$.isArray(t)&&1<t.length){for(var l=[],o=0;o<t.length;o++)l.push(t[1]);t=l.join(";")}e.setText&&e.setText(t)}},getSelected:function(e,t){if(e.getSelected)return e.getSelected()},resize:function(e,t,i,n){n.field&&(t-=2),e.resize&&e.resize(t,i)},setEnabled:function(e,t){t?e.setEnabled&&e.setEnabled():e.setDisabled&&e.setDisabled()},destroy:function(e,t){e.destroy&&e.destroy()}};return $.extend({},e,leeUI.editorCreatorDefaults||{},m)},leeUI.win={mid:0,getMaskID:function(){return this.mid+=10,this.mid},top:!1,maskid:function(e){if(!(0<$("#lee-mask-"+e).length)){var t="";e&&(t="z-index:"+String(9e3+Number(e))+";");$("<div id='lee-mask-"+(e||"")+"' class='lee-window-mask' style='display: block;"+t+"'></div>").appendTo("body")}},unmaskid:function(e){e&&$("#lee-mask-"+e).remove()},mask:function(e){function t(){if(leeUI.win.windowMask){var e=$(window).height()+$(window).scrollTop();leeUI.win.windowMask.height(e)}}this.windowMask||(this.windowMask=$("<div  class='lee-window-mask' style='display: block;'></div>").appendTo("body"),$(window).bind("resize.ligeruiwin",t),$(window).bind("scroll",t)),this.windowMask.show(),t(),this.masking=!0},unmask:function(e){for(var t=$("body > .lee-dialog:visible,body > .lee-window:visible"),i=0,n=t.length;i<n;i++){var l=t.eq(i).attr("uiid");if(!e||e.id!=l){var o=leeUI.get(l);if(o)if(o.get("modal"))return}}this.windowMask&&this.windowMask.hide(),this.masking=!1},createTaskbar:function(){return this.taskbar||(this.taskbar=$('<div class="l-taskbar"><div class="l-taskbar-tasks"></div><div class="l-clear"></div></div>').appendTo("body"),this.top&&this.taskbar.addClass("l-taskbar-top"),this.taskbar.tasks=$(".l-taskbar-tasks:first",this.taskbar),this.tasks={}),this.taskbar.show(),this.taskbar.animate({bottom:0}),this.taskbar},removeTaskbar:function(){var e=this;e.taskbar.animate({bottom:-32},function(){e.taskbar.remove(),e.taskbar=null})},activeTask:function(e){for(var t in this.tasks){var i=this.tasks[t];t==e.id?i.addClass("l-taskbar-task-active"):i.removeClass("l-taskbar-task-active")}},getTask:function(e){if(this.taskbar)return this.tasks[e.id]?this.tasks[e.id]:null},addTask:function(e){var t=this;if(t.taskbar||t.createTaskbar(),t.tasks[e.id])return t.tasks[e.id];var i=e.get("title"),n=t.tasks[e.id]=$('<div class="l-taskbar-task"><div class="l-taskbar-task-icon"></div><div class="l-taskbar-task-content">'+i+"</div></div>");return t.taskbar.tasks.append(n),t.activeTask(e),n.bind("click",function(){t.activeTask(e),e.actived?e.min():e.active()}).hover(function(){$(this).addClass("l-taskbar-task-over")},function(){$(this).removeClass("l-taskbar-task-over")}),n},hasTask:function(){for(var e in this.tasks)if(this.tasks[e])return!0;return!1},removeTask:function(e){var t=this;t.taskbar&&(t.tasks[e.id]&&(t.tasks[e.id].unbind(),t.tasks[e.id].remove(),delete t.tasks[e.id]),t.hasTask()||t.removeTaskbar())},setFront:function(e){if(!e.options.coverMode){var t=leeUI.find(leeUI.core.Win);for(var i in t){var n=t[i];n==e?($(n.element).css("z-index","9200"),this.activeTask(n)):$(n.element).css("z-index","9100")}}}},leeUI.core.Win=function(e,t){leeUI.core.Win.base.constructor.call(this,e,t)},leeUI.core.Win.leeExtend(leeUI.core.UIComponent,{__getType:function(){return"leeUI.controls.Win"},mask:function(e){this.options.modal&&(e?leeUI.win.maskid(e):leeUI.win.mask(this))},unmask:function(e){this.options.modal&&(e?leeUI.win.unmaskid(e):leeUI.win.unmask(this))},min:function(){},max:function(){},active:function(){}}),leeUI.editors={text:{control:"TextBox"},dropdown:{control:"DropDown"},lookup:{control:"Lookup"},popup:{control:"Popup"},spinner:{control:"Spinner"},number:{control:"TextBox"},date:{control:"Date"}}}(jQuery),$.browser={},$.browser.mozilla=/firefox/.test(navigator.userAgent.toLowerCase()),$.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),$.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),$.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()),function(n){"use strict";n.fn.emulateTransitionEnd=function(e){var t=!1,i=this;n(this).one("bsTransitionEnd",function(){t=!0});return setTimeout(function(){t||n(i).trigger(n.support.transition.end)},e),this},n(function(){n.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}(),n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(e){if(n(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(s){s.fn.leeDrag=function(e){return s.leeUI.run.call(this,"leeUIDrag",arguments,{idAttrName:"dragid",hasElement:!1,propertyToElemnt:"target"})},s.fn.leeGetDragManager=function(){return s.leeUI.run.call(this,"leeUIGetDragManager",arguments,{idAttrName:"dragid",hasElement:!1,propertyToElemnt:"target"})},s.leeUIDefaults.Drag={onStartDrag:!1,onDrag:!1,onStopDrag:!1,handler:null,clickDelay:100,proxy:!0,revert:!1,animate:!0,onRevert:null,onEndRevert:null,receive:null,onDragEnter:null,onDragOver:null,onDragLeave:null,onDrop:null,disabled:!1,proxyX:null,proxyY:null},s.leeUI.controls.Drag=function(e){s.leeUI.controls.Drag.base.constructor.call(this,null,e)},s.leeUI.controls.Drag.leeExtend(s.leeUI.core.UIComponent,{__getType:function(){return"Drag"},__idPrev:function(){return"Drag"},_render:function(){var t=this,i=this.options;this.set(i),t.cursor="move",t.handler.css("cursor",t.cursor),t.mouseDowned=!1,t.handler.bind("mousedown.drag",function(e){i.disabled||2!=e.button&&(t.mouseDowned=!0,s(document).bind("selectstart.drag",function(){return!1}),setTimeout(function(){t.mouseDowned&&t._start.call(t,e)},i.clickDelay||100))}).bind("mousemove.drag",function(){i.disabled||t.handler.css("cursor",t.cursor)}).bind("mouseup.drag",function(){s(document).unbind("selectstart.drag")}),s(document).bind("mouseup",function(){t.mouseDowned=!1})},_rendered:function(){this.options.target.dragid=this.id},_start:function(e){var t=this,i=this.options;if(!t.reverting&&!i.disabled){if(t.current={target:t.target,left:t.target.offset().left,top:t.target.offset().top,startX:e.pageX||e.screenX,startY:e.pageY||e.clientY},0==t.trigger("startDrag",[t.current,e]))return!1;if(t.cursor="move",t._createProxy(i.proxy,e),i.proxy&&!t.proxy)return!1;(t.proxy||t.handler).css("cursor",t.cursor),s(document).bind("mousemove.drag",function(){t._drag.apply(t,arguments)}),s.leeUI.draggable.dragging=!0,s(document).bind("mouseup.drag",function(){s.leeUI.draggable.dragging=!1,t._stop.apply(t,arguments)})}},_drag:function(l){var o=this;this.options;if(o.current){var a=l.pageX||l.screenX,r=l.pageY||l.screenY;o.current.diffX=a-o.current.startX,o.current.diffY=r-o.current.startY,(o.proxy||o.handler).css("cursor",o.cursor),o.receive&&o.receive.each(function(e,t){var i=s(t),n=i.offset();a>n.left&&a<n.left+i.width()&&r>n.top&&r<n.top+i.height()?o.receiveEntered[e]?o.trigger("dragOver",[t,o.proxy||o.target,l]):(o.receiveEntered[e]=!0,o.trigger("dragEnter",[t,o.proxy||o.target,l])):o.receiveEntered[e]&&(o.receiveEntered[e]=!1,o.trigger("dragLeave",[t,o.proxy||o.target,l]))}),o.hasBind("drag")&&(0!=o.trigger("drag",[o.current,l])||o.proxy),o._applyDrag()}},_stop:function(i){var n=this,e=this.options;s(document).unbind("mousemove.drag"),s(document).unbind("mouseup.drag"),s(document).unbind("selectstart.drag"),n.receive&&n.receive.each(function(e,t){n.receiveEntered[e]&&n.trigger("drop",[t,n.proxy||n.target,i])}),n.proxy&&(e.revert?n.hasBind("revert")?0!=n.trigger("revert",[n.current,i])?n._revert(i):n._removeProxy():n._revert(i):(n._applyDrag(n.target),n._removeProxy())),n.cursor="move",n.trigger("stopDrag",[n.current,i]),n.current=null,n.handler.css("cursor",n.cursor)},_revert:function(e){var t=this;t.reverting=!0,t.proxy.animate({left:t.current.left,top:t.current.top},function(){t.reverting=!1,t._removeProxy(),t.trigger("endRevert",[t.current,e]),t.current=null})},_applyDrag:function(e){var t=this,i=this.options,n={},l=(e=e||t.proxy||t.target)==t.target;t.current.diffX&&(l||null==i.proxyX?n.left=t.current.left+t.current.diffX:n.left=t.current.startX+i.proxyX+t.current.diffX),t.current.diffY&&(l||null==i.proxyY?n.top=t.current.top+t.current.diffY:n.top=t.current.startY+i.proxyY+t.current.diffY),e==t.target&&t.proxy&&i.animate?(t.reverting=!0,e.animate(n,function(){t.reverting=!1})):e.css(n)},_setReceive:function(e){this.receiveEntered={},e&&(this.receive="string"==typeof e?s(e):e)},_setHandler:function(e){var t=this.options;this.handler=e?"string"==typeof e?s(e,t.target):e:s(t.target)},_setTarget:function(e){this.target=s(e)},_setCursor:function(e){this.cursor=e,(this.proxy||this.handler).css("cursor",e)},_createProxy:function(e,t){if(e){var i=this,n=this.options;"function"==typeof e?i.proxy=e.call(this.options.target,i,t):"clone"==e?(i.proxy=i.target.clone().css("position","absolute"),i.proxy.appendTo("body")):(i.proxy=s("<div class='lee-draggable'></div>"),i.proxy.width(i.target.width()).height(i.target.height()),i.proxy.attr("dragid",i.id).appendTo("body")),i.proxy.css({left:null==n.proxyX?i.current.left:i.current.startX+n.proxyX,top:null==n.proxyY?i.current.top:i.current.startY+n.proxyY}).show()}},_removeProxy:function(){this.proxy&&(this.proxy.remove(),this.proxy=null)}})}(jQuery),function(d){d.fn.leeResizable=function(e){return d.leeUI.run.call(this,"leeUIResizable",arguments,{idAttrName:"resizableid",hasElement:!1,propertyToElemnt:"target"})},d.fn.leeGetResizableManager=function(){return d.leeUI.run.call(this,"leeUIGetResizableManager",arguments,{idAttrName:"resizableid",hasElement:!1,propertyToElemnt:"target"})},d.leeUIDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2e3,maxHeight:2e3,minWidth:20,minHeight:20,scope:3,animate:!1,onStartResize:function(e){},onResize:function(e){},onStopResize:function(e){},onEndResize:null},d.leeUI.controls.Resizable=function(e){d.leeUI.controls.Resizable.base.constructor.call(this,null,e)},d.leeUI.controls.Resizable.leeExtend(d.leeUI.core.UIComponent,{__getType:function(){return"Resizable"},__idPrev:function(){return"Resizable"},_render:function(){var i=this,n=this.options;i.target=d(n.target),i.set(n),i.target.mousemove(function(e){if(!n.disabled&&(i.dir=i._getDir(e),i.dir?i.target.css("cursor",i.dir+"-resize"):0<i.target.css("cursor").indexOf("-resize")&&i.target.css("cursor","default"),n.target.dragid)){var t=d.leeUI.get(n.target.dragid);t&&i.dir?t.set("disabled",!0):t&&t.set("disabled",!1)}}).mousedown(function(e){n.disabled||i.dir&&i._start(e)})},_rendered:function(){this.options.target.resizableid=this.id},_getDir:function(e){var t=this.options,i="",n=this.target.offset(),l=this.target.width(),o=this.target.height(),a=t.scope,r=e.pageX||e.screenX,s=e.pageY||e.screenY;return s>=n.top&&s<n.top+a?i+="n":s<=n.top+o&&s>n.top+o-a&&(i+="s"),r>=n.left&&r<n.left+a?i+="w":r<=n.left+l&&r>n.left+l-a&&(i+="e"),"all"==t.handles||""==i?i:-1!=d.inArray(i,this.handles)?i:""},_setHandles:function(e){e&&(this.handles=e.replace(/(\s*)/g,"").split(","))},_createProxy:function(){var e=this;e.proxy=d('<div class="lee-resizable"></div>'),e.proxy.width(e.target.width()).height(e.target.height()),e.proxy.attr("resizableid",e.id).appendTo("body")},_removeProxy:function(){this.proxy&&(this.proxy.remove(),this.proxy=null)},_start:function(e){var t=this;this.options;t._createProxy(),t.proxy.css({left:t.target.offset().left,top:t.target.offset().top,position:"absolute"}),t.current={dir:t.dir,left:t.target.offset().left,top:t.target.offset().top,startX:e.pageX||e.screenX,startY:e.pageY||e.clientY,width:t.target.width(),height:t.target.height()},d(document).bind("selectstart.resizable",function(){return!1}),d(document).bind("mouseup.resizable",function(){t._stop.apply(t,arguments)}),d(document).bind("mousemove.resizable",function(){t._drag.apply(t,arguments)}),t.proxy.show(),t.trigger("startResize",[t.current,e])},changeBy:{t:["n","ne","nw"],l:["w","sw","nw"],w:["w","sw","nw","e","ne","se"],h:["n","ne","nw","s","se","sw"]},_drag:function(e){var t=this;this.options;if(t.current&&t.proxy){t.proxy.css("cursor",""==t.current.dir?"default":t.current.dir+"-resize");var i=e.pageX||e.screenX,n=e.pageY||e.screenY;t.current.diffX=i-t.current.startX,t.current.diffY=n-t.current.startY,t._applyResize(t.proxy),t.trigger("resize",[t.current,e])}},_stop:function(e){var t=this;this.options;t.hasBind("stopResize")?0!=t.trigger("stopResize",[t.current,e])&&t._applyResize():t._applyResize(),t._removeProxy(),t.trigger("endResize",[t.current,e]),d(document).unbind("selectstart.resizable"),d(document).unbind("mousemove.resizable"),d(document).unbind("mouseup.resizable")},_applyResize:function(e){var t=this,i=this.options,n={left:t.current.left,top:t.current.top,width:t.current.width,height:t.current.height},l=!1;e||(e=t.target,l=!0,isNaN(parseInt(t.target.css("top")))?n.top=0:n.top=parseInt(t.target.css("top")),isNaN(parseInt(t.target.css("left")))?n.left=0:n.left=parseInt(t.target.css("left"))),-1<d.inArray(t.current.dir,t.changeBy.l)?(n.left+=t.current.diffX,t.current.diffLeft=t.current.diffX):l&&delete n.left,-1<d.inArray(t.current.dir,t.changeBy.t)?(n.top+=t.current.diffY,t.current.diffTop=t.current.diffY):l&&delete n.top,-1<d.inArray(t.current.dir,t.changeBy.w)?(n.width+=(-1==t.current.dir.indexOf("w")?1:-1)*t.current.diffX,t.current.newWidth=n.width):l&&delete n.width,-1<d.inArray(t.current.dir,t.changeBy.h)?(n.height+=(-1==t.current.dir.indexOf("n")?1:-1)*t.current.diffY,t.current.newHeight=n.height):l&&delete n.height,l&&i.animate?e.animate(n):e.css(n)}})}(jQuery),function(v){v.fn.LeeToolTip=function(e){return v.leeUI.run.call(this,"leeUIToolTip",arguments,{idAttrName:"tooltipid"})},v.leeUIDefaults=v.leeUIDefaults||{},v.leeUIDefaults.ToolTip={animation:!0,placement:"right",selector:!1,template:'<div class="lee-tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",css:"",delay:0,html:!1,container:!0,onEnter:null,viewport:{selector:"body",padding:0}},v.leeUI.controls.ToolTip=function(e,t){v.leeUI.controls.ToolTip.base.constructor.call(this,e,t)},v.leeUI.controls.ToolTip.leeExtend(v.leeUI.core.UIComponent,{__getType:function(){return"ToolTip"},__idPrev:function(){return"ToolTip"},_extendMethods:function(){return{}},_isExternal:function(){return!0},_render:function(){var e=this,t=this.options;e.enabled=!0,e.type="tooltip",e.$element=v(this.element),e.$viewport=this.options.viewport&&v(v.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),e.inState={click:!1,hover:!1,focus:!1};for(var i=t.trigger.split(" "),n=i.length;n--;){var l=i[n];if("click"==l)e.$element.on("click."+e.type,t.selector,v.proxy(e.toggle,this));else if("manual"!=l){var o="hover"==l?"mouseenter":"focusin",a="hover"==l?"mouseleave":"focusout";e.$element.on(o+"."+e.type,t.selector,v.proxy(this.enter,this)),e.$element.on(a+"."+e.type,t.selector,v.proxy(this.leave,this))}}t.selector?t=v.extend({},t,{trigger:"manual",selector:""}):e.fixTitle(),e.set(t),e.$element.data("tooltip",e)},_setContent:function(e){var t=this.tip(),i=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](i),t.removeClass("fade in top bottom left right")},setNewTitle:function(e){this.tip().find(".tooltip-inner")[this.options.html?"html":"text"](e)},getDelegateOptions:function(){var i={},n=v.leeUIDefaults.ToolTip;return this._options&&v.each(this._options,function(e,t){n[e]!=t&&(i[e]=t)}),i},toggle:function(e){var t=this;this.options;e?(t.inState.click=!t.inState.click,t.isInStateTrue()?t.enter(self):t.leave(self)):t.tip().hasClass("in")?t.leave(self):t.enter(self)},tip:function(){if(!this.$tip&&(this.$tip=v(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return console.log(this.$tip.hasClass("zoom-big-fast-enter-active")),this.$tip},getUID:function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},enter:function(e){var t=this;if(e instanceof v.Event&&(t.inState["focusin"==e.type?"focus":"hover"]=!0),t.tip().hasClass("in")||"in"==t.hoverState)t.hoverState="in";else{if(clearTimeout(t.timeout),t.hoverState="in",!t.options.delay||!t.options.delay.show)return t.show();t.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)}},leave:function(e){var t=this;if(e instanceof v.Event&&(t.inState["focusout"==e.type?"focus":"hover"]=!1),!t.isInStateTrue()){if(clearTimeout(t.timeout),t.hoverState="out",!t.options.delay||!t.options.delay.hide)return t.hide();t.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)}},hide:function(e){var t=this,i=v(this.$tip),n=v.Event("hide.bs."+this.type);function l(){"in"!=t.hoverState&&i.detach(),t.$element&&t.$element.trigger("hidden.bs."+t.type),i.removeClass("zoom-big-leave zoom-big-leave-active in"),i.removeClass("zoom-big-fast-enter zoom-big-fast-enter-active"),i.removeClass("in"),e&&e()}if(this.$element.trigger(n),!n.isDefaultPrevented())return i.addClass("zoom-big-leave zoom-big-leave-active"),v.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",l).emulateTransitionEnd(150):l(),this.hoverState=null,this},destroy:function(){this.hide(),this.disable(),v(this.$tip).remove(),this.$element.data("tooltip",null),leeUI.remove(this)},show:function(){var t=this,e=this.options,i=v.Event("show.bs."+t.type);if(t.hasContent()&&t.enabled){t.$element.trigger(i);var n=v.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(i.isDefaultPrevented()||!n)return;var l=t.tip(),o=t.getUID(t.type);t._setContent(),l.attr("id",o),e.animation&&l.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,l[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,s=r.test(a);s&&(a=a.replace(r,"")||"top"),l.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+t.type,this),e.container?l.appendTo("body"):l.insertAfter(t.$element),t.$element.trigger("inserted.bs."+t.type);var d=this.getPosition();console.log(d);var c=l[0].offsetWidth,u=l[0].offsetHeight;if(s){var h=a,p=this.getPosition(this.$viewport);a="bottom"==a&&d.bottom+u>p.bottom?"top":"top"==a&&d.top-u<p.top?"bottom":"right"==a&&d.right+c>p.width?"left":"left"==a&&d.left-c<p.left?"right":a,l.removeClass(h).addClass(a)}var g=this.getCalculatedOffset(a,d,c,u);this.applyPlacement(g,a);var f=function(){var e=t.hoverState;t.$element.trigger("shown.bs."+t.type),t.hoverState=null,"out"==e&&t.leave(that)};v.support.transition&&t.$tip.hasClass("fade")?l.one("bsTransitionEnd",f).emulateTransitionEnd(150):f()}return this},applyPlacement:function(e,t){var i=this.tip(),n=i[0].offsetWidth,l=i[0].offsetHeight,o=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(a)&&(a=0),e.top+=o,e.left+=a,v.offset.setOffset(i[0],v.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},e),0),i.addClass("in");var r=i[0].offsetWidth,s=i[0].offsetHeight;"top"==t&&s!=l&&(e.top=e.top+l-s);var d=this.getViewportAdjustedDelta(t,e,r,s);d.left?e.left+=d.left:e.top+=d.top;var c=/top|bottom/.test(t),u=c?2*d.left-n+r:2*d.top-l+s,h=c?"offsetWidth":"offsetHeight";console.log(e),i.offset(e),console.log(i.offset()),this.replaceArrow(u,i[0][h],c),i.addClass("zoom-big-fast-enter zoom-big-fast-enter-active")},replaceArrow:function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},getCalculatedOffset:function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},getViewportAdjustedDelta:function(e,t,i,n){var l={top:0,left:0};if(!this.$viewport)return l;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var r=t.top-o-a.scroll,s=t.top+o-a.scroll+n;r<a.top?l.top=a.top-r:s>a.top+a.height&&(l.top=a.top+a.height-s)}else{var d=t.left-o,c=t.left+o+i;d<a.left?l.left=a.left-d:c>a.right&&(l.left=a.left+a.width-c)}return l},getPosition:function(e){var t=(e=e||this.$element)[0],i="BODY"==t.tagName,n=t.getBoundingClientRect();null==n.width&&(n=v.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var l=window.SVGElement&&t instanceof window.SVGElement,o=i?{top:0,left:0}:l?null:e.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=i?{width:v(window).width(),height:v(window).height()}:null;return v.extend({},n,a,r,o)},hasContent:function(){return this.getTitle()},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},enable:function(){return this.enabled=!0,this},disable:function(){return this.enabled=!1,this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},isInStateTrue:function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},getTitle:function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)}})}(jQuery),function(i){i.fn.LeePopOver=function(e){return i.leeUI.run.call(this,"PopOver",arguments,{idAttrName:"popoverid"})},i.leeUIDefaults.PopOver=i.extend({},i.leeUIDefaults.ToolTip,{placement:"right",trigger:"click",content:"",contentLoad:null,template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.leeUI.controls.PopOver=function(e,t){i.leeUI.controls.PopOver.base.constructor.call(this,e,t)},i.leeUI.controls.PopOver.leeExtend(i.leeUI.controls.ToolTip,{__getType:function(){return"PopOver"},__idPrev:function(){return"PopOver"},_setContent:function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e=this.$element,t=this.options;return e.attr("content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")}})}(jQuery),function(s){s.fn.leeMenu=function(e){return s.leeUI.run.call(null,"leeUIMenu",arguments)},s.leeUIDefaults.Menu={width:120,top:0,left:0,cls:null,items:null,shadow:!0,renderTo:"body"},s.leeUI.controls.Menu=function(e){s.leeUI.controls.Menu.base.constructor.call(this,null,e)},s.leeUI.controls.Menu.leeExtend(s.leeUI.core.UIComponent,{__getType:function(){return"Menu"},__idPrev:function(){return"Menu"},_extendMethods:function(){return{}},_render:function(){var i=this,e=this.options;i.menuItemCount=0,i.menus={},i.menu=i.createMenu(),i.element=i.menu[0],i.menu.css({top:e.top,left:e.left,width:e.width}),e.cls&&i.menu.addClass(e.cls),e.items&&s(e.items).each(function(e,t){i.addItem(t)}),s(document).bind("click.menu",function(){for(var e in i.menus){var t=i.menus[e];if(!t)return;t.hide()}}),i.set(e)},show:function(e,t){this.options;null==t&&(t=this.menu),e&&null!=e.left&&t.css({left:e.left}),e&&null!=e.top&&t.css({top:e.top}),t.show()},hide:function(e){this.options;null==e&&(e=this.menu),this.hideAllSubMenu(e),e.hide()},toggle:function(){this.options;this.menu.toggle()},removeItem:function(e){this.options;s("> .lee-menu-item[menuitemid="+e+"]",this.menu.items).remove()},setEnabled:function(e){this.options;s("> .lee-menu-item[menuitemid="+e+"]",this.menu.items).removeClass("lee-menu-item-disable")},setMenuText:function(e,t){this.options;s("> .lee-menu-item[menuitemid="+e+"] >.lee-menu-item-text:first",this.menu.items).html(t)},setDisabled:function(e){this.options;s("> .lee-menu-item[menuitemid="+e+"]",this.menu.items).addClass("lee-menu-item-disable")},isEnable:function(e){this.options;return!s("> .lee-menu-item[menuitemid="+e+"]",this.menu.items).hasClass("lee-menu-item-disable")},getItemCount:function(){this.options;return s("> .lee-menu-item",this.menu.items).length},addItem:function(n,l){var o=this,e=this.options;if(n)if(null==l&&(l=o.menu),n.line)l.items.append('<div class="lee-menu-item-line"></div>');else{var t=s('<div class="lee-menu-item"><div class="lee-menu-item-text"></div> </div>'),i=s("> .lee-menu-item",l.items).length;if(l.items.append(t),t.attr("leemenutemid",++o.menuItemCount),n.id&&t.attr("menuitemid",n.id),n.text&&s(">.lee-menu-item-text:first",t).html(n.text),n.icon&&(n.position="left",t.append('<i class=" '+n.position+" lee-icon lee-"+n.icon+'"></div>'),l.addClass("hasicon")),n.img&&(n.position="left",t.append('<img class=" '+n.position+' lee-menu-item-img " src="'+n.img+'"></img>'),l.addClass("hasicon")),(n.disable||n.disabled)&&t.addClass("lee-menu-item-disable"),n.children){t.append('<i class="right lee-icon lee-angle-right"></i>');var a=o.createMenu(t.attr("leemenutemid"));(o.menus[t.attr("leemenutemid")]=a).width(e.width),a.hover(null,function(){a.showedSubMenu||o.hide(a)}),s(n.children).each(function(){o.addItem(this,a)})}n.click&&t.click(function(){s(this).hasClass("lee-menu-item-disable")||n.click(n,i)}),n.dblclick&&t.dblclick(function(){s(this).hasClass("lee-menu-item-disable")||n.dblclick(n,i)});var r=s("> .lee-menu-over:first",l);t.hover(function(){if(!s(this).hasClass("lee-menu-item-disable")){var e=s(this).offset().top,t=e-l.offset().top;if(r.css({top:t}),o.hideAllSubMenu(l),n.children){var i=s(this).attr("leemenutemid");if(!i)return;o.menus[i]&&(console.log(s(this).offset().left),console.log(s(this).width()),console.log(s(this)),o.show({top:e-1,left:s(this).offset().left+s(this).parent().width()},o.menus[i]),l.showedSubMenu=!0)}}},function(){if(!s(this).hasClass("lee-menu-item-disable")){s(this).attr("leemenutemid");if(n.children)if(!s(this).attr("leemenutemid"))return}})}},hideAllSubMenu:function(e){var t=this;this.options;null==e&&(e=t.menu),s("> .lee-menu-item",e.items).each(function(){if(0<s("> .right",this).length){var e=s(this).attr("leemenutemid");if(!e)return;t.menus[e]&&t.hide(t.menus[e])}}),e.showedSubMenu=!1},createMenu:function(e){var t=this.options,i=s('<div class="lee-menu" style="display:none"> <div class="lee-menu-inner"></div></div>');return e&&i.attr("leeparentmenuitemid",e),i.items=s("> .lee-menu-inner:first",i),i.appendTo(t.renderTo),i.hover(null,function(){i.showedSubMenu||s("> .lee-menu-over:first",i).css({top:-24})}),e?this.menus[e]=i:this.menus[0]=i,i}})}(jQuery),function(a){"use strict";var r='[data-toggle="dropdown"]',n=function(e){a(e).on("click.bs.dropdown",this.toggle)};function s(e){var t=e.attr("data-target");t||(t=(t=e.attr("href"))&&/#[A-Za-z]/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,""));var i=t&&a(t);return i&&i.length?i:e.parent()}function o(n){n&&3===n.which||(a(".dropdown-backdrop").remove(),a(r).each(function(){var e=a(this),t=s(e),i={relatedTarget:this};t.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&a.contains(t[0],n.target)||(t.trigger(n=a.Event("hide.bs.dropdown",i)),n.isDefaultPrevented()||(e.attr("aria-expanded","false"),t.removeClass("open").trigger("hidden.bs.dropdown",i))))}))}n.VERSION="3.3.5",n.prototype.toggle=function(e){var t=a(this);if(!t.is(".disabled, :disabled")){var i=s(t),n=i.hasClass("open");if(o(),!n){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",o);var l={relatedTarget:this};if(i.trigger(e=a.Event("show.bs.dropdown",l)),e.isDefaultPrevented())return;t.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger("shown.bs.dropdown",l)}return!1}},n.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var t=a(this);if(e.preventDefault(),e.stopPropagation(),!t.is(".disabled, :disabled")){var i=s(t),n=i.hasClass("open");if(!n&&27!=e.which||n&&27==e.which)return 27==e.which&&i.find(r).trigger("focus"),t.trigger("click");var l=i.find(".dropdown-menu li:not(.disabled):visible a");if(l.length){var o=l.index(e.target);38==e.which&&0<o&&o--,40==e.which&&o<l.length-1&&o++,~o||(o=0),l.eq(o).trigger("focus")}}}};var e=a.fn.dropdown;a.fn.dropdown=function(i){return this.each(function(){var e=a(this),t=e.data("bs.dropdown");t||e.data("bs.dropdown",t=new n(this)),"string"==typeof i&&t[i].call(e)})},a.fn.dropdown.Constructor=n,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=e,this},a(document).unbind("click.bs.dropdown.data-api").unbind("click.bs.dropdown.data-api",".dropdown form").unbind("click.bs.dropdown.data-api").unbind("keydown.bs.dropdown.data-api").unbind("keydown.bs.dropdown.data-api",".dropdown-menu"),a(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,n.prototype.toggle).on("keydown.bs.dropdown.data-api",r,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery),function(d){d.fn.leeToolBar=function(e){return d.leeUI.run.call(this,"leeUIToolBar",arguments)},d.leeUIDefaults.ToolBar={flex:!1},d.leeUI.controls.ToolBar=function(e,t){d.leeUI.controls.ToolBar.base.constructor.call(this,e,t)},d.leeUI.controls.ToolBar.leeExtend(d.leeUI.core.UIComponent,{__getType:function(){return"ToolBar"},__idPrev:function(){return"ToolBar"},_extendMethods:function(){return[]},_render:function(){var e=this,t=this.options;e.toolbarItemCount=0,e.toolBar=d(this.element),e.toolBar.addClass("lee-toolbar"),e.set(t),e.disableItems={},t.flex&&e.bindFlex()},_setItems:function(e){var i=this;i.toolBar.html(""),d(e).each(function(e,t){i.addItem(t)})},bindFlex:function(){d(window).resize(d.proxy(this.setFlex,this)),this.setFlex()},setFlex:function(){var e=this.options,n=this.toolBar.width(),l=80,o=[],a=d(">div",this.toolBar);d(e.items).each(function(e,t){var i=d(a[e]);if(i.data("hidden"))return!0;l+=i.outerWidth(),l+=parseInt(i.css("marginLeft")),(l+=parseInt(i.css("marginRight")))<n?d(a[e]).show():(d(a[e]).hide(),o.push(t))}),this.removeItem("_showmore"),0<o.length&&this.addItem({id:"_showmore",text:"更多",type:"dropdown",childs:o})},removeItem:function(e){this.options;d("> .lee-toolbar-item[toolbarid="+e+"]",this.toolBar).remove()},setEnabled:function(e){this.options;d("> .lee-toolbar-item[toolbarid="+e+"]",this.toolBar).removeClass("lee-toolbar-item-disable"),d("a[toolbarid="+e+"]",this.toolBar).removeAttr("disabled"),this.disableItems[e]=!1},_setDisabled:function(e){this.options;d("> .lee-toolbar-item[toolbarid="+e+"]",this.toolBar).addClass("lee-toolbar-item-disable"),d("a[toolbarid="+e+"]",this.toolBar).attr("disabled","disabled"),this.disableItems[e]=!0},toggleBtns:function(e,n){var l=this,t=this.options,o=n?"show":"hide";d.each(e,function(e,t){var i=d("[toolbarid="+t+"]",l.toolBar);i[o](),n?i.data("hidden",null):i.data("hidden",!0)}),0<e.length&&t.flex&&this.setFlex()},setDisabled:function(e){this.options;d("> .lee-toolbar-item[toolbarid="+e+"]",this.toolBar).addClass("lee-toolbar-item-disable").removeClass("lee-panel-btn-over"),d("a[toolbarid="+e+"]",this.toolBar).attr("disabled","disabled"),this.disableItems[e]=!0},isEnable:function(e){this.options;return!d("> .lee-toolbar-item[toolbarid="+e+"]",this.toolBar).hasClass("lee-toolbar-item-disable")},bulidDropDownMenu:function(a,r){var s=this;d.each(a.childs,function(e,i){if(i.line)r.append('<li class="divider"></li>');else if(i.header)r.append('<li class="dropdown-header">'+i.text+"</li>");else{var t=d("<li></li>");i.disable&&t.addClass("disabled");var n="";s.disableItems[i.id]&&(n=" disabled ");var l=d('<a href="#" toolbarid="'+i.id+'" '+n+"><span>"+i.text+"</span></a>");if(i.childs){t.addClass("dropdown-submenu");var o=d('<ul class="dropdown-menu"></ul>');t.append(l).append(o),s.bulidDropDownMenu(i,o)}else t.append(l);i.icon?l.prepend("<i class='icon-img icon-"+i.icon+"'></i>"):i.iconfont&&l.prepend("<i class='lee-ion lee-ion-"+i.iconfont+"'></i>"),l.click(function(e){if("disabled"!=d(this).attr("disabled")&&!d(this).parent().hasClass("disabled")){var t=i.click(i,s);s.trigger("buttonClick",[t,a,e])}}),r.append(t)}})},setAlign:function(e,t){"1"==t&&e.css("float","right")},addLine:function(e){var t=d('<div class="lee-bar-separator"></div>');this.setAlign(t,e.align),this.toolBar.append(t)},addText:function(e){var t=d('<div class="lee-toolbar-item lee-toolbar-text"><span><p>'+(e.text||"")+"</p></span></div>");this.setAlign(t,e.align),this.toolBar.append(t)},addSearchBox:function(i){var n=this,e=d('<div class="lee-search-wrap lee-toolbar-item"><input class="lee-search-words" type="text" placeholder="请输入查询关键字"><i class="lee-ion-close close"></i><button class="search lee-ion-search" type="button" ></button></div>');this.setAlign(e,i.align),this.toolBar.append(e);var l=d("input",e),t=d(".close",e),o=d("button",e);function a(){""==l.val()?t.hide():t.show()}return o.click(function(e){var t=i.click(i,n,l.val());n.trigger("buttonClick",[t,i,e])}),l.keyup(function(e){13==e.keyCode&&o.click(),a()}),t.click(function(){l.val(""),a(),l.focus(),o.click()}),this},addLink:function(e){var t=d('<div class="lee-search-wrap lee-toolbar-item" ><a href="javascript:void(0)" style="padding:5px;display:inline-block;" >'+e.text+"</a></div>");return this.setAlign(t,e.align),this.toolBar.append(t),d("a",t).click(function(){e.click(e)}),this},addDropDown:function(e){var t=d('<li class="dropitem dropdown lee-toolbar-item" toolbarid="'+e.id+'"> <a href="#" data-toggle="dropdown" class="lee-panel-btn"  >'+e.text+'<i style="margin-left: 5px;" class="lee-ion-android-arrow-dropdown"></i></a> <ul class="dropdown-menu"></ul></li>');this.setAlign(t),e.icon?t.find("a").prepend("<i class='icon-img icon-"+e.icon+"' style='margin-right:5px;'></i>"):e.iconfont&&t.find("a").prepend("<i class='lee-ion lee-ion-"+e.iconfont+"' style='margin-right:5px;'></i>"),e.childs&&this.bulidDropDownMenu(e,t.find("ul")),this.toolBar.append(t)},addItem:function(i){var n=this;this.options;if(i.line||"line"==i.type)this.addLine(i);else if("text"!=i.type)if("searchbox"!=i.type){if("link"==i.type)return this.addLink(i),this;if("dropdown"!=i.type){var e=d('<div class="lee-toolbar-item lee-panel-btn"><span></span></div>');if("btn"==i.type)if(e=d('<a class="lee-btn  lee-toolbar-item"><span></span></a>'),i.style)switch(i.style){case"1":e.addClass("lee-btn-default");break;case"2":e.addClass("lee-btn-primary");break;case"3":e.addClass("lee-btn-sucess");break;case"4":e.addClass("lee-btn-info");break;case"5":e.addClass("lee-btn-danger")}else e.addClass("lee-btn-primary");if(n.toolBar.append(e),n.setAlign(e,i.align),i.id||(i.id="item-"+ ++n.toolbarItemCount),e.attr("toolbarid",i.id),i.img?(e.append("<img src='"+i.img+"' />"),e.addClass("l-toolbar-item-hasicon")):i.icon?(e.prepend("<i class='icon-img icon-"+i.icon+"'></i>"),e.addClass("l-toolbar-item-hasicon")):i.iconfont?(e.prepend("<i class='lee-ion lee-ion-"+i.iconfont+"'></i>"),e.addClass("l-toolbar-item-hasicon")):i.color&&(e.append("<div class='lee-toolbar-item-color' style='background:"+i.color+"'></div>"),e.addClass("l-toolbar-item-hasicon")),i.menu&&(e.append("<i class='right lee-icon lee-angle-down'></i>"),e.addClass("l-toolbar-item-hasicon")),i.text?d("span:first",e).html(i.text):d("span:first",e).remove(),i.disable&&e.addClass("lee-toolbar-item-disable"),i.click&&e.click(function(e){if(!d(this).hasClass("lee-toolbar-item-disable")){var t=i.click(i,n);n.trigger("buttonClick",[t,i,e])}}),i.menu){if(i.menu.id)return;i.menu=d.fn.leeMenu(i.menu),e.hover(function(){if(!d(this).hasClass("lee-toolbar-item-disable")){n.actionMenu&&n.actionMenu.hide();var e=d(this).offset().left,t=d(this).offset().top+d(this).height();i.menu.show({top:t+10,left:e}),n.actionMenu=i.menu,d(this).addClass("lee-panel-btn-over")}},function(){d(this).hasClass("lee-toolbar-item-disable")||d(this).removeClass("lee-panel-btn-over")})}else e.hover(function(){d(this).hasClass("lee-toolbar-item-disable")||d(this).addClass("lee-panel-btn-over")},function(){d(this).hasClass("lee-toolbar-item-disable")||d(this).removeClass("lee-panel-btn-over")}),e.mousedown(function(){i.disable||d(this).addClass("lee-panel-btn-selected")}),e.mouseup(function(){i.disable||d(this).removeClass("lee-panel-btn-selected")})}else this.addDropDown(i)}else this.addSearchBox(i);else this.addText(i)}})}(jQuery),function(f){f.fn.leeTab=function(e){return f.leeUI.run.call(this,"leeUITab",arguments)},f.fn.leeGetTabManager=function(){return f.leeUI.run.call(this,"leeUIGetTabManager",arguments)},f.leeUIDefaults.Tab={height:null,heightDiff:1,changeHeightOnResize:!1,contextmenu:!0,dblClickToClose:!1,dragToMove:!1,showSwitch:!0,showSwitchInTab:!1,data:null,onBeforeOverrideTabItem:null,onAfterOverrideTabItem:null,onBeforeRemoveTabItem:null,onAfterRemoveTabItem:null,onBeforeAddTabItem:null,onAfterAddTabItem:null,onBeforeSelectTabItem:null,onAfterSelectTabItem:null,onCloseOther:null,onCloseAll:null,onClose:null,onReload:null,onSwitchRender:null},f.leeUIDefaults.TabString={closeMessage:"关闭当前页",closeOtherMessage:"关闭其他",closeAllMessage:"关闭所有",reloadMessage:"刷新"},f.leeUI.controls.Tab=function(e,t){f.leeUI.controls.Tab.base.constructor.call(this,e,t)},f.leeUI.controls.Tab.leeExtend(f.leeUI.core.UIComponent,{__getType:function(){return"Tab"},__idPrev:function(){return"Tab"},_extendMethods:function(){return{}},_render:function(){var r=this,n=this.options;n.height&&(r.makeFullHeight=!0),r.tab=f(this.element),r.tab.addClass("lee-tab"),r._initContextMenu(),r.tab.content=f('<div class="lee-tab-content"></div>'),f("> div",r.tab).appendTo(r.tab.content),r.tab.content.appendTo(r.tab),r.tab.links=f('<div class="lee-tab-links"><ul style="left: 0px; "></ul><div class="lee-tab-switch"><i class="lee-ion-ios-arrow-down"></i></div></div>'),r.tab.links.prependTo(r.tab),r.tab.links.ul=f("ul",r.tab.links);var e=f("> div[lselected=true]",r.tab.content),s=0<e.length;function t(){var e=r.tab.width()-parseInt(r.tab.links.css("marginLeft"),10)-parseInt(r.tab.links.css("marginRight"),10);r.tab.links.width(e),r.setTabButton()}r.selectedTabId=e.attr("tabid"),f("> div",r.tab.content).each(function(e,t){var i=f('<li class=""><a></a></li>'),n=f(this);n.attr("title")&&(f("> a",i).html(n.attr("title")),n.attr("title","")),n.attr("tabindex",e);var l=n.attr("tabid");if(null==l&&(l=r.getNewTabid(),n.attr("tabid",l),n.attr("lselected")&&(r.selectedTabId=l)),i.attr("tabid",l),s||0!=e||(r.selectedTabId=l),n.attr("showClose")&&(i.addClass("lee-tab-hasclose"),i.append("<i class='lee-ion-android-close lee-tab-links-item-close'></i>")),f("> ul",r.tab.links).append(i),n.hasClass("lee-tab-content-item")||n.addClass("lee-tab-content-item"),0<n.find("iframe").length){var o=f("iframe:first",n);if("complete"!=o[0].readyState){0==n.find(".lee-tab-loading:first").length&&n.prepend("<div class='lee-tab-loading' style='display:block;'></div>");var a=f(".l-tab-loading:first",n);o.bind("load.tab",function(){a.hide()})}}}),r.selectTabItem(r.selectedTabId),n.height&&("string"==typeof n.height&&0<n.height.indexOf("%")?(r.onResize(),n.changeHeightOnResize&&f(window).resize(function(){r.onResize.call(r)})):r.setHeight(n.height)),r.makeFullHeight&&r.setContentHeight(),f("li",r.tab.links).each(function(){r._addTabItemEvent(f(this))}),r.tab.bind("dblclick.tab",function(e){if(n.dblClickToClose){r.dblclicking=!0;var t=e.target||e.srcElement;if("a"==t.tagName.toLowerCase()){var i=f(t).parent().attr("tabid");!!f(t).parent().find("div.l-tab-links-item-close").length&&r.removeTabItem(i)}r.dblclicking=!1}}),r.set(n),r.setTabButton(),r._initToolbar(),r._initIcon(),setTimeout(t,100),f(window).resize(function(){t.call(r)}),r.bind("sysWidthChange",function(){t.call(r)})},_initToolbar:function(){var e=this,t=this.options;if(t.toolbar){e.toolbars=[],e.toolbarWrap=f("<div class='lee-tab-toolbar'></div>"),e.tab.links.append(e.toolbarWrap);for(var i=0;i<t.toolbar.length;i++){var n=f("<div></div>");n.leeToolBar(t.toolbar[i]),e.toolbarWrap.append(n),e.toolbars.push(n)}}},_setToolbarVisible:function(){var e=this;this.options;if(e.toolbars)for(var t=0;t<e.toolbars.length;t++)t==e.selectIndex?e.toolbars[t].show():e.toolbars[t].hide()},_initIcon:function(){var e=this.options;if(e.icons)for(var t in e.icons){var i=f("li:eq("+t+")",this.tab.links.ul);e.icons[t].icon?i.prepend("<i class='icon-img icon-"+obj.icon+"'></i>"):e.icons[t].iconfont&&i.prepend("<i class='lee-ion lee-ion-"+obj.iconfont+"'></i>")}},_initContextMenu:function(){var e=this,t=this.options;t.contextmenu&&f.fn.leeMenu&&(e.tab.menu=f.fn.leeMenu({items:[{text:t.closeMessage,id:"close",click:function(){e._menuItemClick.apply(e,arguments)}},{text:t.closeOtherMessage,id:"closeother",click:function(){e._menuItemClick.apply(e,arguments)}},{text:t.closeAllMessage,id:"closeall",click:function(){e._menuItemClick.apply(e,arguments)}},{text:t.reloadMessage,id:"reload",click:function(){e._menuItemClick.apply(e,arguments)}}]}))},_setShowSwitch:function(e){var t=this;this.options;e?(f(".lee-tab-switch",t.tab.links).length||f("<div class='lee-tab-switch'><i class='lee-ion-chevron-down'></i></div>").appendTo(t.tab.links),f(t.tab).addClass("lee-tab-switchable"),f(".lee-tab-switch",t.tab).click(function(){t.toggleSwitch(this)})):(f(t.tab).removeClass("lee-tab-switchable"),f("body > .lee-tab-windowsswitch").remove())},_setShowSwitchInTab:function(e){var t=this;if(this.options.showSwitch&&e){f(t.tab).removeClass("lee-tab-switchable"),f(".lee-tab-switch",t.tab).remove();var i=f("<li class='lee-tab-itemswitch'><a><i class='lee-ion-ios-arrow-down'></i></a></li>");i.appendTo(t.tab.links.ul),i.click(function(){t.toggleSwitch(this)})}else f(".lee-tab-itemswitch",t.tab.ul).remove()},toggleSwitch:function(e){var i=this;this.options;if(f("body > .lee-tab-windowsswitch").length)f("body > .lee-tab-windowsswitch").remove();else if(null!=e){var l=f("<div class='lee-tab-windowsswitch'></div>").appendTo("body"),t=i.tab.links.ul.find(">li"),o=i.getSelectedTabItemID();t.each(function(e,t){var i=f("<a href='javascript:void(0)'></a>");i.text(f(t).find("a").text());var n=f(t).attr("tabid");null!=n&&(n==o&&i.addClass("selected"),i.attr("tabid",n),l.append(i))}),l.css({top:f(e).offset().top+f(e).outerHeight()+1,left:f(e).offset().left-l.outerWidth()+f(e).outerWidth()}),l.find("a").bind("click",function(e){var t=f(this).attr("tabid");null!=t&&(i.selectTabItem(t),i.moveToTabItem(t),f("body > .lee-tab-windowsswitch").remove())}),i.trigger("switchRender",[l])}},_applyDrag:function(n){var d=this;this.options;return d.droptip=d.droptip||f("<div class='lee-tab-drag-droptip' style='display:none'><div class='lee-drop-move-up'></div><div class='lee-ion-ios-arrow-down'></div></div>").appendTo("body"),f(n).leeDrag({revert:!0,animate:!1,proxy:function(){var e=f(this).find("a").html();return d.dragproxy=f("<div class='lee-tab-drag-proxy' style='display:none'><div class='lee-drop-icon lee-drop-no'></div></div>").appendTo("body"),d.dragproxy.append(e),d.dragproxy},onRendered:function(){this.set("cursor","pointer")},onStartDrag:function(e,t){if(!f(n).hasClass("lee-selected"))return!1;if(2==t.button)return!1;var i=t.srcElement||t.target;return!f(i).hasClass("lee-tab-links-item-close")&&void 0},onDrag:function(e,r){null==d.dropIn&&(d.dropIn=-1);var t=d.tab.links.ul.find(">li"),s=t.index(e.target);t.each(function(e,t){if(s!=e){var i=s<e;if(-1==d.dropIn||d.dropIn==e){var n=f(this).offset(),l={top:n.top,bottom:n.top+f(this).height(),left:n.left-10,right:n.left+10};i&&(l.left+=f(this).width(),l.right+=f(this).width());var o=r.pageX||r.screenX,a=r.pageY||r.screenY;o>l.left&&o<l.right&&a>l.top&&a<l.bottom?(d.droptip.css({left:l.left+5,top:l.top-9}).show(),d.dropIn=e,d.dragproxy.find(".lee-drop-icon").removeClass("lee-drop-no").addClass("lee-drop-yes")):(d.dropIn=-1,d.droptip.hide(),d.dragproxy.find(".lee-drop-icon").removeClass("lee-drop-yes").addClass("lee-drop-no"))}}})},onStopDrag:function(e,t){if(-1<d.dropIn){var i=d.tab.links.ul.find(">li:eq("+d.dropIn+")").attr("tabid"),n=f(e.target).attr("tabid");setTimeout(function(){d.moveTabItem(n,i)},0),d.dropIn=-1,d.dragproxy.remove()}d.droptip.hide(),this.set("cursor","default")}})},_setDragToMove:function(e){if(f.fn.leeDrag){var t=this;this.options;if(e){if(t.drags)return;t.drags=t.drags||[],t.tab.links.ul.find(">li").each(function(){t.drags.push(t._applyDrag(this))})}}},moveTabItem:function(e,t){var i=this.tab.links.ul.find(">li[tabid="+e+"]"),n=this.tab.links.ul.find(">li[tabid="+t+"]");this.tab.links.ul.find(">li").index(i)<this.tab.links.ul.find(">li").index(n)?n.after(i):n.before(i)},setTabButton:function(){var e=this,t=(this.options,0);return f("li",e.tab.links.ul).each(function(){t+=f(this).outerWidth()+2}),e.tab.width()<t?(f(".lee-tab-links-left",e.tab).length||(e.tab.links.append('<div class="lee-tab-links-left"><a class="lee-ion-ios-arrow-left"></a></div><div class="lee-tab-links-right"><a class="lee-ion-ios-arrow-right"></a></div>'),e.setTabButtonEven()),console.log(e.tab.links.ul.css("left")),e.tab.links.ul.position().left<=30&&e.tab.links.ul.css("left",18),!0):(console.log(e.tab.links.ul.css("left")),e.tab.links.ul.position().left<=30&&e.tab.links.ul.css("left",0),f(".lee-tab-links-left,.lee-tab-links-right",e.tab.links).remove(),!1)},setTabButtonEven:function(){var e=this;this.options;f(".lee-tab-links-left",e.tab.links).hover(function(){f(this).addClass("lee-tab-links-left-over")},function(){f(this).removeClass("lee-tab-links-left-over")}).unbind("click").click(function(){e.moveToPrevTabItem()}),f(".lee-tab-links-right",e.tab.links).hover(function(){f(this).addClass("lee-tab-links-right-over")},function(){f(this).removeClass("lee-tab-links-right-over")}).unbind("click").click(function(){e.moveToNextTabItem()})},moveToPrevTabItem:function(e){this.options;var t=f("> li",this.tab.links.ul),i=f(".lee-tab-links-right",this.tab),n=f(".lee-tab-links-left",this.tab);if(!i.length||!n.length)return!1;i.offset();for(var l=null,o=0,a=n.offset().left+n.outerWidth(),r=0,s=t.length;r<s;r++){var d=f(t[r]),c=d.offset(),u=c.left,h=c.left+d.outerWidth();if(null!=e){if(u<a&&d.attr("tabid")==e){l=d;break}}else if(u<a&&a<=h){l=d;break}o+=d.outerWidth()+parseInt(d.css("marginLeft"))+parseInt(d.css("marginRight"))}if(null==l)return!1;var p=o-n.outerWidth();return this.tab.links.ul.animate({left:-1*p}),!0},moveToNextTabItem:function(e){this.options;var t=f("> li",this.tab.links.ul),i=f(".lee-tab-links-right",this.tab),n=f(".lee-tab-links-left",this.tab);if(!i.length||!n.length)return!1;for(var l=i.offset(),o=n.offset(),a=null,r=0,s=0,d=t.length;s<d;s++){var c=f(t[s]);r+=c.outerWidth()+parseInt(c.css("marginLeft"))+parseInt(c.css("marginRight"));var u=c.offset(),h=u.left,p=u.left+c.outerWidth();if(null!=e){if(p>l.left&&c.attr("tabid")==e){a=c;break}}else if(h<=l.left&&p>l.left){a=c;break}}if(null==a)return!1;var g=r-(l.left-o.left)+parseInt(a.css("marginLeft"))+parseInt(a.css("marginRight"));return this.tab.links.ul.animate({left:-1*g}),!0},moveToTabItem:function(e){this.options;this.moveToPrevTabItem(e)||this.moveToNextTabItem(e)},getTabItemCount:function(){this.options;return f("li",this.tab.links.ul).length},getSelectedTabItemID:function(){this.options;return f("li.lee-selected",this.tab.links.ul).attr("tabid")},removeSelectedTabItem:function(){this.options;this.removeTabItem(this.getSelectedTabItemID())},overrideSelectedTabItem:function(e){this.options;this.overrideTabItem(this.getSelectedTabItemID(),e)},overrideTabItem:function(e,t){var i=this;this.options;if(0==i.trigger("beforeOverrideTabItem",[e]))return!1;var n=t.tabid;null==n&&(n=i.getNewTabid());var l=t.url,o=t.content,a=(t.target,t.text),r=t.showClose,s=t.height;if(!i.isTabItemExist(n)){var d=f("li[tabid="+e+"]",i.tab.links.ul),c=f(".lee-tab-content-item[tabid="+e+"]",i.tab.content);d&&c&&(d.attr("tabid",n),c.attr("tabid",n),0==f("iframe",c).length&&l?c.html("<iframe frameborder='0'></iframe>"):o&&c.html(o),f("iframe",c).attr("name",n),null==r&&(r=!0),0==r?f(".lee-tab-links-item-close",d).remove():0==f(".lee-tab-links-item-close",d).length&&d.append("<i class='lee-ion-android-close lee-tab-links-item-close'></i>"),null==a&&(a=n),s&&c.height(s),f("a",d).text(a),f("iframe",c).attr("src",l),i.trigger("afterOverrideTabItem",[e]))}},setHeader:function(e,t){f("li[tabid="+e+"] a",this.tab.links.ul).text(t)},selectTabItem:function(e){var t=this,i=(this.options,f("> .lee-tab-content-item[tabid="+e+"]",t.tab.content)),n=i[0].id,l=i.attr("tabindex");if(0==t.trigger("beforeSelectTabItem",[e,n,l]))return!1;t.selectedTabId=e,t.selectIndex=Number(l),i.show().siblings().hide(),f("li[tabid="+e+"]",t.tab.links.ul).addClass("lee-selected").siblings().removeClass("lee-selected"),t._setToolbarVisible(),t.trigger("afterSelectTabItem",[e,n,l])},moveToLastTabItem:function(){this.options;var e=0;f("li",this.tab.links.ul).each(function(){e+=f(this).width()+2});var t=this.tab.width();if(t<e){var i=f(".lee-tab-links-right",this.tab.links).width();this.tab.links.ul.animate({left:-1*(e-t+i+2)})}},getTabItemTitle:function(e){this.options;return f("li[tabid="+e+"] a",this.tab.links.ul).text()},setTabItemTitle:function(e,t){this.options;f("li[tabid="+e+"] a",this.tab.links.ul).text(t)},getTabItemSrc:function(e){this.options;return f(".lee-tab-content-item[tabid="+e+"] iframe",this.tab.content).attr("src")},setTabItemSrc:function(e,t){this.options;var i=f(".lee-tab-content-item[tabid="+e+"]",this.tab.content),n=f(".lee-tab-loading:first",i),l=f(".lee-tab-content-item[tabid="+e+"] iframe",this.tab.content);n.show(),l.attr("src",t).unbind("load.tab").bind("load.tab",function(){n.hide()})},isTabItemExist:function(e){this.options;return 0<f("li[tabid="+e+"] a",this.tab.links.ul).length},addTabItem:function(e){var t=this,i=this.options;if(0==t.trigger("beforeAddTabItem",[e]))return!1;var n=e.tabid;null==n&&(n=t.getNewTabid());var l=e.url,o=e.content,a=e.text,r=e.showClose,s=e.height;if(t.isTabItemExist(n))t.selectTabItem(n);else{var d=f("<li class='lee-tab-hasclose'><a></a><i class='lee-ion-android-close lee-tab-links-item-close'></i></li>"),c=f("<div class='lee-tab-content-item'><div class='lee-tab-loading' style='display:block;'></div><iframe frameborder='0'></iframe></div>"),u=f("div:first",c),h=f("iframe:first",c);if(t.makeFullHeight){var p=t.tab.height()-t.tab.links.height();c.height(p)}d.attr("tabid",n),c.attr("tabid",n),l?(h[0].tab=t,e.data&&(h[0].openerData=e.data),h.attr("name",n).attr("id",n).attr("src",l).bind("load.tab",function(){u.hide(),e.callback&&e.callback()})):(h.remove(),u.remove()),o?(c.html(o),e.callback&&e.callback()):e.target&&(c.append(e.target),e.callback&&e.callback()),null==r&&(r=!0),0==r&&f(".lee-tab-links-item-close",d).remove(),null==a&&(a=n),s&&c.height(s),f("a",d).text(a),f(".lee-tab-itemswitch",t.tab.links.ul).length?d.insertBefore(f(".lee-tab-itemswitch",t.tab.links.ul)):t.tab.links.ul.append(d),t.tab.content.append(c),t.selectTabItem(n),t.setTabButton()&&t.moveToTabItem(n),t._addTabItemEvent(d),i.dragToMove&&f.fn.leeDrag&&(t.drags=t.drags||[],d.each(function(){t.drags.push(t._applyDrag(this))})),t.toggleSwitch(),t.trigger("afterAddTabItem",[e])}},_addTabItemEvent:function(e){var t=this;this.options;e.click(function(){var e=f(this).attr("tabid");t.selectTabItem(e)}),f(e).hover(function(){e.addClass("lee-tab-item-hover")},function(){e.removeClass("lee-tab-item-hover")}),t.tab.menu&&t._addTabItemContextMenuEven(e),f(".lee-tab-links-item-close",e).hover(function(){f(this).addClass("lee-tab-links-item-close-over")},function(){f(this).removeClass("lee-tab-links-item-close-over")}).click(function(){var e=f(this).parent().attr("tabid");t.removeTabItem(e)})},removeTabItem:function(e){var t=this;this.options;if(0==t.trigger("beforeRemoveTabItem",[e]))return!1;f("li[tabid="+e+"]",t.tab.links.ul).hasClass("lee-selected")&&(f(".lee-tab-content-item[tabid="+e+"]",t.tab.content).prev().show(),f("li[tabid="+e+"]",t.tab.links.ul).prev().addClass("lee-selected").siblings().removeClass("lee-selected"));var i=f(".lee-tab-content-item[tabid="+e+"]",t.tab.content),n=f("iframe",i);if(n.length){var l=n[0];l.src="about:blank";try{l.contentWindow.document.write("")}catch(e){}f.browser.msie&&CollectGarbage(),n.remove()}i.remove(),f("li[tabid="+e+"]",t.tab.links.ul).remove(),t.setTabButton(),t.trigger("afterRemoveTabItem",[e])},hideTabItem:function(e){var t=this;this.options;f("li[tabid="+e+"]",t.tab.links.ul).hasClass("lee-selected")&&(f(".lee-tab-content-item[tabid="+e+"]",t.tab.content).prev().show(),f("li[tabid="+e+"]",t.tab.links.ul).prev().addClass("lee-selected").siblings().removeClass("lee-selected")),f("li[tabid="+e+"]",t.tab.links.ul).hide(),f(".lee-tab-content-item[tabid="+e+"]",t.tab.content).hide()},showTabItem:function(e){this.options;f("li[tabid="+e+"]",this.tab.links.ul).show()},addHeight:function(e){this.options;var t=this.tab.height()+e;this.setHeight(t)},setHeight:function(e){this.options;this.tab.height(e),this.setContentHeight()},setContentHeight:function(){this.options;var e=this.tab.height()-this.tab.links.height();this.tab.content.height(e),f("> .lee-tab-content-item",this.tab.content).height(e)},getNewTabid:function(){this.options;return this.getnewidcount=this.getnewidcount||0,"tabitem"+ ++this.getnewidcount},getTabidList:function(e,t){this.options;var i=[];return f("> li",this.tab.links.ul).each(function(){f(this).attr("tabid")&&f(this).attr("tabid")!=e&&(!t||0<f(".lee-tab-links-item-close",this).length)&&i.push(f(this).attr("tabid"))}),i},removeOther:function(e,t){var i=this,n=(this.options,i.getTabidList(e,!0));f(n).each(function(){i.removeTabItem(this)})},reload:function(e){this.options;var t=f(".lee-tab-content-item[tabid="+e+"]"),i=f(".lee-tab-loading:first",t),n=f("iframe:first",t),l=f(n).attr("src");i.show(),n.attr("src",l).unbind("load.tab").bind("load.tab",function(){i.hide()})},removeAll:function(e){var t=this,i=(this.options,t.getTabidList(null,!0));f(i).each(function(){t.removeTabItem(this)})},onResize:function(){var e=this,t=this.options;if(!t.height||"string"!=typeof t.height||-1==t.height.indexOf("%"))return!1;if("body"==e.tab.parent()[0].tagName.toLowerCase()){var i=f(window).height();i-=parseInt(e.tab.parent().css("paddingTop")),i-=parseInt(e.tab.parent().css("paddingBottom")),e.height=t.heightDiff+i*parseFloat(e.height)*.01}else e.height=t.heightDiff+e.tab.parent().height()*parseFloat(t.height)*.01;e.tab.height(e.height),e.setContentHeight()},_menuItemClick:function(e){var t=this;this.options;if(e.id&&t.actionTabid)switch(e.id){case"close":if(0==t.trigger("close"))return;t.removeTabItem(t.actionTabid),t.actionTabid=null;break;case"closeother":if(0==t.trigger("closeother"))return;t.removeOther(t.actionTabid);break;case"closeall":if(0==t.trigger("closeall"))return;t.removeAll(),t.actionTabid=null;break;case"reload":if(0==t.trigger("reload",[{tabid:t.actionTabid}]))return;t.selectTabItem(t.actionTabid),t.reload(t.actionTabid)}},_addTabItemContextMenuEven:function(t){var i=this;this.options;t.bind("contextmenu",function(e){if(i.tab.menu)return i.actionTabid=t.attr("tabid"),i.tab.menu.show({top:e.pageY,left:e.pageX}),0==f(".lee-tab-links-item-close",this).length?i.tab.menu.setDisabled("close"):i.tab.menu.setEnabled("close"),!1})}})}(jQuery),function(d){d.fn.leeWizard=function(e){return d.leeUI.run.call(this,"leeUIWizard",arguments)},d.fn.leeGetWizardManager=function(){return d.leeUI.run.call(this,"leeUIGetleeUIWizardManager",arguments)},d.leeUIDefaults.Wizard={toolbar:!1,onNext:null,onPrev:null,onConfirm:null,fixed:!0,skip:!1,onBeforeSelectTabItem:null,onAfterSelectTabItem:null},d.leeUIDefaults.WizardString={},d.leeUI.controls.Wizard=function(e,t){d.leeUI.controls.Wizard.base.constructor.call(this,e,t)},d.leeUI.controls.Wizard.leeExtend(d.leeUI.core.UIComponent,{__getType:function(){return"Wizard"},__idPrev:function(){return"Wizard"},_extendMethods:function(){return{}},_render:function(){var r=this,s=this.options;r.tab=d(this.element),r.tab.addClass("lee-wizard"),r.tab.content=d('<div class="lee-wizard-content"></div>'),d("> div",r.tab).appendTo(r.tab.content),r.tab.content.appendTo(r.tab),r.tab.links=d('<div class="lee-wizard-step"><ul class="steps"></ul></div>'),r.tab.links.prependTo(r.tab),r.activeTabs={},r.tab.links.ul=d("ul",r.tab.links),r.allTabLength=0,d("> div",r.tab.content).each(function(e,t){var i=d('<li class=""><span class="step">'+(e+1)+'</span><span class="title"></span><span class="chevron"></span></li>'),n=d(this);n.attr("title")&&(d("> .title",i).html(n.attr("title")),n.attr("title","")),n.attr("tabindex",e),i.attr("tabindex",e);var l,o=n.attr("tabid");if(null==o&&(o=r.getNewTabid(),n.attr("tabid",o)),i.attr("tabid",o),s.skip){var a=(l=e,function(){r.activeTabs[l]&&r.select(l)});i.click(a)}0==e&&(r.selectedTabId=o),d("> ul",r.tab.links).append(i),n.addClass("lee-wizard-content-item"),r.allTabLength++}),r.setToolbar(),r.select(0),r.set(s)},setStatus:function(){var e=this;this.options;0==e.currentIndex?e.btnPrev.attr("disabled","disabled"):e.btnPrev.removeAttr("disabled"),e.allTabLength==e.currentIndex+1?(e.btnNext.attr("disabled","disabled"),e.btnDone.show()):(e.btnNext.removeAttr("disabled"),e.btnDone.hide())},setToolbar:function(e){var t=this;this.options.toolbar&&(t.tab.addClass("hastoolbar"),t.tab.toolbar=d('<div class="lee-wizard-toolbar"></div>'),t.tab.append(t.tab.toolbar),t.btnGroup=d('<div class="lee-btn-group"></div>'),t.btnPrev=d("<button class='lee-btn'><i class='icon-Previous' style='margin-right: 3px;float: left;margin-top: 2px;'></i>上一步</button>"),t.btnNext=d("<button class='lee-btn'>下一步<i class='icon-Next' style='margin-left: 3px;float: right;margin-top: 2px;'></i></i></button>"),t.btnDone=d("<button class='lee-btn lee-btn-primary'><i class='lee-ion-checkmark' style='margin-right: 3px;'></i>完成</button>"),t.btnGroup.append(t.btnPrev).append(t.btnNext),t.tab.toolbar.append(t.btnGroup).append(t.btnDone),t.btnPrev.click(function(){if(0==t.trigger("prev",[t.currentIndex]))return!1;t.select(t.currentIndex-1)}),t.btnNext.click(function(){if(0==t.trigger("next",[t.currentIndex]))return!1;t.select(t.currentIndex+1)}),t.btnDone.click(function(){t.trigger("confirm",[t.currentIndex])}))},select:function(e){var t,i=this;this.options;"number"==typeof e?(t=d("> .lee-wizard-content-item[tabindex="+e+"]",i.tab.content),e=d(t).attr("tabid")):t=d("> .lee-wizard-content-item[tabid="+e+"]",i.tab.content);var n=t[0].id,l=t.attr("tabindex");if(0==i.trigger("beforeSelectTabItem",[e,n,l]))return!1;i.selectedTabId=e,i.currentIndex=Number(l),t.show().siblings().hide(),i.activeTabs[l]=!0,d("li[tabid="+e+"]",i.tab.links.ul).addClass("active").siblings().removeClass("active");for(var o=0;o<Number(l);o++)d("li:eq("+o+")",i.tab.links.ul).addClass("complete"),d("li:eq("+o+")>.step",i.tab.links.ul).addClass("lee-ion-checkmark");for(o=Number(l);o<i.allTabLength;o++)d("li:eq("+o+")",i.tab.links.ul).removeClass("complete"),d("li:eq("+o+")>.step",i.tab.links.ul).removeClass("lee-ion-checkmark");i.setStatus(),i.trigger("afterSelectTabItem",[e,n,l])},getNewTabid:function(){this.options;return this.getnewidcount=this.getnewidcount||0,"tabitem"+ ++this.getnewidcount}})}(jQuery),function(t,n){var i=0,l={pos:"top-center",status:"info",autoclose:"true",icon:null,title:"",message:null,timeout:"2000",icon:null,onClose:function(){}},o={},a={},r=function(e){this.id=i++,this.options=t.extend({},l,e),this.element=t("<div class='lee-alert'> <div></div></div>"),this.content(this.getContent()),this.options.status&&(this.element.addClass(this.options.status),this.options.icon&&this.element.addClass("hasicon"),this.options.message&&this.element.addClass("hasdesc"),this.currentstatus=this.options.status),a[this.options.pos]||(a[this.options.pos]=t('<div class="lee-message lee-message-'+this.options.pos+'"></div>').appendTo("body"))};r.prototype.getContent=function(){var e=[],t=this.options;return t.icon&&e.push('<i class = "lee-icon lee-icon-'+t.icon+' alert-icon"></i>'),t.title&&e.push('<span class = "alert-message" > '+t.title+"</span>"),t.message&&e.push('<span class = "alert-description" >'+t.message+"</span>"),t.showclose&&e.push('<a class = "close" >< i class = "fa fa-remove" ></i></a>'),e.join("")},r.prototype.show=function(){if(!this.element.is(":visible")){var t=this;a[this.options.pos].show().prepend(this.element);var e=parseInt(this.element.css("margin-bottom"),10);return this.element.css({opacity:0,"margin-top":-1*this.element.outerHeight(),"margin-bottom":0}).animate({opacity:1,"margin-top":0,"margin-bottom":e},function(){if(t.options.timeout){var e=function(){t.close()};t.timeout=setTimeout(e,t.options.timeout),t.element.hover(function(){clearTimeout(t.timeout)},function(){t.timeout=setTimeout(e,t.options.timeout)})}}),this}},r.prototype.close=function(e){var t=this,i=function(){t.element.remove(),a[t.options.pos].children().length||a[t.options.pos].hide(),t.options.onClose.apply(t,[]),delete o[t.uuid]};this.timeout&&clearTimeout(this.timeout),e?i():this.element.animate({opacity:0,"margin-top":-1*this.element.outerHeight(),"margin-bottom":0},function(){i()})},r.prototype.content=function(e){var t=this.element.find(">div");return e?(t.html(e),this):t.html()},r.prototype.status=function(e){return e?(this.element.removeClass("ui-message-message-"+this.currentstatus).addClass("uk-notify-message-"+e),this.currentstatus=e,this):this.currentstatus},leeUI.Notify=function(e){return new r(e).show()},leeUI.Success=function(e,t,i){return n.top!=n&&n.top.$&&n.top.$.leeUI?n.top.leeUI.Success(e,t,i):new r({status:"success",icon:"success",title:e,message:t}).show()},leeUI.Tip=function(e,t,i){return n.top!=n&&n.top.$&&n.top.$.leeUI?n.top.leeUI.Tip(e,t,i):new r({status:"tip",title:e,icon:i,message:t}).show()},leeUI.Tips=function(e,t,i){return n.top!=n&&n.top.$&&n.top.$.leeUI?n.top.leeUI.Tips(e,t,i):new r({status:"tipblack",title:e,icon:i,message:t}).show()},leeUI.Warning=function(e,t,i){return n.top!=n&&n.top.$&&n.top.$.leeUI?n.top.leeUI.Warning(e,t,i):new r({status:"tip",title:e,icon:i=i||"warn",message:t}).show()},leeUI.Error=function(e,t,i){return n.top!=n&&n.top.$&&n.top.$.leeUI?n.top.leeUI.Error(e,t,i):new r({status:"error",title:e,icon:i=i||"error",message:t}).show()}}(jQuery,window),function(d){d.leeDialog=function(){return d.leeUI.run.call(null,"leeUIDialog",arguments,{isStatic:!0})},d.leeUIDefaults.Dialog={cls:null,contentCls:null,id:null,buttons:null,width:280,height:null,content:"",target:null,targetBody:!1,url:null,urlParms:null,coverMode:!0,load:!1,type:"none",left:null,top:null,modal:!0,data:null,name:null,opener:null,isDrag:!0,isResize:!0,overflow:null,allowClose:!0,timeParmName:null,closeWhenEnter:null,isHidden:!1,show:!0,title:"提示",showMax:!0,showToggle:!1,showMin:!1,slide:!0,fixedType:null,showType:null,layoutMode:1,onLoaded:null,onExtend:null,onExtended:null,onCollapse:null,onCollapseed:null,onContentHeightChange:null,onClose:null,onClosed:null,onStopResize:null,minIsHide:!1},d.leeUIDefaults.DialogString={titleMessage:"提示",ok:"确定",yes:"是",no:"否",cancel:"取消",loadingMessage:"正在加载中....",waittingMessage:"正在等待中,请稍候..."},d.leeUI.controls.Dialog=function(e){d.leeUI.controls.Dialog.base.constructor.call(this,null,e)},d.leeUI.controls.Dialog.leeExtend(d.leeUI.core.Win,{__getType:function(){return"Dialog"},__idPrev:function(){return"Dialog"},_extendMethods:function(){return{}},_render:function(){var n=this,l=this.options,e="";l.modal&&l.coverMode&&(n.maskid=leeUI.win.getMaskID()),n.set(l,!0);var t=d('<div class="lee-dialog"><table class="lee-dialog-table" cellpadding="0" cellspacing="0" border="0"><tbody><tr> <td class="lee-dialog-tc"><div class="lee-dialog-tc-inner"><div class="lee-dialog-icon"></div><div class="lee-dialog-title"></div><div class="lee-dialog-winbtns"><div class="lee-icon lee-dialog-winbtn lee-dialog-close"></div></div></div></td></tr><tr><td class="lee-dialog-cc"><div class="lee-dialog-body"><div class="lee-dialog-image lee-icon"></div> <div class="lee-dialog-content"></div><div class="lee-dialog-buttons"><div class="lee-dialog-buttons-inner"></div></td></tr><tr><td class="lee-dialog-bc"></td></tr></tbody></table></div>');if(d("body").append(t),n.dialog=t,n.element=t[0],n.dialog.body=d(".lee-dialog-body:first",n.dialog),n.dialog.header=d(".lee-dialog-tc-inner:first",n.dialog),n.dialog.winbtns=d(".lee-dialog-winbtns:first",n.dialog.header),n.dialog.buttons=d(".lee-dialog-buttons:first",n.dialog),n.dialog.content=d(".lee-dialog-content:first",n.dialog),n.set(l,!1),0==l.allowClose&&d(".lee-dialog-close",n.dialog).remove(),(l.target||l.url||"none"==l.type)&&(l.type=null,n.dialog.addClass("lee-dialog-win"),l.target&&l.target.data("display",l.target.css("display"))),l.cls&&n.dialog.addClass(l.cls),l.id&&n.dialog.attr("id",l.id),n.mask(n.maskid),l.isDrag&&n._applyDrag(),l.isResize&&n._applyResize(),l.type?n._setImage():(d(".lee-dialog-image",n.dialog).remove(),n.dialog.content.addClass("lee-dialog-content-noimage"),l.overflow&&n.dialog.content.css("overflow",l.overflow)),l.contentCls&&n.dialog.content.addClass(l.contentCls),l.show||(n.unmask(n.maskid),n.dialog.hide()),l.target)n.dialog.content.prepend(l.target),d(l.target).show();else if(l.url){var i=d.isFunction(l.url)?l.url.call(n):l.url,o=d.isFunction(l.urlParms)?l.urlParms.call(n):l.urlParms;if(l.timeParmName&&((o=o||{})[l.timeParmName]=(new Date).getTime()),o)for(var a in o)i+=-1==i.indexOf("?")?"?":"&",i+=a+"="+o[a];if(l.load)n.dialog.body.load(i,function(){n._saveStatus(),n.trigger("loaded")});else{n.jiframe=d("<iframe frameborder='0'></iframe>");var r=l.name?l.name:"ligerwindow"+(new Date).getTime();n.jiframe.attr("name",r),n.jiframe.attr("id",r),n.dialog.content.prepend(n.jiframe),n.dialog.content.addClass("lee-dialog-content-nopadding lee-dialog-content-frame"),setTimeout(function(){0==n.dialog.body.find(".lee-dialog-loading:first").length&&n.dialog.body.append("<div class='lee-dialog-loading' style='display:block;'></div>");var e=d(".lee-dialog-loading:first",n.dialog.body);(n.jiframe[0].dialog=n).jiframe.attr("src",i).bind("load.dialog",function(){e.hide(),n.trigger("loaded")}),n.frame=window.frames[n.jiframe.attr("name")]},0),e="jquery_ligerui_"+(new Date).getTime(),n.tmpInput=d("<input></input>"),n.tmpInput.attr("id",e),n.dialog.content.prepend(n.tmpInput)}}function s(){var e=0,t=0,i=l.width||n.dialog.width();1==l.slide&&(l.slide="fast"),null!=l.left?e=l.left:l.left=e=.5*(d(window).width()-i),null!=l.top?t=l.top:l.top=t=.5*(d(window).height()-n.dialog.height())+d(window).scrollTop()-10,e<0&&(l.left=e=0),t<0&&(l.top=t=0),n.dialog.css({left:e,top:t})}l.opener&&(n.dialog.opener=l.opener),l.buttons?d(l.buttons).each(function(e,t){var i=d('<a  href = "javascript:void(0);" class="lee-btn" id="'+t.id+'" style="width: auto;"><span>'+t.text+"</span></a>");d(".lee-dialog-buttons-inner",n.dialog.buttons).append(i),t.width&&i.width(t.width),t.onclick&&i.click(function(){t.onclick(t,n,e)}),t.cls?i.addClass(t.cls):i.addClass("lee-btn-primary")}):n.dialog.buttons.remove(),d(".lee-dialog-buttons-inner",n.dialog.buttons).append("<div class='lee-clear'></div>"),d(".lee-dialog-title",n.dialog).bind("selectstart",function(){return!1}),n.dialog.click(function(){d.leeUI.win.setFront(n)}),d(".lee-dialog-tc .lee-dialog-close",n.dialog).click(function(){l.isHidden?n.hide():n.close()}),l.fixedType||("auto"==l.width?setTimeout(function(){s()},100):s()),n.show(),d("body").bind("keydown.dialog",function(e){var t=e.which;13==t?n.enter():27==t&&n.esc()}),n._updateBtnsWidth(),n._saveStatus(),n._onReisze(),""!=e&&(d("#"+e).focus(),d("#"+e).remove())},_borderX:6,_borderY:38,doMax:function(e){var t=this,i=this.options;d("body").addClass("lee-body-max-dialog");var n=d(window).width(),l=d(window).height(),o=2;d.leeUI.win.taskbar&&(l-=d.leeUI.win.taskbar.outerHeight(),d.leeUI.win.top&&(o+=d.leeUI.win.taskbar.outerHeight())),e?(t.dialog.body.animate({width:n-t._borderX},i.slide),t.dialog.animate({left:2,top:o},i.slide),t.dialog.content.animate({height:l-t._borderY-t.dialog.buttons.outerHeight()},i.slide,function(){t._onReisze()})):(t.set({width:n,height:l-2,left:2,top:o}),t._onReisze()),t.maximum=!0},max:function(){var e=this,t=this.options;e.winmax&&(e.winmax.addClass("lee-dialog-recover"),e.doMax(t.slide),e.wintoggle&&(e.wintoggle.hasClass("lee-dialog-extend")?e.wintoggle.addClass("lee-dialog-toggle-disabled lee-dialog-extend-disabled"):e.wintoggle.addClass("lee-dialog-toggle-disabled lee-dialog-collapse-disabled")),e.resizable&&e.resizable.set({disabled:!0}),e.draggable&&e.draggable.set({disabled:!0}),d(window).bind("resize.dialogmax",function(){e.doMax(!1)}))},recover:function(){var e=this,t=this.options;d("body").removeClass("lee-body-max-dialog"),e.winmax&&(e.winmax.removeClass("lee-dialog-recover"),t.slide?(e.dialog.body.animate({width:e._width-e._borderX},t.slide),e.dialog.animate({left:e._left,top:e._top},t.slide),e.dialog.content.animate({height:e._height-e._borderY-e.dialog.buttons.outerHeight()},t.slide,function(){e._onReisze()})):(e.set({width:e._width,height:e._height,left:e._left,top:e._top}),e._onReisze()),e.wintoggle&&e.wintoggle.removeClass("lee-dialog-toggle-disabled lee-dialog-extend-disabled lee-dialog-collapse-disabled"),d(window).unbind("resize.dialogmax")),this.resizable&&this.resizable.set({disabled:!1}),e.draggable&&e.draggable.set({disabled:!1}),e.maximum=!1},min:function(){var e=this,t=this.options;if(t.minIsHide)e.dialog.hide();else{var i=d.leeUI.win.getTask(this);t.slide?(e.dialog.body.animate({width:1},t.slide),i.y=i.offset().top+i.height(),i.x=i.offset().left+i.width()/2,e.dialog.animate({left:i.x,top:i.y},t.slide,function(){e.dialog.hide()})):e.dialog.hide()}e.unmask(e.maskid),e.minimize=!0,e.actived=!1},active:function(){var e=this,t=this.options;if(e.minimize){var i=e._width,n=e._height,l=e._left,o=e._top;e.maximum&&(i=d(window).width(),n=d(window).height(),l=o=0,d.leeUI.win.taskbar&&(n-=d.leeUI.win.taskbar.outerHeight(),d.leeUI.win.top&&(o+=d.leeUI.win.taskbar.outerHeight()))),t.slide?(e.dialog.body.animate({width:i-e._borderX},t.slide),e.dialog.animate({left:l,top:o},t.slide)):e.set({width:i,height:n,left:l,top:o})}e.actived=!0,e.minimize=!1,d.leeUI.win.setFront(e),e.show()},toggle:function(){this.options;this.wintoggle&&(this.wintoggle.hasClass("lee-dialog-extend")?this.extend():this.collapse())},collapse:function(e){var t=this.options;this.wintoggle&&(t.slide&&0!=e?this.dialog.content.animate({height:1},t.slide):this.dialog.content.height(1),this.resizable&&this.resizable.set({disabled:!0}),this.wintoggle.addClass("lee-dialog-extend"))},extend:function(){var e=this,t=this.options;if(e.wintoggle){var i=e._height-e._borderY-e.dialog.buttons.outerHeight();t.slide?e.dialog.content.animate({height:i},t.slide):e.dialog.content.height(i),this.resizable&&this.resizable.set({disabled:!1}),e.wintoggle.removeClass("lee-dialog-extend")}},_updateBtnsWidth:function(){var e=d(">div",this.dialog.winbtns).length;this.dialog.winbtns.width(22*e)},_setLeft:function(e){this.dialog&&null!=e&&this.dialog.css({left:e})},_setTop:function(e){this.dialog&&null!=e&&this.dialog.css({top:e})},_setWidth:function(e){this.dialog&&e>=this._borderX&&this.dialog.body.width(e-this._borderX)},_setHeight:function(e){var t=this,i=this.options;if(this.dialog)if("auto"==e)t.dialog.content.height("auto");else if(e>=this._borderY){var n=e-this._borderY-t.dialog.buttons.outerHeight();if(0==t.trigger("ContentHeightChange",[n]))return;i.load?t.dialog.body.height(n):t.dialog.content.height(n),t.trigger("ContentHeightChanged",[n])}},_setShowMax:function(e){var t=this;this.options;e?t.winmax||(t.winmax=d('<div class="lee-dialog-winbtn lee-icon lee-dialog-max"></div>').appendTo(t.dialog.winbtns).hover(function(){d(this).hasClass("lee-dialog-recover")?d(this).addClass("lee-dialog-recover-over"):d(this).addClass("lee-dialog-max-over")},function(){d(this).removeClass("lee-dialog-max-over lee-dialog-recover-over")}).click(function(){d(this).hasClass("lee-dialog-recover")?t.recover():t.max()})):t.winmax&&(t.winmax.remove(),t.winmax=null),t._updateBtnsWidth()},_setShowMin:function(e){var t=this,i=this.options;e?t.winmin||(t.winmin=d('<div class="lee-icon lee-dialog-winbtn lee-dialog-min"></div>').appendTo(t.dialog.winbtns).hover(function(){d(this).addClass("lee-dialog-min-over")},function(){d(this).removeClass("lee-dialog-min-over")}).click(function(){t.min()}),i.minIsHide||d.leeUI.win.addTask(t)):t.winmin&&(t.winmin.remove(),t.winmin=null),t._updateBtnsWidth()},_setShowToggle:function(e){var t=this;this.options;e?t.wintoggle||(t.wintoggle=d('<div class="lee-icon lee-dialog-winbtn lee-dialog-collapse"></div>').appendTo(t.dialog.winbtns).hover(function(){d(this).hasClass("lee-dialog-toggle-disabled")||(d(this).hasClass("lee-dialog-extend")?d(this).addClass("lee-dialog-extend-over"):d(this).addClass("lee-dialog-collapse-over"))},function(){d(this).removeClass("lee-dialog-extend-over lee-dialog-collapse-over")}).click(function(){if(!d(this).hasClass("lee-dialog-toggle-disabled"))if(t.wintoggle.hasClass("lee-dialog-extend")){if(0==t.trigger("extend"))return;t.wintoggle.removeClass("lee-dialog-extend"),t.extend(),t.trigger("extended")}else{if(0==t.trigger("collapse"))return;t.wintoggle.addClass("lee-dialog-extend"),t.collapse(),t.trigger("collapseed")}})):t.wintoggle&&(t.wintoggle.remove(),t.wintoggle=null)},enter:function(){var e,t=this.options;null!=t.closeWhenEnter?e=t.closeWhenEnter:"warn"!=t.type&&"error"!=t.type&&"success"!=t.type&&"question"!=t.type||(e=!0),e&&this.close()},esc:function(){},_removeDialog:function(){var i=this,n=this.options;function e(){var e=d("iframe",i.dialog);if(e.length){var t=e[0];if(t.src="about:blank",t.contentWindow&&t.contentWindow.document)try{t.contentWindow.document.write("")}catch(e){}d.browser.msie&&CollectGarbage(),e.remove()}n.targetBody&&n.target.appendTo("body").css("display",n.target.data("display")),i.dialog.remove()}n.showType&&n.fixedType?i.dialog.animate({bottom:-1*n.height},function(){e()}):e()},close:function(){this.options;0!=this.trigger("Close")&&(this.doClose(),this.trigger("Closed"))},doClose:function(){d.leeUI.win.removeTask(this),d.leeUI.remove(this),this.unmask(this.maskid),this._removeDialog(),d("body").unbind("keydown.dialog"),d("body").removeClass("lee-body-max-dialog")},_getVisible:function(){return this.dialog.is(":visible")},_setUrl:function(e){var t=this,i=this.options;i.url=e,i.load?t.dialog.body.html("").load(i.url,function(){t.trigger("loaded")}):t.jiframe&&t.jiframe.attr("src",i.url)},_setContent:function(e){this.dialog.content.html(e)},_setTitle:function(e){this.options;e&&d(".lee-dialog-title",this.dialog).html(e)},_hideDialog:function(){var e=this,t=this.options;t.showType&&t.fixedType?e.dialog.animate({bottom:-1*t.height},function(){e.dialog.hide()}):e.dialog.hide()},hidden:function(){d.leeUI.win.removeTask(this),this.dialog.hide(),this.unmask(this.maskid)},show:function(){var e=this,t=this.options;e.mask(e.maskid),t.fixedType?t.showType?(e.dialog.css({bottom:-1*t.height}).addClass("lee-dialog-fixed"),e.dialog.show().animate({bottom:0})):e.dialog.show().css({bottom:0}).addClass("lee-dialog-fixed"):e.dialog.show(),t.coverMode?e.dialog.css("z-index",e.maskid+9005):d.leeUI.win.setFront.leeDefer(d.leeUI.win,100,[e])},setUrl:function(e){this._setUrl(e)},_saveStatus:function(){var e=this;e._width=e.dialog.body.width(),e._height=e.dialog.body.height();var t=0,i=0;isNaN(parseInt(e.dialog.css("top")))||(t=parseInt(e.dialog.css("top"))),isNaN(parseInt(e.dialog.css("left")))||(i=parseInt(e.dialog.css("left"))),e._top=t,e._left=i},_applyDrag:function(){var i=this,n=this.options;d.fn.leeDrag&&(i.draggable=i.dialog.leeDrag({handler:".lee-dialog-title",animate:!1,onStartDrag:function(){d.leeUI.win.setFront(i);var e=d("<div class='lee-dragging-mask' style='display:block'></div>").height(i.dialog.height());i.dialog.append(e),i.dialog.content.addClass("lee-dialog-content-dragging")},onDrag:function(e,t){if((t.pageY||t.screenY)<0)return!1},onStopDrag:function(){if(i.dialog.find("div.lee-dragging-mask:first").remove(),i.dialog.content.removeClass("lee-dialog-content-dragging"),n.target){var e=d.leeUI.find(d.leeUI.controls.DateEditor),t=d.leeUI.find(d.leeUI.controls.ComboBox);d(d.merge(e,t)).each(function(){this.updateSelectBoxPosition&&this.updateSelectBoxPosition()})}i._saveStatus()}}))},_onReisze:function(){var e=this.options;if(e.target||e.url){var t=d(e.target).leeUI();if(t||(t=d(e.target).find(":first").leeUI()),!t)return;var i=this.dialog.content.height(),n=this.dialog.content.width();t.trigger("resize",[{width:n,height:i}])}},_applyResize:function(){var l=this;this.options;d.fn.leeResizable&&(l.resizable=l.dialog.leeResizable({onStopResize:function(e,t){var i=0,n=0;return isNaN(parseInt(l.dialog.css("top")))||(i=parseInt(l.dialog.css("top"))),isNaN(parseInt(l.dialog.css("left")))||(n=parseInt(l.dialog.css("left"))),e.diffLeft&&l.set({left:n+e.diffLeft}),e.diffTop&&l.set({top:i+e.diffTop}),e.newWidth&&(l.set({width:e.newWidth}),l.dialog.body.css({width:e.newWidth-l._borderX})),e.newHeight&&l.set({height:e.newHeight}),l._onReisze(),l._saveStatus(),l.trigger("stopResize"),!1},animate:!1}))},_setImage:function(){var e=this,t=this.options;if(t.type){var i={paddingLeft:60,paddingRight:15,paddingBottom:30};"success"==t.type||"donne"==t.type||"ok"==t.type?(d(".lee-dialog-image",e.dialog).addClass("lee-dialog-image-donne").show(),e.dialog.content.css(i)):"error"==t.type?(d(".lee-dialog-image",e.dialog).addClass("lee-dialog-image-error").show(),e.dialog.content.css(i)):"warn"==t.type?(d(".lee-dialog-image",e.dialog).addClass("lee-dialog-image-warn").show(),e.dialog.content.css(i)):"question"==t.type&&(d(".lee-dialog-image",e.dialog).addClass("lee-dialog-image-question").show(),e.dialog.content.css(i))}}}),d.leeUI.controls.Dialog.prototype.hide=d.leeUI.controls.Dialog.prototype.hidden,d.leeDialog.open=function(e){return d.leeDialog(e)},d.leeDialog.close=function(){var e=d.leeUI.find(d.leeUI.controls.Dialog.prototype.__getType());for(var t in e){var i=e[t];i.destroy.leeDefer(i,5)}d.leeUI.win.unmask()},d.leeDialog.show=function(e){var t=d.leeUI$.leeUI.find(d.leeUI.controls.Dialog.prototype.__getType());if(t.length)for(var i in t)return void t[i].show();return d.leeDialog(e)},d.leeDialog.hide=function(){var e=d.leeUI.find(d.leeUI.controls.Dialog.prototype.__getType());for(var t in e){e[t].hide()}},d.leeDialog.tip=function(e){return e=d.extend({showType:"slide",width:240,modal:!1,height:100},e||{}),d.extend(e,{fixedType:"se",type:"none",isDrag:!1,isResize:!1,showMax:!1,showToggle:!1,showMin:!1}),d.leeDialog.open(e)},d.leeDialog.alert=function(e,t,i,n,l){e=e||"","function"==typeof t?(n=t,i=null):"function"==typeof i&&(n=i);return p={content:e,buttons:[{text:d.leeUIDefaults.DialogString.ok,onclick:function(e,t,i){t.close(),n&&n(e,t,i)}}]},"string"==typeof t&&""!=t&&(p.title=t),"string"==typeof i&&""!=i&&(p.type=i),d.extend(p,{showMax:!1,showToggle:!1,showMin:!1},l||{}),d.leeDialog(p)},d.leeDialog.confirm=function(e,t,i){"function"==typeof t&&(i=t,type=null);var n=function(e,t){t.close(),i&&i("ok"==e.type)};return p={type:"question",content:e,buttons:[{text:d.leeUIDefaults.DialogString.yes,onclick:n,type:"ok",cls:"lee-btn-primary lee-dialog-btn-ok"},{text:d.leeUIDefaults.DialogString.no,onclick:n,type:"no",cls:"lee-dialog-btn-no"}]},"string"==typeof t&&""!=t&&(p.title=t),d.extend(p,{showMax:!1,showToggle:!1,showMin:!1}),d.leeDialog(p)},d.leeDialog.warning=function(e,t,i,n){"function"==typeof t&&(i=t,type=null);var l=function(e,t){t.close(),i&&i(e.type)};return p={type:"question",content:e,buttons:[{text:d.leeUIDefaults.DialogString.yes,onclick:l,type:"yes"},{text:d.leeUIDefaults.DialogString.no,onclick:l,type:"no"},{text:d.leeUIDefaults.DialogString.cancel,onclick:l,type:"cancel"}]},"string"==typeof t&&""!=t&&(p.title=t),d.extend(p,{showMax:!1,showToggle:!1,showMin:!1},n||{}),d.leeDialog(p)},d.leeDialog.loading=function(e,t){if(window.top!=window&&window.top.$&&window.top.$.leeDialog)window.top.$.leeDialog.loading(e,t);else{var i=[];if(e=e||d.leeUIDefaults.Dialog.loadingMessage,0<d("#lee-global-loading").length)t&&d("#lee-global-mask").show(),d("#lee-global-loading .message").html(e),d("#lee-global-loading").show();else{i.push("<div id='lee-global-mask' class='lee-modal-mask'></div>"),i.push('<div  id="lee-global-loading" class="lee-loading"><div class="lee-grid-loading-inner"><div class="loader"></div><div class="message">'+e+"</div></div></div>");var n=d(i.join(""));d("body").append(n),n.show()}}},d.leeDialog.hideLoading=function(){window.top!=window&&window.top.$&&window.top.$.leeDialog?window.top.$.leeDialog.hideLoading():(d("#lee-global-mask").hide(),d("#lee-global-loading").hide())},d.leeDialog.waitting=function(e){return e=e||d.leeUIDefaults.Dialog.waittingMessage,d.leeDialog.open({cls:"lee-dialog-waittingdialog",type:"none",content:'<div style="padding:4px">'+e+"</div>",allowClose:!1})},d.leeDialog.closeWaitting=function(){var e=d.leeUI.find(d.leeUI.controls.Dialog);for(var t in e){var i=e[t];i.dialog.hasClass("lee-dialog-waittingdialog")&&i.close()}},d.leeDialog.success=function(e,t,i,n){return window.top!=window&&window.top.$&&window.top.$.leeDialog?window.top.$.leeDialog.alert(e,t,"success",i,n):d.leeDialog.alert(e,t,"success",i,n)},d.leeDialog.error=function(e,t,i,n){return window.top!=window&&window.top.$&&window.top.$.leeDialog?window.top.$.leeDialog.alert(e,t,"error",i,n):d.leeDialog.alert(e,t,"error",i,n)},d.leeDialog.warn=function(e,t,i,n){return window.top!=window&&window.top.$&&window.top.$.leeDialog?window.top.$.leeDialog.alert(e,t,"warn",i,n):d.leeDialog.alert(e,t,"warn",i,n)},d.leeDialog.question=function(e,t,i){return window.top!=window&&window.top.$&&window.top.$.leeDialog?window.top.$.leeDialog.alert(e,t,"question",onBtnClick,i):d.leeDialog.alert(e,t,"question",null,i)},d.leeDialog.prompt=function(e,t,i,n){var l=d('<input type="text" class="lee-dialog-inputtext"/>');"function"==typeof i&&(n=i),"function"==typeof t?n=t:"boolean"==typeof t&&(i=t),"boolean"==typeof i&&i&&(l=d('<textarea class="lee-dialog-textarea"></textarea>')),"string"!=typeof t&&"int"!=typeof t||l.val(t);var o=function(e,t,i){t.close(),n&&n("yes"==e.type,l.val())};return p={title:e,target:l,width:320,buttons:[{text:d.leeUIDefaults.DialogString.ok,onclick:o,type:"yes"},{text:d.leeUIDefaults.DialogString.cancel,onclick:o,type:"cancel"}]},d.leeDialog(p)}}(jQuery),function(f){function d(e){return e?e.replace(/(^\s*)|(\s*$)/g,""):e}f.fn.leeTree=function(e){return f.leeUI.run.call(this,"leeUITree",arguments)},f.fn.leeGetTreeManager=function(){return f.leeUI.run.call(this,"leeUIGetTreeManager",arguments)},f.leeUIDefaults.Tree={url:null,urlParms:null,data:null,width:"auto",checkbox:!1,autoCheckboxEven:!0,enabledCompleteCheckbox:!0,parentIcon:"folder",childIcon:"leaf",textFieldName:"text",attribute:["id","url"],treeLine:!0,nodeWidth:90,statusName:"__status",isLeaf:null,single:!1,needCancel:!0,idFieldName:"id",parentIDFieldName:"pid",topParentIDValue:0,slide:!1,iconFieldName:"icon",nodeDraggable:!1,nodeDraggingRender:null,btnClickToToggleOnly:!0,ajaxType:"post",ajaxContentType:null,render:null,selectable:null,isExpand:null,delay:null,idField:null,parentIDField:null,iconClsFieldName:"iconclass",onBeforeAppend:function(){},onAppend:function(){},onAfterAppend:function(){},onBeforeExpand:function(){},onContextmenu:function(){},onExpand:function(){},onBeforeCollapse:function(){},onCollapse:function(){},onBeforeSelect:function(){},onSelect:function(){},onBeforeCancelSelect:function(){},onCancelselect:function(){},onCheck:function(){},onSuccess:function(){},onError:function(){},onClick:function(){},onDblclick:function(){}},f.leeUI.controls.Tree=function(e,t){f.leeUI.controls.Tree.base.constructor.call(this,e,t)},f.leeUI.controls.Tree.leeExtend(f.leeUI.core.UIComponent,{_init:function(){f.leeUI.controls.Tree.base._init.call(this);var e=this.options;e.single&&(e.autoCheckboxEven=!1)},_render:function(){var e=this,t=this.options;e.set(t,!0),e.tree=f(e.element),e.tree.addClass("lee-tree"),e.toggleNodeCallbacks=[],e.sysAttribute=["isexpand","ischecked","href","style","delay"],e.loading=f("<div class='lee-tree-loading'></div>"),e.tree.after(e.loading),e.data=[],e.maxOutlineLevel=1,e.treedataindex=0,e._applyTree(),e._setTreeEven(),e.set(t,!1)},_setDisabled:function(e){},_applyTree:function(){var e=this;this.options;e.data=[];var t=e._getTreeHTMLByData(e.data,1,[],!0);t[t.length-1]=t[0]="",e.tree.html(t.join("")),f(".lee-body",e.tree).hover(function(){f(this).addClass("lee-over")},function(){f(this).removeClass("lee-over")})},append:function(e,t,i,n){var l=this,o=this.options;if(e=l.getNodeDom(e),0==l.trigger("beforeAppend",[e,t]))return!1;if(!t||!t.length)return!1;if(o.idFieldName&&o.parentIDFieldName&&(t=l.arrayToTree(t,o.idFieldName,o.parentIDFieldName)),l._addTreeDataIndexToData(t),l._setTreeDataStatus(t,"add"),null!=i&&(i=l.getNodeDom(i)),l.trigger("append",[e,t]),l._appendData(e,t),null==e)return(a=l._getTreeHTMLByData(t,1,[],!0))[a.length-1]=a[0]="",null!=i?(f(i)[n?"after":"before"](a.join("")),l._updateStyle(e?f("ul:first",e):l.tree)):(0<f("> li:last",l.tree).length&&l._setTreeItem(f("> li:last",l.tree)[0],{isLast:!1}),l.tree.append(a.join(""))),f(".lee-body",l.tree).hover(function(){f(this).addClass("lee-over")},function(){f(this).removeClass("lee-over")}),l._upadteTreeWidth(),void l.trigger("afterAppend",[e,t]);var a,r=f(e),s=parseInt(r.attr("outlinelevel"));0<f("> ul",r).length||(r.append("<ul class='lee-children'></ul>"),l.upgrade(e));for(var d=[],c=1;c<=s-1;c++){var u=f(l.getParentTreeItem(e,c));d.push(u.hasClass("lee-last"))}d.push(r.hasClass("lee-last")),(a=l._getTreeHTMLByData(t,s+1,d,!0))[a.length-1]=a[0]="",null!=i?(f(i)[n?"after":"before"](a.join("")),l._updateStyle(e?f("ul:first",e):l.tree)):(0<f("> .lee-children > li:last",r).length&&l._setTreeItem(f("> .lee-children > li:last",r)[0],{isLast:!1}),f(">.lee-children",e).append(a.join(""))),l._upadteTreeWidth(),f(">.lee-children .lee-body",e).hover(function(){f(this).addClass("lee-over")},function(){f(this).removeClass("lee-over")}),l.trigger("afterAppend",[e,t])},loadData:function(t,e,i,n){var l=this,o=this.options;n=f.extend({showLoading:function(){l.loading.show()},success:function(){},error:function(){},hideLoading:function(){l.loading.hide()}},n||{});var a=o.ajaxType;i=f.extend(f.isFunction(o.parms)?o.parms():o.parms,i),"application/json"==o.ajaxContentType&&"string"!=typeof i&&(i=liger.toJSON(i));var r=f.isFunction(o.urlParms)?o.urlParms.call(l):o.urlParms;if(r)for(name in r)e+=-1==e.indexOf("?")?"?":"&",e+=name+"="+r[name];var s={type:a,url:e,data:i,dataType:"json",beforeSend:function(){n.showLoading()},success:function(e){e&&(o.idField&&o.parentIDField&&(e=l.arrayToTree(e,o.idField,o.parentIDField)),n.hideLoading(),l.append(t,e),l.trigger("success",[e]),n.success(e))},error:function(e,t,i){try{n.hideLoading(),l.trigger("error",[e,t,i]),n.error(e,t,i)}catch(e){}}};o.ajaxContentType&&(s.contentType=o.ajaxContentType),f.ajax(s)},_setParms:function(){var e=this.options;f.isFunction(e.parms)&&(e.parms=e.parms())},_setTreeLine:function(e){e?this.tree.removeClass("lee-tree-noline"):this.tree.addClass("lee-tree-noline")},_setUrl:function(e){this.options;e&&(this.clear(),this.loadData(null,e))},_setData:function(e){e&&(this.clear(),this.append(null,e))},_setTreeEven:function(){var s=this,d=this.options;s.tree.click(function(e){var t=e.target||e.srcElement,i=null;if(i="a"==t.tagName.toLowerCase()||"span"==t.tagName.toLowerCase()||f(t).hasClass("lee-box")?f(t).parent().parent():f(t).hasClass("lee-body")?f(t).parent():f(t)){var n=parseInt(i.attr("treedataindex")),l=s._getDataNodeByTreeDataIndex(s.data,n),o=f("div.lee-body:first",i).find("div.lee-expandable-open:first,div.lee-expandable-close:first"),a=f(t).hasClass("lee-expandable-open")||f(t).hasClass("lee-expandable-close");if(!f(t).hasClass("lee-checkbox")&&!a&&!i.hasClass("lee-unselectable"))if(f(">div:first",i).hasClass("lee-selected")&&d.needCancel){if(0==s.trigger("beforeCancelSelect",[{data:l,target:i[0]}]))return!1;f(">div:first",i).removeClass("lee-selected"),s.trigger("cancelSelect",[{data:l,target:i[0]}])}else{if(0==s.trigger("beforeSelect",[{data:l,target:i[0]}]))return!1;f(".lee-body",s.tree).removeClass("lee-selected"),f(">div:first",i).addClass("lee-selected"),s.trigger("select",[{data:l,target:i[0]}])}if(f(t).hasClass("lee-checkbox"))d.autoCheckboxEven?(f(t).hasClass("lee-checkbox-unchecked")?(f(t).removeClass("lee-checkbox-unchecked").addClass("lee-checkbox-checked"),f(".lee-children .lee-checkbox",i).removeClass("lee-checkbox-incomplete lee-checkbox-unchecked").addClass("lee-checkbox-checked"),s.trigger("check",[{data:l,target:i[0]},!0])):f(t).hasClass("lee-checkbox-checked")?(f(t).removeClass("lee-checkbox-checked").addClass("lee-checkbox-unchecked"),f(".lee-children .lee-checkbox",i).removeClass("lee-checkbox-incomplete lee-checkbox-checked").addClass("lee-checkbox-unchecked"),s.trigger("check",[{data:l,target:i[0]},!1])):f(t).hasClass("lee-checkbox-incomplete")&&(f(t).removeClass("lee-checkbox-incomplete").addClass("lee-checkbox-checked"),f(".lee-children .lee-checkbox",i).removeClass("lee-checkbox-incomplete lee-checkbox-unchecked").addClass("lee-checkbox-checked"),s.trigger("check",[{data:l,target:i[0]},!0])),s._setParentCheckboxStatus(i)):f(t).hasClass("lee-checkbox-unchecked")?(f(t).removeClass("lee-checkbox-unchecked").addClass("lee-checkbox-checked"),d.single&&f(".lee-checkbox",s.tree).not(t).removeClass("lee-checkbox-checked").addClass("lee-checkbox-unchecked"),s.trigger("check",[{data:l,target:i[0]},!0])):f(t).hasClass("lee-checkbox-checked")&&(f(t).removeClass("lee-checkbox-checked").addClass("lee-checkbox-unchecked"),s.trigger("check",[{data:l,target:i[0]},!1]));else if(!o.hasClass("lee-expandable-open")||d.btnClickToToggleOnly&&!a){if(o.hasClass("lee-expandable-close")&&(!d.btnClickToToggleOnly||a)){if(0==s.trigger("beforeExpand",[{data:l,target:i[0]}]))return!1;f(s.toggleNodeCallbacks).each(function(){this.data==l&&this.callback(i[0],l)}),o.removeClass("lee-expandable-close").addClass("lee-expandable-open");var r=function(){s.trigger("expand",[{data:l,target:i[0]}])};d.slide?f("> .lee-children",i).slideToggle("fast",r):(f("> .lee-children",i).show(),r()),f("> div ."+s._getParentNodeClassName(),i).removeClass(s._getParentNodeClassName()).addClass(s._getParentNodeClassName(!0))}}else{if(0==s.trigger("beforeCollapse",[{data:l,target:i[0]}]))return!1;o.removeClass("lee-expandable-open").addClass("lee-expandable-close"),d.slide?f("> .lee-children",i).slideToggle("fast"):f("> .lee-children",i).hide(),f("> div ."+s._getParentNodeClassName(!0),i).removeClass(s._getParentNodeClassName(!0)).addClass(s._getParentNodeClassName()),s.trigger("collapse",[{data:l,target:i[0]}])}s.trigger("click",[{data:l,target:i[0]}])}}),s.tree.dblclick(function(e){var t=e.target||e.srcElement,i=null;if(i="a"==t.tagName.toLowerCase()||"span"==t.tagName.toLowerCase()||f(t).hasClass("lee-box")?f(t).parent().parent():f(t).hasClass("lee-body")?f(t).parent():f(t)){var n=parseInt(i.attr("treedataindex")),l=s._getDataNodeByTreeDataIndex(s.data,n);s.trigger("dblclick",[{data:l,target:i[0]}])}})},_getTreeHTMLByData:function(e,n,t,i){var l=this,o=this.options;l.maxOutlineLevel<n&&(l.maxOutlineLevel=n),t=t||[],n=n||1;var a=[];i?a.push("<ul class='lee-children'>"):a.push('<ul class="lee-children" style="display:none">');for(var r=0;r<e.length;r++){var s=e[r],d=0==r,c=r==e.length-1,u=l._getDelay(s,n),h=!u&&l._isExpand(s,n);a.push("<li "),null!=s.treedataindex&&a.push('treedataindex="'+s.treedataindex+'" '),s[o.idFieldName]&&a.push('data-id="'+s[o.idFieldName]+'" '),h&&a.push("isexpand="+s.isexpand+" "),a.push("outlinelevel="+n+" "),a.push('class="'),d&&a.push("lee-first "),c&&a.push("lee-last "),d&&c&&a.push("lee-onlychild "),a.push('"'),a.push(">"),a.push('<div class="lee-body'),a.push('">');for(var p=0;p<=n-2;p++)a.push('<div class="lee-box lee-line"></div>');if(l.hasChildren(s)?(h?a.push('<div class="lee-box lee-expandable-open"></div>'):a.push('<div class="lee-box lee-expandable-close"></div>'),o.checkbox&&(s.ischecked?a.push('<div class="lee-box lee-checkbox lee-checkbox-checked"></div>'):a.push('<div class="lee-box lee-checkbox lee-checkbox-unchecked"></div>')),o.parentIcon&&(a.push('<div class="lee-box lee-tree-icon '),a.push(l._getParentNodeClassName(!!h)+" "),o.iconFieldName&&s[o.iconFieldName]?a.push("lee-tree-icon-none"):o.iconClsFieldName&&s[o.iconClsFieldName]&&a.push("lee-tree-icon-none"),a.push('">'),o.iconFieldName&&s[o.iconFieldName]?a.push('<img src="'+s[o.iconFieldName]+'" />'):o.iconClsFieldName&&s[o.iconClsFieldName]&&a.push('<i class="icon-img  '+s[o.iconClsFieldName]+'"></i>'),a.push("</div>"))):(c?a.push('<div class="lee-box lee-node-last"></div>'):a.push('<div class="lee-box lee-node"></div>'),o.checkbox&&(s.ischecked?a.push('<div class="lee-box lee-checkbox lee-checkbox-checked"></div>'):a.push('<div class="lee-box lee-checkbox lee-checkbox-unchecked"></div>')),o.childIcon&&(a.push('<div class="lee-box lee-tree-icon '),a.push(l._getChildNodeClassName()+" "),(o.iconFieldName&&s[o.iconFieldName]||o.iconClsFieldName&&s[o.iconClsFieldName])&&a.push("lee-tree-icon-none"),a.push('">'),o.iconFieldName&&s[o.iconFieldName]?a.push('<img src="'+s[o.iconFieldName]+'" />'):o.iconClsFieldName&&s[o.iconClsFieldName]&&a.push('<i class="icon-img  '+s[o.iconClsFieldName]+'"></i>'),a.push("</div>"))),o.render?a.push("<span>"+o.render(s,s[o.textFieldName])+"</span>"):a.push("<span>"+s[o.textFieldName]+"</span>"),a.push("</div>"),l.hasChildren(s)){var g=[];for(p=0;p<t.length;p++)g.push(t[p]);g.push(c),u?1==u?l.toggleNodeCallbacks.push({data:s,callback:function(e,t){var i=l._getTreeHTMLByData(t.children,n+1,g,h).join("");f(e).append(i),f(">.lee-children .lee-body",e).hover(function(){f(this).addClass("lee-over")},function(){f(this).removeClass("lee-over")}),l._removeToggleNodeCallback(t)}}):u.url&&function(e,i,n){l.toggleNodeCallbacks.push({data:e,callback:function(e,t){l.loadData(e,i,n,{showLoading:function(){f("div.lee-expandable-close:first",e).addClass("lee-box-loading")},hideLoading:function(){f("div.lee-box-loading:first",e).removeClass("lee-box-loading")}}),l._removeToggleNodeCallback(t)}})}(s,u.url,u.parms):a.push(l._getTreeHTMLByData(s.children,n+1,g,h).join(""))}a.push("</li>")}return a.push("</ul>"),a},hasChildren:function(e){return this.options.isLeaf?!this.options.isLeaf(e):!!e.children},getParent:function(e,t){e=this.getNodeDom(e);var i=this.getParentTreeItem(e,t);if(!i)return null;var n=f(i).attr("treedataindex");return this._getDataNodeByTreeDataIndex(this.data,n)},getParentTreeItem:function(e,t){e=this.getNodeDom(e);var i=f(e);if(i.parent().hasClass("lee-tree"))return null;if(null==t)return 0==i.parent().parent("li").length?null:i.parent().parent("li")[0];for(var n=parseInt(i.attr("outlinelevel")),l=i,o=n-1;t<=o;o--)l=l.parent().parent("li");return l[0]},getChecked:function(){var t=this;this.options;if(!this.options.checkbox)return null;var i=[];return f(".lee-checkbox-checked",t.tree).parent().parent("li").each(function(){var e=parseInt(f(this).attr("treedataindex"));i.push({target:this,data:t._getDataNodeByTreeDataIndex(t.data,e)})}),i},getCheckedData:function(){var t=this;this.options;if(!this.options.checkbox)return null;var i=[];return f(".lee-checkbox-checked",t.tree).parent().parent("li").each(function(){var e=parseInt(f(this).attr("treedataindex"));i.push(t._getDataNodeByTreeDataIndex(t.data,e))}),i},refreshTree:function(){var i=this;this.options;f.each(this.getChecked(),function(e,t){i._setParentCheckboxStatus(f(t.target))})},getSelected:function(){this.options;var e={};if(e.target=f(".lee-selected",this.tree).parent("li")[0],e.target){var t=parseInt(f(e.target).attr("treedataindex"));return e.data=this._getDataNodeByTreeDataIndex(this.data,t),e}return null},upgrade:function(e){var t=this;this.options;f(".lee-note",e).each(function(){f(this).removeClass("lee-note").addClass("lee-expandable-open")}),f(".lee-note-last",e).each(function(){f(this).removeClass("lee-note-last").addClass("lee-expandable-open")}),f("."+t._getChildNodeClassName(),e).each(function(){f(this).removeClass(t._getChildNodeClassName()).addClass(t._getParentNodeClassName(!0))})},demotion:function(e){var t=this;this.options;if(e||"li"==e[0].tagName.toLowerCase()){var i=f(e).hasClass("lee-last");f(".lee-expandable-open",e).each(function(){f(this).removeClass("lee-expandable-open").addClass(i?"lee-note-last":"lee-note")}),f(".lee-expandable-close",e).each(function(){f(this).removeClass("lee-expandable-close").addClass(i?"lee-note-last":"lee-note")}),f("."+t._getParentNodeClassName(!0),e).each(function(){f(this).removeClass(t._getParentNodeClassName(!0)).addClass(t._getChildNodeClassName())})}},collapseAll:function(){this.options;f(".lee-expandable-open",this.tree).click()},expandAll:function(){this.options;f(".lee-expandable-close",this.tree).click()},hide:function(e){this.options;(e=this.getNodeDom(e))&&f(e).hide()},show:function(e){this.options;(e=this.getNodeDom(e))&&f(e).show()},remove:function(e){var t=this,i=this.options;e=t.getNodeDom(e);var n=parseInt(f(e).attr("treedataindex")),l=t._getDataNodeByTreeDataIndex(t.data,n);l&&t._setTreeDataStatus([l],"delete");var o=t.getParentTreeItem(e);i.checkbox&&t._setParentCheckboxStatus(f(e)),f(e).remove(),t._updateStyle(o?f("ul:first",o):t.tree)},update:function(e,t){var i=this.options;e=this.getNodeDom(e);var n=parseInt(f(e).attr("treedataindex"));for(var l in nodedata=this._getDataNodeByTreeDataIndex(this.data,n),t)nodedata[l]=t[l],l==i.textFieldName&&f("> .lee-body > span",e).text(t[l])},_getChildNodeClassName:function(){this.options;return nodeclassname="icon-img icon-document  ",nodeclassname},_getParentNodeClassName:function(e){return"lee-tree-icon-"+this.options.parentIcon},_isExpand:function(e,t){var i=this.options,n=null!=e.isExpand?e.isExpand:null!=e.isexpand?e.isexpand:i.isExpand;return null==n||("function"==typeof n&&(n=i.isExpand({data:e,level:t})),"boolean"==typeof n?n:"string"==typeof n?"true"==n:"number"!=typeof n||t<n)},_setTreeDataStatus:function(e,t){var i=this,n=this.options;f(e).each(function(){this[n.statusName]=t,this.children&&i._setTreeDataStatus(this.children,t)})},_getDataNodeByTreeDataIndex:function(e,t){this.options;for(var i=0;i<e.length;i++){if(e[i].treedataindex==t)return e[i];if(e[i].children){var n=this._getDataNodeByTreeDataIndex(e[i].children,t);if(n)return n}}return null},_addTreeDataIndexToData:function(e){var t=this;this.options;f(e).each(function(){null==this.treedataindex&&(this.treedataindex=t.treedataindex++,this.children&&t._addTreeDataIndexToData(this.children))})},_appendData:function(e,t){var i=this,n=(this.options,parseInt(f(e).attr("treedataindex"))),l=i._getDataNodeByTreeDataIndex(i.data,n);null==i.treedataindex&&(i.treedataindex=0),l&&null==l.children&&(l.children=[]),f(t).each(function(e,t){l?l.children[l.children.length]=t:i.data[i.data.length]=t,i._addToNodes(t)})},_addToNodes:function(e){var i=this;this.options;i.nodes=i.nodes||[],i.nodes.push(e),e.children&&f(e.children).each(function(e,t){i._addToNodes(t)})},_setParentCheckboxStatus:function(e){var t=this.options,i=0==f(".lee-checkbox-unchecked",e.parent()).length;0==f(".lee-checkbox-checked",e.parent()).length?e.parent().prev().find("> .lee-checkbox").removeClass("lee-checkbox-checked lee-checkbox-incomplete").addClass("lee-checkbox-unchecked"):i||!t.enabledCompleteCheckbox?e.parent().prev().find(".lee-checkbox").removeClass("lee-checkbox-unchecked lee-checkbox-incomplete").addClass("lee-checkbox-checked"):e.parent().prev().find("> .lee-checkbox").removeClass("lee-checkbox-unchecked lee-checkbox-checked").addClass("lee-checkbox-incomplete"),0<e.parent().parent("li").length&&this._setParentCheckboxStatus(e.parent().parent("li"))},_setTreeItem:function(e,t){this.options;if(t){e=this.getNodeDom(e);var i=f(e),n=parseInt(i.attr("outlinelevel"));null!=t.isLast&&(1==t.isLast?(i.removeClass("lee-last").addClass("lee-last"),f("> div .lee-node",i).removeClass("lee-node").addClass("lee-node-last"),f(".lee-children li",i).find(".lee-box:eq("+(n-1)+")").removeClass("lee-line")):0==t.isLast&&(i.removeClass("lee-last"),f("> div .lee-node-last",i).removeClass("lee-node-last").addClass("lee-node"),f(".lee-children li",i).find(".lee-box:eq("+(n-1)+")").removeClass("lee-line").addClass("lee-line")))}},_updateStyle:function(e){var i=this,t=(this.options,f(" > li",e)),n=t.length;n&&t.each(function(e,t){0!=e||f(this).hasClass("lee-first")||f(this).addClass("lee-first"),e!=n-1||f(this).hasClass("lee-last")||f(this).addClass("lee-last"),0==e&&e==n-1&&f(this).addClass("lee-onlychild"),f("> div .lee-note,> div .lee-note-last",this).removeClass("lee-note lee-note-last").addClass(e==n-1?"lee-note-last":"lee-note"),i._setTreeItem(this,{isLast:e==n-1})})},_upadteTreeWidth:function(){var e=this.options;if("auto"!=e.width){var t=22*this.maxOutlineLevel;e.checkbox&&(t+=22),(e.parentIcon||e.childIcon)&&(t+=22),t+=e.nodeWidth,this.tree.width(t)}else this.tree.width("auto")},_getDelay:function(e,t){var i=this.options,n=null!=e.delay?e.delay:i.delay;return null!=n&&("function"==typeof n&&(n=n({data:e,level:t})),"boolean"==typeof n?n:"string"==typeof n?{url:n}:("number"==typeof n&&(n=[n]),f.isArray(n)?-1!=f.inArray(t,n):!("object"!=typeof n||!n.url)&&n))},_removeToggleNodeCallback:function(e){this.options;for(var t=0;t<=this.toggleNodeCallbacks.length;t++)if(this.toggleNodeCallbacks[t]&&this.toggleNodeCallbacks[t].data==e){this.toggleNodeCallbacks.splice(t,1);break}},getTextByID:function(e){var t=this.options,i=this.getDataByID(e);return i?i[t.textFieldName]:null},getDataByID:function(o){var n=this,a=this.options,l=null;if(n.data&&n.data.length)return function e(t){for(var i=0;i<t.length;i++){var n=t[i];if(n[a.idFieldName]==o)return n;if(n.children&&n.children.length){var l=e(n.children);if(l)return l}}return null}(n.data);return f("li",n.tree).each(function(){if(!l){var e=f(this),t=parseInt(e.attr("treedataindex")),i=n._getDataNodeByTreeDataIndex(n.data,t);i[a.idFieldName].toString()==o.toString()&&(l=i)}}),l},arrayToTree:function(e,t,i){this.options;var n="children";if(!e||!e.length)return[];for(var l=[],o={},a=e.length,r=0;r<a;r++){var s=e[r];o[u(s[t])]=s}for(r=0;r<a;r++){var d=e[r],c=o[u(d[i])];c?(c[n]=c[n]||[],c[n].push(d)):l.push(d)}return l;function u(e){return"string"==typeof e&&(e=e.replace(/[.]/g,"").toLowerCase()),e}},getNodeDom:function(e){this.options;return null==e?e:"string"==typeof e||"number"==typeof e?f("li[treedataindex="+e+"]",this.tree).get(0):"object"==typeof e&&"treedataindex"in e?this.getNodeDom(e.treedataindex):e.target&&e.data?e.target:e},setData:function(e){this.set("data",e)},getData:function(){return this.data},cancelSelect:function(e,t){var i=this.options,n=this.getNodeDom(e),l=f(n),o=parseInt(l.attr("treedataindex")),a=this._getDataNodeByTreeDataIndex(this.data,o),r=f(">div:first",l);i.checkbox?f(".lee-checkbox",r).removeClass("lee-checkbox-checked").addClass("lee-checkbox-unchecked"):r.removeClass("lee-selected"),0!=t&&this.trigger("cancelSelect",[{data:a,target:l[0]}])},selectNode:function(t,n){var l=this,i=this.options,o=null;if("function"==typeof t)o=t;else{if("object"==typeof t){var e=f(t),a=parseInt(e.attr("treedataindex")),r=l._getDataNodeByTreeDataIndex(l.data,a),s=f(">div:first",e);return s.length||(s=f("li[treedataindex="+a+"] >div:first",l.tree)),i.checkbox?f(".lee-checkbox",s).removeClass("lee-checkbox-unchecked").addClass("lee-checkbox-checked"):(f("div.lee-selected",l.tree).removeClass("lee-selected"),s.addClass("lee-selected")),void(0!=n&&l.trigger("select",[{data:r,target:s.parent().get(0)}]))}o=function(e){return!(!e[i.idFieldName]&&0!=e[i.idFieldName])&&d(e[i.idFieldName].toString())==d(t.toString())}}f("li",l.tree).each(function(){var e=f(this),t=parseInt(e.attr("treedataindex")),i=l._getDataNodeByTreeDataIndex(l.data,t);o(i,t)?l.selectNode(this,n):l.options.checkbox||l.cancelSelect(this,n)})},clear:function(e){var t=this;this.options;if(e){var i=t.getNodeDom(e),n=t._getDataNodeByTreeDataIndex(t.data,f(i).attr("treedataindex"));f(i).find("ul.lee-children").remove(),n&&(n.children=[])}else t.toggleNodeCallbacks=[],t.data=null,t.data=[],t.nodes=null,t.tree.html("")},reload:function(e){var t=this.options;this.clear(),this.loadData(null,t.url,null,{success:e})},reloadNode:function(e,t,i){var n=this.options;if(this.clear(e),"string"==typeof t)this.loadData(e,t,null,{success:i});else{if(!t)return;n.idField&&n.parentIDField&&(t=this.arrayToTree(t,n.idField,n.parentIDField)),this.append(e,t)}}})}(jQuery),function(s){s.fn.leeLayout=function(e){return s.leeUI.run.call(this,"leeUILayout",arguments)},s.fn.leeGetLayoutManager=function(){return s.leeUI.run.call(this,"leeUIGetLayoutManager",arguments)},s.leeUIDefaults.Layout={topHeight:50,bottomHeight:40,leftWidth:110,centerWidth:300,rightWidth:170,centerBottomHeight:100,allowCenterBottomResize:!0,inWindow:!0,heightDiff:0,height:"100%",onHeightChanged:null,isLeftCollapse:!1,isRightCollapse:!1,allowLeftCollapse:!0,allowRightCollapse:!0,allowLeftResize:!0,allowRightResize:!0,allowTopResize:!0,allowBottomResize:!0,space:3,onEndResize:null,minLeftWidth:80,minRightWidth:80,onLeftToggle:null,onRightToggle:null},s.leeUI.controls.Layout=function(e,t){s.leeUI.controls.Layout.base.constructor.call(this,e,t)},s.leeUI.controls.Layout.leeExtend(s.leeUI.core.UIComponent,{__getType:function(){return"Layout"},__idPrev:function(){return"Layout"},_extendMethods:function(){return{}},_init:function(){s.leeUI.controls.Layout.base._init.call(this);var e=this.options;null!=e.InWindow&&null==e.inWindow&&(e.inWindow=e.InWindow)},_render:function(){var e,t=this,i=this.options;if(t.layout=s(this.element),t.layout.addClass("lee-layout"),t.width=t.layout.width(),0<s("> div[position=top]",t.layout).length&&(t.top=s("> div[position=top]",t.layout).wrap('<div class="lee-layout-top" style="top:0px;"></div>').parent(),t.top.content=s("> div[position=top]",t.top),t.top.content.hasClass("lee-layout-content")||t.top.content.addClass("lee-layout-content"),t.topHeight=i.topHeight,t.topHeight&&t.top.height(t.topHeight)),0<s("> div[position=bottom]",t.layout).length){t.bottom=s("> div[position=bottom]",t.layout).wrap('<div class="lee-layout-bottom"></div>').parent(),t.bottom.content=s("> div[position=bottom]",t.bottom),t.bottom.content.hasClass("lee-layout-content")||t.bottom.content.addClass("lee-layout-content"),t.bottomHeight=i.bottomHeight,t.bottomHeight&&t.bottom.height(t.bottomHeight);var n=t.bottom.content.attr("title");n&&(t.bottom.header=s('<div class="lee-layout-header"></div>'),t.bottom.prepend(t.bottom.header),t.bottom.header.html(n),t.bottom.content.attr("title",""))}if(0<s("> div[position=left]",t.layout).length){t.left=s("> div[position=left]",t.layout).wrap('<div class="lee-layout-left" style="left:0px;"></div>').parent(),t.left.content=s("> div[position=left]",t.left),t.left.content.addClass("lee-layout-content");var l=t.left.content.attr("title");l?(t.left.content.attr("title",""),t.left.header=s('<div class="lee-layout-header"><div class="lee-icon lee-layout-header-toggle"></div><div class="lee-layout-header-inner"></div></div>'),t.left.prepend(t.left.header),t.left.header.toggle=s(".lee-layout-header-toggle",t.left.header),i.allowLeftCollapse||s(".lee-layout-header-toggle",t.left.header).remove(),s(".lee-layout-header-inner",t.left.header).html(l)):t.left.content.css("top","0"),t.left.content.attr("hidetitle")&&(t.left.content.attr("title",""),t.left.header.remove()),t.leftWidth=i.leftWidth,t.leftWidth&&t.left.width(t.leftWidth)}0<s("> div[position=center]",t.layout).length&&(t.center=s("> div[position=center]",t.layout).wrap('<div class="lee-layout-center" ></div>').parent(),t.center.content=s("> div[position=center]",t.center),t.center.content.addClass("lee-layout-content"),(e=t.center.content.attr("title"))&&(t.center.content.attr("title",""),t.center.header=s('<div class="lee-layout-header"></div>'),t.center.prepend(t.center.header),t.center.header.html(e)),t.center.content.attr("hidetitle")&&(t.center.content.attr("title",""),t.center.header.remove()),t.centerWidth=i.centerWidth,t.centerWidth&&t.center.width(t.centerWidth),0<s("> div[position=centerbottom]",t.layout).length&&(t.centerBottom=s("> div[position=centerbottom]",t.layout).wrap('<div class="lee-layout-centerbottom" ></div>').parent(),t.centerBottom.content=s("> div[position=centerbottom]",t.centerBottom),t.centerBottom.content.addClass("lee-layout-content"),(e=t.centerBottom.content.attr("title"))&&(t.centerBottom.content.attr("title",""),t.centerBottom.header=s('<div class="lee-layout-header"></div>'),t.centerBottom.prepend(t.centerBottom.header),t.centerBottom.header.html(e)),t.centerBottom.content.attr("hidetitle")&&(t.centerBottom.content.attr("title",""),t.centerBottom.header&&t.centerBottom.header.remove()),t.centerWidth&&t.centerBottom.width(t.centerWidth)));if(0<s("> div[position=right]",t.layout).length){t.right=s("> div[position=right]",t.layout).wrap('<div class="lee-layout-right"></div>').parent(),t.right.header=s('<div class="lee-layout-header"><div class="lee-icon lee-layout-header-toggle"></div><div class="lee-layout-header-inner"></div></div>'),t.right.prepend(t.right.header),t.right.header.toggle=s(".lee-layout-header-toggle",t.right.header),i.allowRightCollapse||s(".lee-layout-header-toggle",t.right.header).remove(),t.right.content=s("> div[position=right]",t.right),t.right.content.hasClass("lee-layout-content")||t.right.content.addClass("lee-layout-content");var o=t.right.content.attr("title");o&&(t.right.content.attr("title",""),s(".lee-layout-header-inner",t.right.header).html(o)),t.right.content.attr("hidetitle")&&(t.right.content.attr("title",""),t.right.header.remove()),t.rightWidth=i.rightWidth,t.rightWidth&&t.right.width(t.rightWidth)}t.layout.lock=s("<div class='lee-layout-lock'></div>"),t.layout.append(t.layout.lock),t._addDropHandle(),t.isLeftCollapse=i.isLeftCollapse,t.isRightCollapse=i.isRightCollapse,t.leftCollapse=s('<div class="lee-layout-collapse-left" style="display: none; "><div class="lee-icon lee-layout-collapse-left-toggle"></div></div>'),t.rightCollapse=s('<div class="lee-layout-collapse-right" style="display: none; "><div class="lee-icon lee-layout-collapse-right-toggle"></div></div>'),t.layout.append(t.leftCollapse).append(t.rightCollapse),t.leftCollapse.toggle=s("> .lee-layout-collapse-left-toggle",t.leftCollapse),t.rightCollapse.toggle=s("> .lee-layout-collapse-right-toggle",t.rightCollapse),t._setCollapse(),t._bulid(),s(window).resize(function(){t._onResize()}),t.set(i),t.mask.height(t.layout.height())},setLeftCollapse:function(e){var t=this;this.options;if(!t.left)return!1;t.isLeftCollapse=e,t.isLeftCollapse?(t.leftCollapse.show(),t.leftDropHandle&&t.leftDropHandle.hide(),t.left.hide()):(t.leftCollapse.hide(),t.leftDropHandle&&t.leftDropHandle.show(),t.left.show()),t._onResize(),t.trigger("leftToggle",[e])},setRightCollapse:function(e){var t=this;this.options;if(!t.right)return!1;t.isRightCollapse=e,t._onResize(),t.isRightCollapse?(t.rightCollapse.show(),t.rightDropHandle&&t.rightDropHandle.hide(),t.right.hide()):(t.rightCollapse.hide(),t.rightDropHandle&&t.rightDropHandle.show(),t.right.show()),t._onResize(),t.trigger("rightToggle",[e])},_bulid:function(){var e=this,t=this.options;s("> .lee-layout-left .lee-layout-header,> .lee-layout-right .lee-layout-header",e.layout).hover(function(){s(this).addClass("lee-layout-header-over")},function(){s(this).removeClass("lee-layout-header-over")}),s(".lee-layout-header-toggle",e.layout).hover(function(){s(this).addClass("lee-layout-header-toggle-over")},function(){s(this).removeClass("lee-layout-header-toggle-over")}),s(".lee-layout-header-toggle",e.left).click(function(){e.setLeftCollapse(!0)}),s(".lee-layout-header-toggle",e.right).click(function(){e.setRightCollapse(!0)}),e.middleTop=0,e.top&&(e.middleTop+=e.top.height(),e.middleTop+=parseInt(e.top.css("borderTopWidth")),e.middleTop+=parseInt(e.top.css("borderBottomWidth")),e.middleTop+=t.space),e.left&&(e.left.css({top:e.middleTop}),e.leftCollapse.css({top:e.middleTop})),e.center&&e.center.css({top:e.middleTop}),e.right&&(e.right.css({top:e.middleTop}),e.rightCollapse.css({top:e.middleTop})),e.left&&e.left.css({left:0}),e._onResize()},_setCollapse:function(){var e=this;this.options;e.leftCollapse.hover(function(){s(this).addClass("lee-layout-collapse-left-over")},function(){s(this).removeClass("lee-layout-collapse-left-over")}),e.leftCollapse.toggle.hover(function(){s(this).addClass("lee-layout-collapse-left-toggle-over")},function(){s(this).removeClass("lee-layout-collapse-left-toggle-over")}),e.rightCollapse.hover(function(){s(this).addClass("lee-layout-collapse-right-over")},function(){s(this).removeClass("lee-layout-collapse-right-over")}),e.rightCollapse.toggle.hover(function(){s(this).addClass("lee-layout-collapse-right-toggle-over")},function(){s(this).removeClass("lee-layout-collapse-right-toggle-over")}),e.leftCollapse.toggle.click(function(){e.setLeftCollapse(!1)}),e.rightCollapse.toggle.click(function(){e.setRightCollapse(!1)}),e.left&&e.isLeftCollapse&&(e.leftCollapse.show(),e.leftDropHandle&&e.leftDropHandle.hide(),e.left.hide()),e.right&&e.isRightCollapse&&(e.rightCollapse.show(),e.rightDropHandle&&e.rightDropHandle.hide(),e.right.hide())},_addDropHandle:function(){var t=this,e=this.options;t.left&&e.allowLeftResize&&(t.leftDropHandle=s("<div class='lee-layout-drophandle-left'></div>"),t.layout.append(t.leftDropHandle),t.leftDropHandle&&t.leftDropHandle.show(),t.leftDropHandle.mousedown(function(e){t._start("leftresize",e)})),t.right&&e.allowRightResize&&(t.rightDropHandle=s("<div class='lee-layout-drophandle-right'></div>"),t.layout.append(t.rightDropHandle),t.rightDropHandle&&t.rightDropHandle.show(),t.rightDropHandle.mousedown(function(e){t._start("rightresize",e)})),t.top&&e.allowTopResize&&(t.topDropHandle=s("<div class='lee-layout-drophandle-top'></div>"),t.layout.append(t.topDropHandle),t.topDropHandle.show(),t.topDropHandle.mousedown(function(e){t._start("topresize",e)})),t.bottom&&e.allowBottomResize&&(t.bottomDropHandle=s("<div class='lee-layout-drophandle-bottom'></div>"),t.layout.append(t.bottomDropHandle),t.bottomDropHandle.show(),t.bottomDropHandle.mousedown(function(e){t._start("bottomresize",e)})),t.centerBottom&&e.allowCenterBottomResize&&(t.centerBottomDropHandle=s("<div class='lee-layout-drophandle-centerbottom'></div>"),t.layout.append(t.centerBottomDropHandle),t.centerBottomDropHandle.show(),t.centerBottomDropHandle.mousedown(function(e){t._start("centerbottomresize",e)})),t.draggingxline=s("<div class='lee-layout-dragging-xline'></div>"),t.draggingyline=s("<div class='lee-layout-dragging-yline'></div>"),t.mask=s("<div class='lee-dragging-mask'></div>"),t.layout.append(t.draggingxline).append(t.draggingyline).append(t.mask)},_setDropHandlePosition:function(){var e=this,t=this.options;e.leftDropHandle&&e.leftDropHandle.css({left:e.left.width()+parseInt(e.left.css("left")),height:e.middleHeight,top:e.middleTop}),e.rightDropHandle&&e.rightDropHandle.css({left:parseInt(e.right.css("left"))-t.space,height:e.middleHeight,top:e.middleTop}),e.topDropHandle&&e.topDropHandle.css({top:e.top.height()+parseInt(e.top.css("top")),width:e.top.width()}),e.bottomDropHandle&&e.bottomDropHandle.css({top:parseInt(e.bottom.css("top"))-t.space,width:e.bottom.width()}),e.centerBottomDropHandle&&e.centerBottomDropHandle.css({top:parseInt(e.centerBottom.css("top"))-t.space,left:parseInt(e.center.css("left")),width:e.center.width()})},_onResize:function(){var e=this,t=this.options,i=e.layout.height(),n=0,l=s(window).height(),o=null;if("string"==typeof t.height&&0<t.height.indexOf("%")){var a=e.layout.parent();t.inWindow||"body"==a[0].tagName.toLowerCase()?(o=l,o-=parseInt(s("body").css("paddingTop")),o-=parseInt(s("body").css("paddingBottom"))):o=a.height(),n=o*parseFloat(t.height)*.01,(t.inWindow||"body"==a[0].tagName.toLowerCase())&&(n-=e.layout.offset().top-parseInt(s("body").css("paddingTop")))}else n=parseInt(t.height);if(n+=t.heightDiff,e.layout.height(n),e.layoutHeight=e.layout.height(),e.middleWidth=e.layout.width(),e.middleHeight=e.layout.height(),e.top&&(e.middleHeight-=e.top.height(),e.middleHeight-=parseInt(e.top.css("borderTopWidth")),e.middleHeight-=parseInt(e.top.css("borderBottomWidth")),e.middleHeight-=t.space),e.bottom&&(e.middleHeight-=e.bottom.height(),e.middleHeight-=parseInt(e.bottom.css("borderTopWidth")),e.middleHeight-=parseInt(e.bottom.css("borderBottomWidth")),e.middleHeight-=t.space),e.middleHeight-=2,e.hasBind("heightChanged")&&e.layoutHeight!=i&&e.trigger("heightChanged",[{layoutHeight:e.layoutHeight,diff:e.layoutHeight-i,middleHeight:e.middleHeight}]),e.center){e.centerWidth=e.middleWidth,e.left&&(e.isLeftCollapse?(e.centerWidth-=e.leftCollapse.width(),e.centerWidth-=parseInt(e.leftCollapse.css("borderLeftWidth")),e.centerWidth-=parseInt(e.leftCollapse.css("borderRightWidth")),e.centerWidth-=parseInt(e.leftCollapse.css("left"))):(e.centerWidth-=e.leftWidth,e.centerWidth-=parseInt(e.left.css("borderLeftWidth")),e.centerWidth-=parseInt(e.left.css("borderRightWidth")),e.centerWidth-=parseInt(e.left.css("left"))),e.centerWidth-=t.space),e.right&&(e.isRightCollapse?(e.centerWidth-=e.rightCollapse.width(),e.centerWidth-=parseInt(e.rightCollapse.css("borderLeftWidth")),e.centerWidth-=parseInt(e.rightCollapse.css("borderRightWidth")),e.centerWidth-=parseInt(e.rightCollapse.css("right"))):(e.centerWidth-=e.rightWidth,e.centerWidth-=parseInt(e.right.css("borderLeftWidth")),e.centerWidth-=parseInt(e.right.css("borderRightWidth"))),e.centerWidth-=t.space),e.centerWidth-=2,e.centerLeft=0,e.left&&(e.isLeftCollapse?(e.centerLeft+=e.leftCollapse.width(),e.centerLeft+=parseInt(e.leftCollapse.css("borderLeftWidth")),e.centerLeft+=parseInt(e.leftCollapse.css("borderRightWidth")),e.centerLeft+=parseInt(e.leftCollapse.css("left"))):(e.centerLeft+=e.left.width(),e.centerLeft+=parseInt(e.left.css("borderLeftWidth")),e.centerLeft+=parseInt(e.left.css("borderRightWidth"))),e.centerLeft+=t.space),e.center.css({left:e.centerLeft}),0<=e.centerWidth&&e.center.width(e.centerWidth),0<=e.middleHeight&&e.center.height(e.middleHeight);var r=e.middleHeight;e.center.header&&(r-=e.center.header.height()),0<=r&&e.center.content.height(r),e._updateCenterBottom(!0)}e.left&&(e.leftCollapse.height(e.middleHeight),e.left.height(e.middleHeight)),e.right&&(e.rightCollapse.height(e.middleHeight),e.right.height(e.middleHeight),e.rightLeft=0,e.left&&(e.isLeftCollapse?(e.rightLeft+=e.leftCollapse.width(),e.rightLeft+=parseInt(e.leftCollapse.css("borderLeftWidth")),e.rightLeft+=parseInt(e.leftCollapse.css("borderRightWidth"))):(e.rightLeft+=e.left.width(),e.rightLeft+=parseInt(e.left.css("borderLeftWidth")),e.rightLeft+=parseInt(e.left.css("borderRightWidth")),e.rightLeft+=parseInt(e.left.css("left"))),e.rightLeft+=t.space),e.center&&(e.rightLeft+=e.center.width(),e.rightLeft+=parseInt(e.center.css("borderLeftWidth")),e.rightLeft+=parseInt(e.center.css("borderRightWidth")),e.rightLeft+=t.space),e.right.css({left:e.rightLeft})),e.bottom&&(e.bottomTop=e.layoutHeight-e.bottom.height()-2,e.bottom.css({top:e.bottomTop})),e._setDropHandlePosition()},_updateCenterBottom:function(e){var t=this,i=this.options;if(t.centerBottom){if(e){var n=t.centerBottomHeight||i.centerBottomHeight;t.centerBottom.css({left:t.centerLeft}),0<=t.centerWidth&&t.centerBottom.width(t.centerWidth);var l=t.center.height(),o=parseInt(t.center.css("top"));t.centerBottom.height(n),t.centerBottom.css({top:o+l-n}),t.center.height(l-n-6);var a=l-n-6;t.center.header&&(a-=t.center.header.height()),0<=a&&t.center.content.height(a)}var r=parseInt(t.center.css("left"));t.centerBottom.width(t.center.width()).css({left:r})}},_start:function(e,t){var i=this;this.options;if("leftresize"==(i.dragtype=e)||"rightresize"==e)i.xresize={startX:t.pageX},i.draggingyline.css({left:t.pageX-i.layout.offset().left,height:i.middleHeight,top:i.middleTop}).show(),s("body").css("cursor","col-resize"),i.mask.height(i.layout.height()).removeClass("lee-layout-ymask").addClass("lee-layout-xmask").show();else if("topresize"==e||"bottomresize"==e)i.yresize={startY:t.pageY},i.draggingxline.css({top:t.pageY-i.layout.offset().top,width:i.layout.width()}).show(),s("body").css("cursor","row-resize"),i.mask.height(i.layout.height()).removeClass("lee-layout-xmask").addClass("lee-layout-ymask").show();else{if("centerbottomresize"!=e)return;i.yresize={startY:t.pageY},i.draggingxline.css({top:t.pageY-i.layout.offset().top,width:i.layout.width()}).show(),s("body").css("cursor","row-resize"),i.mask.height(i.layout.height()).removeClass("lee-layout-xmask").addClass("lee-layout-ymask").show()}i.layout.lock.width(i.layout.width()),i.layout.lock.height(i.layout.height()),i.layout.lock.show(),s("body").bind("selectstart.layout",function(){return!1}),s(document).bind("mouseup.layout",function(){i._stop.apply(i,arguments)}),s(document).bind("mousemove.layout",function(){i._drag.apply(i,arguments)})},_drag:function(e){var t=this;this.options;t.xresize?(t.xresize.diff=e.pageX-t.xresize.startX,t.draggingyline.css({left:e.pageX-t.layout.offset().left}),s("body").css("cursor","col-resize")):t.yresize&&(t.yresize.diff=e.pageY-t.yresize.startY,t.draggingxline.css({top:e.pageY-t.layout.offset().top}),s("body").css("cursor","row-resize"))},_stop:function(e){var t,i=this,n=this.options;if(i.xresize&&null!=i.xresize.diff){if(t=i.xresize.diff,"leftresize"==i.dragtype){if(n.minLeftWidth&&i.leftWidth+i.xresize.diff<n.minLeftWidth)return;i.leftWidth+=i.xresize.diff,i.left.width(i.leftWidth),i.center?i.center.width(i.center.width()-i.xresize.diff).css({left:parseInt(i.center.css("left"))+i.xresize.diff}):i.right&&i.right.width(i.left.width()-i.xresize.diff).css({left:parseInt(i.right.css("left"))+i.xresize.diff})}else if("rightresize"==i.dragtype){if(n.minRightWidth&&i.rightWidth-i.xresize.diff<n.minRightWidth)return;i.rightWidth-=i.xresize.diff,i.right.width(i.rightWidth).css({left:parseInt(i.right.css("left"))+i.xresize.diff}),i.center?i.center.width(i.center.width()+i.xresize.diff):i.left&&i.left.width(i.left.width()+i.xresize.diff)}i._updateCenterBottom()}else if(i.yresize&&null!=i.yresize.diff)if(t=i.yresize.diff,"topresize"==i.dragtype)i.top.height(i.top.height()+i.yresize.diff),i.middleTop+=i.yresize.diff,i.middleHeight-=i.yresize.diff,i.left&&(i.left.css({top:i.middleTop}).height(i.middleHeight),i.leftCollapse.css({top:i.middleTop}).height(i.middleHeight)),i.center&&i.center.css({top:i.middleTop}).height(i.middleHeight),i.right&&(i.right.css({top:i.middleTop}).height(i.middleHeight),i.rightCollapse.css({top:i.middleTop}).height(i.middleHeight)),i._updateCenterBottom(!0);else if("bottomresize"==i.dragtype)i.bottom.height(i.bottom.height()-i.yresize.diff),i.middleHeight+=i.yresize.diff,i.bottomTop+=i.yresize.diff,i.bottom.css({top:i.bottomTop}),i.left&&(i.left.height(i.middleHeight),i.leftCollapse.height(i.middleHeight)),i.center&&i.center.height(i.middleHeight),i.right&&(i.right.height(i.middleHeight),i.rightCollapse.height(i.middleHeight)),i._updateCenterBottom(!0);else if("centerbottomresize"==i.dragtype){i.centerBottomHeight=i.centerBottomHeight||n.centerBottomHeight,i.centerBottomHeight-=i.yresize.diff;var l=parseInt(i.centerBottom.css("top"));i.centerBottom.css("top",l+i.yresize.diff),i.centerBottom.height(i.centerBottom.height()-i.yresize.diff),i.center.height(i.center.height()+i.yresize.diff)}i.trigger("endResize",[{direction:i.dragtype?i.dragtype.replace(/resize/,""):"",diff:t},e]),i._setDropHandlePosition(),i.draggingxline.hide(),i.draggingyline.hide(),i.mask.hide(),i.xresize=i.yresize=i.dragtype=!1,i.layout.lock.hide(),s("body").unbind("selectstart.layout"),s(document).unbind("mousemove.layout"),s(document).unbind("mouseup.layout"),s("body").css("cursor","")}})}(jQuery),function(l){l.fn.leeTextBox=function(){return l.leeUI.run.call(this,"leeUITextBox",arguments)},l.fn.leeGetTextBoxManager=function(){return l.leeUI.run.call(this,"leeUIGetTextBoxManager",arguments)},l.leeUIDefaults.TextBox={onChangeValue:null,onMouseOver:null,onMouseOut:null,onBlur:null,onFocus:null,width:"auto",disabled:!1,initSelect:!1,value:null,precision:2,nullText:null,digits:!1,number:!1,currency:!1,readonly:!1},l.leeUI.controls.TextBox=function(e,t){l.leeUI.controls.TextBox.base.constructor.call(this,e,t)},l.leeUI.controls.TextBox.leeExtend(l.leeUI.controls.Input,{__getType:function(){return"TextBox"},__idPrev:function(){return"TextBox"},_init:function(){l.leeUI.controls.TextBox.base._init.call(this);var e=this.options;e.width||(e.width=l(this.element).width()),l(this.element).attr("readonly")?e.readonly=!0:e.readonly&&l(this.element).attr("readonly",!0)},_render:function(){var e=this,t=this.options;e.inputText=l(this.element),e.wrapper=e.inputText.wrap('<div class="lee-text"></div>').parent(),e.inputText.hasClass("lee-text-field")||e.inputText.addClass("lee-text-field"),this._setEvent(),(t.digits||t.number||t.currency)&&e.inputText.addClass("lee-text-field-number"),t.placeholder&&e.inputText.attr("placeholder",t.placeholder),e.set(t),e.formatValue()},destroy:function(){this.wrapper&&this.wrapper.remove(),this.options=null,leeUI.remove(this)},_getValue:function(){var e=this.options;return this.inputText.hasClass("lee-text-field-null")?"":e.digits||e.number||e.currency?this.parseNumber():this.inputText.val()},_setNullText:function(){this.checkNotNull()},formatValue:function(){var e=this.options,t=this.inputText.val()||"";if(""==t)return"";if(e.currency)this.inputText.val(function(e,t){var i,n;e||(e=0);-1<(e=e.toString().replace(/\$|\,/g,"").replace(/[a-zA-Z]+/g,"")).indexOf(".")&&(e=e.replace(/[0]+$/g,""));isNaN(e)&&(e=0);if(n=e==(e=Math.abs(e)),null==t||"0"==t)e=e.toString(),(i=-1!=e.indexOf(".")?e.substr(e.indexOf(".")+1):"")&&(e=(e=Math.floor(1*e)).toString());else{t=parseInt(t);var l=Math.pow(10,t);for(e=Math.floor(e*l+.50000000001),i=e%100,e=Math.floor(e/l).toString();i.toString().length<t;)i="0"+i}for(var o=0;o<Math.floor((e.length-(1+o))/3);o++)e=e.substring(0,e.length-(4*o+3))+","+e.substring(e.length-(4*o+3));var a=(n?"":"-")+e;i&&(a+="."+i);return a}(t,e.precision));else if(e.number&&e.precision&&t){var i=parseFloat(this.inputText.val()).toFixed(e.precision);this.inputText.val(i)}},checkNotNull:function(){var e=this.options;if(!e.nullText||"null"==e.nullText||e.disabled||e.readonly)this.inputText.removeClass("lee-text-field-null");else if(!this.inputText.val())return void this.inputText.addClass("lee-text-field-null").val(e.nullText)},_setEvent:function(){var t=this,i=this.options;function e(){var e;(e=t.inputText.val())&&"-"!=e&&!(i.digits?/^-?\d+$/:/^(-?\d+)(\.)?(\d+)?$/).test(e)&&t.inputText.val(t.parseNumber())}(i.digits||i.number||i.currency)&&t.inputText.keyup(e).bind("paste",e),t.inputText.bind("blur.textBox",function(){t.trigger("blur"),t.checkNotNull(),t.formatValue(),t.wrapper.removeClass("lee-text-focus")}).bind("focus.textBox",function(){i.readonly||(t.trigger("focus"),i.nullText&&l(this).hasClass("lee-text-field-null")&&l(this).removeClass("lee-text-field-null").val(""),t.wrapper.addClass("lee-text-focus"),(i.digits||i.number||i.currency)&&(l(this).val(t.parseNumber()),i.initSelect&&setTimeout(function(){t.inputText.select()},150)))}).change(function(){t.trigger("change",[this.value]),t.trigger("changeValue",[this.value])}),t.wrapper.hover(function(){t.trigger("mouseOver"),t.wrapper.addClass("lee-text-over")},function(){t.trigger("mouseOut"),t.wrapper.removeClass("lee-text-over")})},parseNumber:function(e){var t=this.options,i=!!t.digits;if(null==(e=e||this.inputText.val())||""==e)return"";if(!(t.digits||t.number||t.currency))return e;"string"!=typeof e&&(e=(e||"").toString());var n=/^\-/.test(e);if(i){if("0"==e)return e;e=e.replace(/\D+|^[0]+/g,"")}else e=e.replace(/[^0-9.]/g,""),/^[0]+[1-9]+/.test(e)&&(e=e.replace(/^[0]+/,""));return!i&&t.precision&&"NaN"==(e=parseFloat(e).toFixed(t.precision))?"0":(n&&(e="-"+e),e)},_setDisabled:function(e){var t=this.options;e?(this.inputText.attr("readonly","readonly"),this.wrapper.addClass("lee-text-disabled")):t.readonly||(this.inputText.removeAttr("readonly"),this.wrapper.removeClass("lee-text-disabled"))},_setRequired:function(e){e?this.wrapper.addClass("lee-text-required"):this.wrapper.removeClass("lee-text-required")},_setWidth:function(e){20<e&&this.wrapper.css({width:e})},_setHeight:function(e){},_setValue:function(e){var t=this.options;null!=e&&(this.inputText.val(e),(t.digits||t.number||t.currency)&&this.inputText.val(this.parseNumber())),this.checkNotNull()},_setLabel:function(e){var t=this,i=this.options;if(t.labelwrapper)t.labelwrapper.find(".lee-text-label").html(e+":&nbsp");else{t.labelwrapper=t.wrapper.wrap('<div class="lee-labeltext"></div>').parent();var n=l('<div class="lee-text-label" style="float:left;">'+e+":&nbsp</div>");t.labelwrapper.prepend(n),t.wrapper.css("float","left"),i.labelWidth?t._setLabelWidth(i.labelWidth):i.labelWidth=n.width(),n.height(t.wrapper.height()),i.labelAlign&&t._setLabelAlign(i.labelAlign),t.labelwrapper.append('<br style="clear:both;" />'),t.labelwrapper.width(i.labelWidth+i.width+2)}},_setLabelWidth:function(e){this.options;this.labelwrapper&&this.labelwrapper.find(".lee-text-label").width(e)},_setLabelAlign:function(e){this.options;this.labelwrapper&&this.labelwrapper.find(".lee-text-label").css("text-align",e)},updateStyle:function(){var e=this,t=this.options;e.inputText.attr("readonly")?(e.wrapper.addClass("lee-text-readonly"),t.disabled=!0):(e.wrapper.removeClass("lee-text-readonly"),t.disabled=!1),e.inputText.attr("disabled")?(e.wrapper.addClass("lee-text-disabled"),t.disabled=!0):(e.wrapper.removeClass("lee-text-disabled"),t.disabled=!1),e.inputText.hasClass("lee-text-field-null")&&e.inputText.val()!=t.nullText&&e.inputText.removeClass("lee-text-field-null"),e.formatValue()},setValue:function(e){this._setValue(e)}})}(jQuery),function(i){i.fn.leeButton=function(e){return i.leeUI.run.call(this,"leeUIButton",arguments)},i.leeUIDefaults.Button={width:"auto",text:"Button",disabled:!1,click:null,icon:"ss",position:"right"},i.leeUI.controls.Button=function(e,t){i.leeUI.controls.Button.base.constructor.call(this,e,t)},i.leeUI.controls.Button.leeExtend(i.leeUI.controls.Input,{__getType:function(){return"Button"},__idPrev:function(){return"Button"},_extendMethods:function(){return[]},_render:function(){var e=this,t=this.options;e.button=i(e.element),e.button.addClass("lee-btn lee-btn-primary"),e.button.append("<span></span>"),e.button.hover(function(){t.disabled||e.button.addClass("lee-btn-over")},function(){t.disabled||e.button.removeClass("lee-btn-over")}),t.click&&e.button.click(function(){t.disabled||t.click()}),e.set(t)},_setIcon:function(e){var t=this,i=this.options;e?(t.button.addClass("lee-btn-hasicon"),i.position&&(t.button.addClass(i.position),"left"==i.position||"top"==i.position?t.button.prepend('<i class="lee-icon lee-search"></i>'):t.button.append('<i class="lee-icon lee-search"></i>'))):(t.button.removeClass("lee-btn-hasicon"),t.button.find("i").remove())},_setEnabled:function(e){e&&this.button.removeClass("lee-btn-disabled")},_setDisabled:function(e){e?(this.button.addClass("lee-btn-disabled"),this.button.attr("disabled","disabled"),this.options.disabled=!0):(this.button.removeClass("lee-btn-disabled"),this.options.disabled=!1,this.button.removeAttr("disabled"))},_setWidth:function(e){this.button.width(e)},_setText:function(e){i("span",this.button).html(e)},setValue:function(e){this.set("text",e)},getValue:function(){return this.options.text},setEnabled:function(){this.set("disabled",!1)},setDisabled:function(){this.set("disabled",!0)}})}(jQuery),function(o){"use strict";var l=function(e,t){this.$element=o(e),this.options=o.extend({},l.DEFAULTS,t),this.isLoading=!1};function i(n){return this.each(function(){var e=o(this),t=e.data("bs.button"),i="object"==typeof n&&n;t||e.data("bs.button",t=new l(this,i)),"toggle"==n?t.toggle():n&&t.setState(n)})}l.VERSION="3.3.7",l.DEFAULTS={loadingText:"loading..."},l.prototype.setState=function(e){var t="disabled",i=this.$element,n=i.is("input")?"val":"html",l=i.data();e+="Text",null==l.resetText&&i.data("resetText",i[n]()),setTimeout(o.proxy(function(){i[n](null==l[e]?this.options[e]:l[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(t).attr(t,t).prop(t,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(t).removeAttr(t).prop(t,!1))},this),0)},l.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var e=o.fn.button;o.fn.button=i,o.fn.button.Constructor=l,o.fn.button.noConflict=function(){return o.fn.button=e,this},o(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var t=o(e.target).closest(".lee-btn");i.call(t,"toggle"),o(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),t.is("input,button")?t.trigger("focus"):t.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){o(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(i){i.fn.leeCheckBox=function(e){return i.leeUI.run.call(this,"leeUICheckBox",arguments)},i.fn.leeGetCheckBoxManager=function(){return i.leeUI.run.call(this,"leeUIGetCheckBoxManager",arguments)},i.leeUIDefaults.CheckBox={disabled:!1,readonly:!1,hasLabel:!0,labelText:null,data:[],isMul:!1},i.leeUI.controls.CheckBox=function(e,t){i.leeUI.controls.CheckBox.base.constructor.call(this,e,t)},i.leeUI.controls.CheckBox.leeExtend(i.leeUI.controls.Input,{__getType:function(){return"CheckBox"},__idPrev:function(){return"CheckBox"},_extendMethods:function(){},_render:function(){var e=this;p=this.options,e.input=i(e.element),e.link=i("<span class='lee-checkbox'></span>"),e.wrapper=e.input.addClass("lee-hidden").wrap("<div class='lee-checkbox-wrapper'></div>").parent(),e.wrapper.prepend(e.link),p.labelText&&(e.labelwrap=e.wrapper.wrap("<div class='lee-checkbox-label'></div>").parent(),e.labelspan=i("<span class='lee-checkbox-label-span' style='font-size:12px;'>"+p.labelText+"</span>"),e.labelwrap.append(e.labelspan),e.labelspan.bind("click",function(){e.link.trigger("click")})),e.link.click(function(){return!e.input.attr("disabled")&&!e.input.attr("readonly")&&(!p.disabled&&!p.readonly&&(0!=e.trigger("beforeClick",[e.element])&&(i(this).hasClass("lee-checkbox-checked")?e._setValue(!1):e._setValue(!0),void e.input.trigger("change"))))}),e.input.change(function(){return this.checked?e.link.addClass("lee-checkbox-checked"):e.link.removeClass("lee-checkbox-checked"),!0}),e.wrapper.hover(function(){p.disabled||i(this).addClass("lee-over")},function(){i(this).removeClass("lee-over")}),this.set(p),this.updateStyle()},_setCss:function(){this.wrapper.css(value)},_setValue:function(e){this.options.notbit&&(e="1"==e),e?(this.input[0].checked=!0,this.link.addClass("lee-checkbox-checked")):(this.input[0].checked=!1,this.link.removeClass("lee-checkbox-checked"))},_setDisabled:function(e){e?(this.input.attr("disabled",!0),this.wrapper.addClass("lee-disabled")):(this.input.attr("disabled",!1),this.wrapper.removeClass("lee-disabled"))},_getValue:function(){return this.options.notbit?this.element.checked?"1":"0":this.element.checked},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("lee-disabled"),this.options.disabled=!0),this.input[0].checked?this.link.addClass("lee-checkbox-checked"):this.link.removeClass("lee-checkbox-checked")}})}(jQuery),function(c){c.fn.leeCheckList=function(){return c.leeUI.run.call(this,"leeUICheckList",arguments)},c.leeUIDefaults.CheckList={rowSize:4,url:null,data:null,valueField:"id",textField:"text",root:null,onChangeValue:null,onSuccess:null,onError:null,splitchar:",",absolute:!1},c.leeUI.controls.CheckList=function(e,t){c.leeUI.controls.CheckList.base.constructor.call(this,e,t)},c.leeUI.controls.CheckList.leeExtend(c.leeUI.controls.Input,{__getType:function(){return"CheckList"},__idPrev:function(){return"CheckList"},_extendMethods:function(){return{}},_render:function(){var e=this,t=this.options;e.data=t.data,e.valueField=null,c(this.element).is(":hidden")||c(this.element).is(":text")?(e.valueField=c(this.element),c(this.element).is(":text")&&e.valueField.hide()):(e.valueField=c('<input type="hidden"/>'),e.valueField[0].id=e.valueField[0].name=e.id+"_val"),null==e.valueField[0].name&&(e.valueField[0].name=e.valueField[0].id),e.valueField.attr("data-leeid",e.id),c(this.element).is(":hidden")||c(this.element).is(":text")?e.checkList=c("<div></div>").insertBefore(this.element):e.checkList=c(this.element),e.checkList.html('<div class="lee-radiolist-inner"><table cellpadding="0" cellspacing="0" border="0" class="lee-radiolist-table"></table></div>').addClass("lee-radiolist").append(e.valueField),e.checkList.table=c("table:first",e.checkList),t.value=e.valueField.val()||t.value,e.set(t),e._addClickEven()},destroy:function(){this.checkList&&this.checkList.remove(),this.options=null,c.leeUI.remove(this)},clear:function(){this._changeValue(""),this.trigger("clear")},_setDisabled:function(e){e?(this.checkList.addClass("lee-checklist-disabled"),c("input:checkbox",this.checkList).attr("disabled",!0)):(this.checkList.removeClass("lee-checklist-disabled"),c("input:checkbox",this.checkList).removeAttr("disabled"))},_setValue:function(e){var t=this.options;this.valueField.val(e),t.value=e,this._dataInit()},setValue:function(e){this._setValue(e)},clearContent:function(){this.options;c("table",this.checkList).html("")},_setData:function(e){this.setData(e)},setData:function(e){this.options;e&&e.length&&(this.data=e,this.refresh(),this.updateStyle())},refresh:function(){var e=this.options,t=this.data;if(this.clearContent(),t){for(var i=[],n=e.rowSize,l=!1,o=e.name||this.id,a=0;a<t.length;a++){var r=t[a][e.valueField],s=t[a][e.textField],d=this.id+"-"+a;a%n==0&&(l&&i.push("</tr>"),i.push("<tr>"),l=!0),i.push("<td><input type='checkbox' name='"+o+"' value='"+r+"' id='"+d+"'/><label for='"+d+"'>"+s+"</label></td>")}l&&i.push("</tr>"),this.checkList.table.append(i.join("")),c("input[type='checkbox']",this.checkList).leeCheckBox()}},_getValue:function(){var e=this.options,t=e.name||this.id,i=c('input:checkbox[name="'+t+'"]:checked'),n=[];return c.each(i,function(e,t){var i=c(t).val();n.push(i)}),n.join(e.splitchar)},getValue:function(){var e=this._getValue();return e||(e=""),e},updateStyle:function(){this.options;this._dataInit()},_dataInit:function(){var e=this.options,t=e.name||this.id,i=this.valueField.val();if(""!=i){var n=i.split(e.splitchar);c("input:checkbox[name='"+t+"']",this.checkList).each(function(){var e=!1;-1!=c.inArray(this.value,n)&&(e=!0),c(this).leeUI().setValue(e)})}else c("input:checkbox[name='"+t+"']",this.checkList).each(function(){c(this).leeUI().setValue(!1)})},_setRequired:function(e){},_changeValue:function(e){var t=this.options.name||this.id;c("input:checkbox[name='"+t+"']",this.checkList).each(function(){this.checked=this.value==e}),this.valueField.val(e),this.selectedValue=e},_addClickEven:function(){var i=this;this.options;i.checkList.click(function(e){var t=i.getValue();t&&i.valueField.val(t)})}})}(jQuery),function(g){g.fn.leeDropDown=function(e){return g.leeUI.run.call(this,"leeUIDropDown",arguments)},g.fn.leeUIGetDropDownManager=function(){return g.leeUI.run.call(this,"leeUIGetDropDownManager",arguments)},g.leeUIDefaults.DropDown={resize:!0,isMultiSelect:!1,isShowCheckBox:!1,isbit:!1,columns:null,width:null,selectBoxWidth:null,selectBoxHeight:120,selectBoxPosYDiff:-1,onBeforeSelect:!1,onAfterShowData:null,onSelected:null,initValue:null,value:null,initText:null,valueField:"id",textField:"text",dataParmName:null,valueFieldID:null,ajaxComplete:null,ajaxBeforeSend:null,ajaxContentType:null,slide:!1,split:";",data:null,dataGetter:null,tree:null,treeLeafOnly:!0,condition:null,grid:null,onStartResize:null,onEndResize:null,hideOnLoseFocus:!1,hideGridOnLoseFocus:!1,url:null,urlParms:null,selectBoxRender:null,selectBoxRenderUpdate:null,detailEnabled:!0,detailUrl:null,detailPostIdField:null,detailDataParmName:null,detailParms:null,detailDataGetter:null,delayLoad:!1,triggerToLoad:!1,emptyText:null,addRowButton:"新增",addRowButtonClick:null,triggerIcon:null,onSuccess:null,onBeforeSetData:null,onError:null,onBeforeOpen:null,onButtonClick:null,onTextBoxKeyDown:null,onTextBoxKeyEnter:null,render:null,absolute:!0,cancelable:!0,css:null,parms:null,renderItem:null,autocomplete:!1,autocompleteAllowEmpty:!0,isTextBoxMode:!1,highLight:!1,readonly:!1,ajaxType:"post",alwayShowInTop:!1,alwayShowInDown:!1,valueFieldCssClass:null,isRowReadOnly:null,rowClsRender:null,keySupport:!0,initIsTriggerEvent:!1,conditionSearchClick:null,onChangeValue:null,delayLoadGrid:!0,setTextBySource:!0},g.leeUIDefaults.DropDownString={Search:"搜索"},g.leeUI.controls.DropDown=function(e,t){g.leeUI.controls.DropDown.base.constructor.call(this,e,t)},g.leeUI.controls.DropDown.leeExtend(g.leeUI.controls.Input,{__getType:function(){return"DropDown"},_extendMethods:function(){return null},_init:function(){g.leeUI.controls.DropDown.base._init.call(this);var e=this.options;e.columns&&(e.isShowCheckBox=!0),e.isMultiSelect&&(e.isShowCheckBox=!0),e.triggerToLoad&&(e.delayLoad=!0)},_render:function(){var t=this,e=this.options;function i(){e.autocomplete?(t._toggleSelectBox(t.selectBox.is(":visible")),t.updateSelectBoxPosition()):e.triggerToLoad&&!t.triggerLoaded?(t.triggerLoaded=!0,t._setUrl(e.url,function(){t._toggleSelectBox(t.selectBox.is(":visible"))})):t._toggleSelectBox(t.selectBox.is(":visible"))}t.data=e.data,t.inputText=null,t.select=null,t.textFieldID="",t.valueFieldID="",t.valueField=null,"hidden"==g(this.element).attr("type")?(t.valueField=g(this.element),t.textFieldID=e.textFieldID||this.element.id+"$text",t.inputText=g('<input type="text" />'),t.inputText.attr("id",t.textFieldID).insertAfter(g(this.element))):"input"==this.element.tagName.toLowerCase()?(g(this.element).attr("readonly")&&(e.disabled=!0),t.inputText=g(this.element),t.textFieldID=this.element.id,this.element.readOnly=!0):"select"==this.element.tagName.toLowerCase()&&(g(this.element).hide(),t.select=g(this.element),e.isMultiSelect=!1,e.isShowCheckBox=!1,e.cancelable=!1,t.textFieldID=e.textFieldID||this.element.id+"$text",t.inputText=g('<input type="text" />'),t.inputText.attr("id",t.textFieldID).insertAfter(g(this.element)),!e.value&&this.element.value&&(e.value=this.element.value)),null==t.inputText[0].name&&(t.inputText[0].name=t.textFieldID),t.inputText.attr("data-dropdownid",t.id),null==t.valueField&&(e.valueFieldID?(t.valueField=g("#"+e.valueFieldID+":input,[name="+e.valueFieldID+"]:input").filter("input:hidden"),0==t.valueField.length&&(t.valueField=g('<input type="hidden"/>')),t.valueField[0].id=t.valueField[0].name=e.valueFieldID):(t.valueField=g('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val")),null==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),null!=e.initValue&&(t.valueField[0].value=e.initValue),t.valueField.attr("data-dropdownid",t.id),t.link=g('<div class="lee-right"><i class="lee-icon lee-angle-down dropdown"></i></div>'),e.triggerIcon&&t.link.find("div:first").addClass(e.triggerIcon),t.selectBox=g('<div class="lee-box-select" style="display:none"><div class="lee-box-select-inner"><table cellpadding="0" cellspacing="0" border="0" class="lee-box-select-table"></table></div></div>'),t.selectBox.table=g("table:first",t.selectBox),t.selectBoxInner=t.selectBox.find(".lee-box-select-inner:first"),t.wrapper=t.inputText.wrap('<div class="lee-text lee-text-drop-down"></div>').parent(),t.wrapper.append(t.link),t.textwrapper=t.wrapper.wrap('<div class="lee-text-wrapper"></div>').parent(),e.absolute?t.selectBox.appendTo("body").addClass("lee-box-select-absolute"):t.textwrapper.append(t.selectBox),t.textwrapper.append(t.valueField),t.inputText.addClass("lee-text-field"),e.isShowCheckBox&&!t.select?g("table",t.selectBox).addClass("lee-table-checkbox"):(e.isShowCheckBox=!1,g("table",t.selectBox).addClass("lee-table-nocheckbox")),t.link.hover(function(){e.disabled||e.readonly||g(this).addClass("lee-right-hover")},function(){e.disabled||e.readonly||g(this).removeClass("lee-right-hover")}).mousedown(function(){e.disabled||e.readonly||g(this).addClass("lee-right-pressed")}).mouseup(function(){e.disabled||e.readonly||g(this).addClass("lee-right-hover")}).click(function(){if(!e.disabled&&!e.readonly)return 0!=t.trigger("buttonClick")&&(0!=t.trigger("beforeOpen")&&void i())}),t.inputText.click(function(){if(!e.disabled&&!e.readonly)return 0!=t.trigger("beforeOpen")&&void i()}).blur(function(){e.disabled||t.wrapper.removeClass("lee-text-focus")}).focus(function(){e.disabled||e.readonly||t.wrapper.addClass("lee-text-focus")}).change(function(){t.trigger("change",[this.value])}),t.wrapper.hover(function(){e.disabled||e.readonly||t.wrapper.addClass("lee-text-over")},function(){e.disabled||e.readonly||t.wrapper.removeClass("lee-text-over")}),t.resizing=!1,t.bulidContent(),t.set(e,null,"init"),e.selectBoxWidth?t.selectBox.width(e.selectBoxWidth):t.selectBox.css("width",t.wrapper.css("width")),t.updateSelectBoxPosition(),g(document).bind("click.combobox",function(e){0==g(e.target||e.srcElement).closest(".lee-box-select, .lee-text-drop-down").length&&t.selectBox.is(":visible")&&t._toggleSelectBox(!0)})},destroy:function(){this.wrapper&&this.wrapper.remove(),this.selectBox&&this.selectBox.remove(),this.options=null,g.leeUI.remove(this)},clear:function(){""!=this.getValue()&&(this._changeValue("","",!0),g("a.lee-checkbox-checked",this.selectBox).removeClass("lee-checkbox-checked"),g("td.lee-selected",this.selectBox).removeClass("lee-selected"),g(":checkbox",this.selectBox).each(function(){this.checked=!1}),this.trigger("clear"))},_setSelectBoxHeight:function(e){if(e){var t=this.options;this.selectBoxInner.height(t.selectBoxHeight)}},_setCss:function(e){e&&this.wrapper.addClass(e)},_setCancelable:function(e){var t=this,i=this.options;!e&&t.unselect&&(t.unselect.remove(),t.unselect=null),(e||t.unselect)&&(t.unselect=g('<div class="lee-clear"><i class="lee-icon lee-icon-close lee-clear-achor"></i></div>').hide(),t.wrapper.hover(function(){i.disabled||t.unselect.show()},function(){t.unselect.hide()}),i.disabled||i.readonly||!i.cancelable||t.wrapper.append(t.unselect),t.unselect.click(function(){t.clear()}))},_setDisabled:function(e){e?(this.options.disabled=!0,this.wrapper.addClass("lee-text-disabled"),this.inputText.attr("readonly","readonly")):(this.options.disabled=!1,this.wrapper.removeClass("lee-text-disabled"))},_setRequired:function(e){e?this.wrapper.addClass("lee-text-required"):this.wrapper.removeClass("lee-text-required")},_setReadonly:function(e){e?this.wrapper.addClass("lee-text-readonly"):this.wrapper.removeClass("lee-text-readonly")},_setWidth:function(e){var t=this.options;20<e&&(this.wrapper.css({width:e}),t.selectBoxWidth||this.selectBox.css({width:e}))},_setHeight:function(e){},_setResize:function(e){var i=this,t=this.options;if(!t.columns&&e&&g.fn.leeResizable){var n=t.selectBoxHeight?"e":"se,s,e";i.selectBox.leeResizable({handles:n,onStartResize:function(){i.resizing=!0,i.trigger("startResize")},onEndResize:function(){if(i.resizing=!1,0==i.trigger("endResize"))return!1},onStopResize:function(e,t){return!i.grid||(e.newWidth&&i.selectBox.width(e.newWidth),e.newHeight&&i.set({selectBoxHeight:e.newHeight}),i.grid.refreshSize(),i.trigger("endResize"),!1)}}),i.selectBox.append("<div class='lee-btn-nw-drop'></div>")}},findTextByValue:function(l){var o=this.options;if(null==l)return"";var e,a="";return e=this.options.grid&&this.options.grid.data?this.options.grid.data.Rows:this.data,g(e).each(function(e,t){var i=t[o.valueField],n=t[o.textField];(function(e){for(var t=l.toString().split(o.split),i=0;i<t.length;i++)if(t[i]==e&&""!=t[i])return!0;return!1})(i)&&(a+=n+o.split)}),0<a.length&&(a=a.substr(0,a.length-1)),a},findValueByText:function(n){var l=this.options;if(!n&&""==n)return"";var o="";return g(this.data).each(function(e,t){var i=t[l.valueField];(function(e){for(var t=n.toString().split(l.split),i=0;i<t.length;i++)if(t[i]==e)return!0;return!1})(t[l.textField])&&(o+=i+l.split)}),0<o.length&&(o=o.substr(0,o.length-1)),o},insertItem:function(e,t){var i=this;this.options;i.data=i.data||[],i.data.splice(t,0,e),i.setData(i.data)},addItem:function(e){this.options;this.insertItem(e,(this.data||[]).length)},_setIsTextBoxMode:function(e){this.options;e&&this.inputText.removeAttr("readonly")},_setValue:function(e,t){var i=this,n=this.options;n.isbit&&(e=e?"1":"0");var l=!0;if("init"==t&&(!(t=null),l=!!n.initIsTriggerEvent),t=n.isTextBoxMode?e:t||i.findTextByValue(e),n.tree)setTimeout(function(){n.setTextBySource?i.selectValueByTree(e):i.treeSelectInit(e)},100);else if(n.isMultiSelect){if(i._changeValue(e,t,l),null!=e){var o=e.toString().split(n.split);g("table.lee-table-checkbox :checkbox",i.selectBox).each(function(){this.checked=!1});for(var a=0;a<o.length;a++)g("table.lee-table-checkbox tr[value="+o[a]+"] :checkbox",i.selectBox).each(function(){this.checked=!0})}}else i._changeValue(e,t,!1),g("tr[value='"+e+"'] td",i.selectBox).addClass("lee-selected"),g("tr[value!='"+e+"'] td",i.selectBox).removeClass("lee-selected");n.selectBoxRenderUpdate&&n.selectBoxRenderUpdate.call(i,{selectBox:i.selectBox,value:e,text:t})},selectValue:function(e){this._setValue(e)},bulidContent:function(){var e=this.options;this.clearContent(),this.select?this.setSelect():e.tree&&this.setTree(e.tree)},reload:function(){var e=this.options;e.url?this.set("url",e.url):this.grid&&this.grid.reload()},_setUrl:function(e,i){if(e){var n=this,l=this.options;if(!l.readonly)if(!l.delayLoad||n.isAccessDelay||n.triggerLoaded){e=g.isFunction(e)?e.call(n):e;var t=g.isFunction(l.urlParms)?l.urlParms.call(n):l.urlParms;if(t)for(name in t)e+=-1==e.indexOf("?")?"?":"&",e+=name+"="+t[name];var o=g.isFunction(l.parms)?l.parms.call(n):l.parms;"application/json"==l.ajaxContentType&&"string"!=typeof o&&(o=liger.toJSON(o));var a={type:l.ajaxType,url:e,data:o,cache:!1,dataType:"json",beforeSend:l.ajaxBeforeSend,complete:l.ajaxComplete,success:function(e){var t=g.isFunction(l.dataGetter)?t=l.dataGetter.call(n,e):e;t=l.dataParmName&&t?t[l.dataParmName]:t,0!=n.trigger("beforeSetData",[t])&&(n.setData(t),n.trigger("success",[t]),g.isFunction(i)&&i(t))},error:function(e,t){n.trigger("error",[e,t])}};l.ajaxContentType&&(a.contentType=l.ajaxContentType),g.ajax(a)}else n.isAccessDelay=!0}},setUrl:function(e,t){return this._setUrl(e,t)},setParm:function(e,t){if(e){var i=this.get("parms");i||(i={}),i[e]=t,this.set("parms",i)}},clearContent:function(){var e=this.options;this&&(g("table",this.selectBox).html(""),this&&this._setSelectBoxHeight(e.selectBoxHeight))},setSelect:function(){var l=this,n=this.options;this.clearContent(),l.data=[],g("option",l.select).each(function(e){var t=g(this).val(),i=g(this).html();l.data.push({text:i,id:t});var n=g("<tr><td index='"+e+"' value='"+t+"' text='"+i+"'>"+i+"</td>");g("table.lee-table-nocheckbox",l.selectBox).append(n),g("td",n).hover(function(){g(this).addClass("lee-over").siblings("td").removeClass("lee-over")},function(){g(this).removeClass("lee-over")})}),g("td:eq("+l.select[0].selectedIndex+")",l.selectBox).each(function(){if(g(this).hasClass("lee-selected"))l.selectBox.hide();else{g(".lee-selected",l.selectBox).removeClass("lee-selected"),g(this).addClass("lee-selected"),l.select[0].selectedIndex!=g(this).attr("index")&&l.select[0].onchange&&(l.select[0].selectedIndex=g(this).attr("index"),l.select[0].onchange());var e=parseInt(g(this).attr("index"));l.select[0].selectedIndex=e,l.select.trigger("change"),l.selectBox.hide();var t=g(this).attr("value"),i=g(this).html();n.render?l.inputText.val(n.render(t,i)):l.inputText.val(i)}}),l._addClickEven()},_setData:function(e){this.setData(e)},getRowIndex:function(e){var t=this,i=this.options;if(!e)return-1;if(!t.data||!t.data.length)return-1;for(var n=0;n<t.data.length;n++){if(null!=t.data[n])if(t.data[n][i.valueField]==e)return n}return-1},getRow:function(e){var t=this,i=this.options;if(!e)return null;if(!t.data||!t.data.length)return null;for(var n=0;n<t.data.length;n++){if(null!=t.data[n])if(t.data[n][i.valueField]==e)return t.data[n]}return null},setData:function(e,t){var i=this,n=this.options;if(!i.select)if(n.selectBoxRender)n.selectBoxRender.call(i,{selectBox:i.selectBox,data:e});else{if(e&&e.length||(e=[]),i.data!=e&&(i.data=e),i.data=g.isFunction(i.data)?i.data():i.data,this.clearContent(),n.columns){i.selectBox.table.headrow=g("<tr class='lee-table-headerow'><td width='18px'></td></tr>"),i.selectBox.table.append(i.selectBox.table.headrow),i.selectBox.table.addClass("lee-box-select-grid");for(var l=0;l<n.columns.length;l++){var o=g("<td columnindex='"+l+"' columnname='"+n.columns[l].name+"'>"+n.columns[l].header+"</td>");n.columns[l].width&&o.width(n.columns[l].width),i.selectBox.table.headrow.append(o)}}var a=[];n.emptyText&&(i.emptyRow={},i.emptyRow[n.textField]=n.emptyText,i.emptyRow[n.valueField]=null!=n.emptyValue?n.emptyValue:"",e.splice(0,0,i.emptyRow));for(var r=0;r<e.length;r++){var s=e[r][n.valueField],d=e[r][n.textField],c=!!g.isFunction(n.isRowReadOnly)&&n.isRowReadOnly(e[r]);if(n.columns){a.push("<tr value='"+s+"'"),c&&a.push(" class='rowreadonly'"),a.push(">"),a.push("<td style='width:18px;'  index='"+r+"' value='"+s+"' text='"+d+"' ><input type='checkbox' /></td>");for(l=0;l<n.columns.length;l++){var u=n.columns[l].name;a.push("<td>"+e[r][u]+"</td>")}a.push("</tr>")}else{a.push("<tr value='"+s+"' text='"+d+"'");var h=[];c&&h.push(" rowreadonly "),g.isFunction(n.rowClsRender)&&h.push(n.rowClsRender(e[r])),h.length&&(a.push(" class='"),a.push(h.join("")),a.push("'")),a.push(">"),n.isShowCheckBox&&a.push("<td style='width:18px;'  index='"+r+"' value='"+s+"' text='"+d+"' ><input type='checkbox' /></td>");var p=d;p=n.renderItem?n.renderItem.call(i,{data:e[r],value:s,text:d,key:i.inputText.val()}):n.autocomplete&&n.highLight?i._highLight(d,i.inputText.val()):"<span>"+p+"</span>",a.push("<td index='"+r+"' value='"+s+"' text='"+d+"' align='left'>"+p+"</td></tr>")}}n.columns?i.selectBox.table.append(a.join("")):n.isShowCheckBox?g("table.lee-table-checkbox",i.selectBox).append(a.join("")):g("table.lee-table-nocheckbox",i.selectBox).append(a.join("")),n.addRowButton&&n.addRowButtonClick&&!i.addRowButton&&(i.addRowButton=g('<div class="lee-box-select-add"><a href="javascript:void(0)" class="link"><div class="icon"></div></a></div>'),i.addRowButton.find(".link").append(n.addRowButton).click(n.addRowButtonClick),i.selectBoxInner.after(i.addRowButton)),i.set("selectBoxHeight",n.selectBoxHeight),n.isShowCheckBox&&g.fn.leeCheckBox&&g("table input:checkbox",i.selectBox).leeCheckBox(),g(".lee-table-checkbox input:checkbox",i.selectBox).change(function(){if(this.checked&&i.hasBind("beforeSelect")){var e=null;if(null!=(e="div"==g(this).parent().get(0).tagName.toLowerCase()?g(this).parent().parent():g(this).parent())&&0==i.trigger("beforeSelect",[e.attr("value"),e.attr("text")]))return i.selectBox.slideToggle("fast"),!1}n.isMultiSelect||this.checked&&(g("input:checked",i.selectBox).not(this).each(function(){this.checked=!1,g(".lee-checkbox-checked",g(this).parent()).removeClass("lee-checkbox-checked")}),i.selectBox.slideToggle("fast")),i._checkboxUpdateValue()}),g("table.lee-table-nocheckbox td",i.selectBox).hover(function(){g(this).parent().hasClass("rowreadonly")||g(this).addClass("lee-over")},function(){g(this).removeClass("lee-over")}),i._addClickEven(),t||i.updateStyle(),i.trigger("afterShowData",[e])}},setTree:function(e){var l=this,o=this.options;this.clearContent(),l.selectBox.table.remove(),0!=e.checkbox?e.onCheck=function(){var e=l.treeManager.getChecked(),i=[],n=[];g(e).each(function(e,t){o.treeLeafOnly&&t.data.children||(i.push(t.data[o.valueField]),n.push(t.data[o.textField]))}),l._changeValue(i.join(o.split),n.join(o.split),!0)}:(e.onSelect=function(e){if(!(0==l.trigger("BeforeSelect",[e])||o.treeLeafOnly&&e.data.children)){var t=e.data[o.valueField],i=e.data[o.textField];l._changeValue(t,i,!0),l._toggleSelectBox(!0)}},e.onCancelSelect=function(e){l._changeValue("","",!0)}),e.onAfterAppend=function(e,t){if(l.treeManager){var i=null;o.initValue?i=o.initValue:""!=l.valueField.val()&&(i=l.valueField.val()),l.selectValueByTree(i)}},l.tree&&l.tree.remove(),l.tree=g("<ul></ul>"),g("div:first",l.selectBox).append(l.tree),l.innerTree=l.tree.leeTree(e),l.treeManager=l.tree.leeGetTreeManager()},getTree:function(){return this.innerTree},selectValueByTree:function(e){var t=this.options;if(null!=e){var i=this.treeSelectInit(e);this._changeValue(e,i,t.initIsTriggerEvent)}},treeSelectInit:function(e){var i=this,n=this.options;if(null!=e){var l="",o=e.toString().split(n.split);return g(o).each(function(e,t){i.treeManager.selectNode(t.toString(),!1),l+=i.treeManager.getTextByID(t),e<o.length-1&&(l+=n.split)}),l}},_getValue:function(){var e=this.options;return e.isbit?"1"==g(this.valueField).val():e.isTextBoxMode?this.inputText.val():g(this.valueField).val()},getValue:function(){return this._getValue()},getSelected:function(){return this.selected},upFocus:function(){var e=this;this.options;if(e.grid){if(!e.grid.rows||!e.grid.rows.length)return;var t=e.grid.getSelected();if(t){var i=g.inArray(t,e.grid.rows);i-1<e.grid.rows.length&&(e.grid.unselect(t),e.grid.select(e.grid.rows[i-1]))}else e.grid.select(e.grid.rows[0])}else{var n=e.selectBox.table.find("td.lee-over").attr("index");if(null==n||"0"==n)return;n=parseInt(n)-1,e.selectBox.table.find("td.lee-over").removeClass("lee-over"),e.selectBox.table.find("td[index="+n+"]").addClass("lee-over"),e._scrollAdjust(n)}},downFocus:function(){var e=this;this.options;if(e.grid){if(!e.grid.rows||!e.grid.rows.length)return;var t=e.grid.getSelected();if(t){var i=g.inArray(t,e.grid.rows);i+1<e.grid.rows.length&&(e.grid.unselect(t),e.grid.select(e.grid.rows[i+1]))}else e.grid.select(e.grid.rows[0])}else{var n=e.selectBox.table.find("td.lee-over").attr("index");if(n==e.data.length-1)return;n=null==n?0:parseInt(n)+1,e.selectBox.table.find("td.lee-over").removeClass("lee-over"),e.selectBox.table.find("td[index="+n+"]").addClass("lee-over"),e._scrollAdjust(n)}},_scrollAdjust:function(e){this.options;var t=g(".lee-box-select-inner",this.selectBox).height(),i=g(".lee-box-select-inner table",this.selectBox).height();if(!(i<=t)){parseInt(i/t);var n=i/this.data.length,l=parseInt((e+1)*n/t)+((e+1)*n%t?1:0);g(".lee-box-select-inner",this.selectBox).scrollTop((l-1)*t)}},getText:function(){return this.inputText.val()},setText:function(e){this.options.isTextBoxMode||this.inputText.val(e)},updateStyle:function(){this.options.initValue=this._getValue(),this._dataInit()},_dataInit:function(){var e=this,t=this.options,l=null;if(null!=t.initValue&&null!=t.initText&&e._changeValue(t.initValue,t.initText),null!=t.initValue){if(l=t.initValue,t.tree)l&&e.selectValueByTree(l);else if(e.data){var i=e.findTextByValue(l);e._changeValue(l,i)}}else if(""!=e.valueField.val())if(l=e.valueField.val(),t.tree)l&&e.selectValueByTree(l);else if(e.data){i=e.findTextByValue(l);e._changeValue(l,i)}t.isShowCheckBox?g(":checkbox",e.selectBox).each(function(){var i=null,n=g(this);if(null!=(i="div"==n.parent().get(0).tagName.toLowerCase()?n.parent().parent().parent():n.parent())){g(".lee-checkbox",i).removeClass("lee-checkbox-checked"),n[0].checked=!1;var e=(l||"").toString().split(t.split);g(e).each(function(e,t){null!=l&&t==i.attr("value")&&(g(".lee-checkbox",i).addClass("lee-checkbox-checked"),n[0].checked=!0)})}}):g("table tr",e.selectBox).find("td:first").each(function(){null!=l&&l==g(this).attr("value")?g(this).addClass("lee-selected"):g(this).removeClass("lee-selected")})},_changeValue:function(e,t,i){var n=this,l=this.options;n.valueField.val(e),l&&l.render?n.inputText.val(l.render(e,t)):n.inputText.val(t),n.select&&g("option",n.select).each(function(){g(this).attr("selected",g(this).attr("value")==e)}),n.selectedValue=e,n.selectedText=t,i&&n.inputText.trigger("change");var o=null;if(e&&"string"==typeof e&&-1<e.indexOf(l.split)){o=[];var a=e.split(l.split);g(a).each(function(e,t){o.push(n.getRow(t))})}else e&&(o=n.getRow(e));var r=n.textFieldID;l.gridEditParm&&(r=l.gridEditParm.column.columnname),i&&n.trigger("selected",[e,t,o,l.gridEditParm,r])},_checkboxUpdateValue:function(){var t=this.options,i="",n="";g("input:checked",this.selectBox).each(function(){var e=null;(e="div"==g(this).parent().get(0).tagName.toLowerCase()?g(this).parent().parent().parent():g(this).parent())&&(i+=e.attr("value")+t.split,n+=e.attr("text")+t.split)}),0<i.length&&(i=i.substr(0,i.length-1)),0<n.length&&(n=n.substr(0,n.length-1)),this._changeValue(i,n)},loadDetail:function(e,i){var n=this.options,t=g.isFunction(n.detailParms)?n.detailParms.call(this):n.detailParms;t[n.detailPostIdField||"id"]=e,"application/json"==n.ajaxContentType&&(t=liger.toJSON(t));var l={type:n.ajaxType,url:n.detailUrl,data:t,cache:!0,dataType:"json",beforeSend:n.ajaxBeforeSend,complete:n.ajaxComplete,success:function(e){var t=g.isFunction(n.detailDataGetter)?n.detailDataGetter(e):e;t=n.detailDataParmName?t[n.detailDataParmName]:t,i&&i(t)}};n.ajaxContentType&&(l.contentType=n.ajaxContentType),g.ajax(l)},enabledLoadDetail:function(){var e=this.options;return!(!e.detailUrl||!e.detailEnabled)},_addClickEven:function(){var a=this;this.options;g(".lee-table-nocheckbox td",a.selectBox).click(function(){var e=g(this),t=e.attr("value"),i=parseInt(g(this).attr("index")),n=a.data[i],l=e.attr("text");function o(){if(a.hasBind("beforeSelect")&&0==a.trigger("beforeSelect",[t,l,n]))return a._toggleSelectBox(!0),!1;a.selected=n,g(this).hasClass("lee-selected")?a._toggleSelectBox(!0):(g(".lee-selected",a.selectBox).removeClass("lee-selected"),e.addClass("lee-selected"),a.select&&a.select[0].selectedIndex!=i&&(a.select[0].selectedIndex=i,a.select.trigger("change")),a._toggleSelectBox(!0),a.lastInputText=l,a._changeValue(t,l,!0))}e.parent().hasClass("rowreadonly")||(a.enabledLoadDetail()?a.loadDetail(t,function(e){a.data[i]=n=e,o()}):o())})},updateSelectBoxPosition:function(){var e=this,t=this.options;if(e._setSelectBoxWidth(),t&&t.absolute){var i=g(document).height();t.alwayShowInTop||Number(e.wrapper.offset().top+1+e.wrapper.outerHeight()+e.selectBox.height())>i&&i>Number(e.selectBox.height()+1)?e.selectBox.css({left:e.wrapper.offset().left,top:e.wrapper.offset().top-1-e.selectBox.height()+(t.selectBoxPosYDiff||0)}):e.selectBox.css({left:e.wrapper.offset().left,top:e.wrapper.offset().top+1+e.wrapper.outerHeight()+(t.selectBoxPosYDiff||0)}),t.alwayShowInDown&&e.selectBox.css({left:e.wrapper.offset().left,top:e.wrapper.offset().top+1+e.wrapper.outerHeight()})}else{var n=e.wrapper.offset().top-g(window).scrollTop(),l=e.selectBox.height()+textHeight+4;n+l>g(window).height()&&l<n&&e.selectBox.css("marginTop",-1*(e.selectBox.height()+textHeight+5)+(t.selectBoxPosYDiff||0))}},_setSelectBoxWidth:function(){var e=this.options;e.selectBoxWidth?this.selectBox.width(e.selectBoxWidth):this.selectBox.css("width",this.wrapper.css("width"))},_toggleSelectBox:function(e){var t=this,i=this.options;if(t&&i){for(var n=g.leeUI.find(g.leeUI.controls.DropDown),l=0,o=n.length;l<o;l++){(a=n[l]).id!=t.id&&null!=a.selectBox.is(":visible")&&a.selectBox.is(":visible")&&a._toggleSelectBox(!0)}for(l=0,o=(n=g.leeUI.find(g.leeUI.controls.DateEditor)).length;l<o;l++){var a;(a=n[l]).id!=t.id&&null!=a.dateeditor.is(":visible")&&a.dateeditor.is(":visible")&&a.dateeditor.hide()}e?(t.wrapper.removeClass("lee-text-focus"),t.link.removeClass("reverse")):(t.link.addClass("reverse"),t.wrapper.addClass("lee-text-focus"));t.wrapper.height();if(t.boxToggling=!0,e)i.slide?t.selectBox.slideToggle("fast",function(){t.boxToggling=!1}):(t.selectBox.hide(),t.boxToggling=!1);else if(t.updateSelectBoxPosition(),i.slide)t.selectBox.slideToggle("fast",function(){if(t.boxToggling=!1,!i.isShowCheckBox&&0<g("td.lee-selected",t.selectBox).length){var e=g("td.lee-selected",t.selectBox).offset().top-t.selectBox.offset().top;g(".lee-box-select-inner",t.selectBox).animate({scrollTop:e})}});else if(t._selectBoxShow(),t.boxToggling=!1,!t.tree&&!t.grid&&!i.isShowCheckBox&&0<g("td.lee-selected",t.selectBox).length){var r=g("td.lee-selected",t.selectBox).offset().top-t.selectBox.offset().top;g(".lee-box-select-inner",t.selectBox).animate({scrollTop:r})}t.isShowed=t.selectBox.is(":visible"),t.trigger("toggle",[e]),t.trigger(e?"hide":"show")}},_selectBoxShow:function(){var e=this,t=this.options;t.readonly||(t.grid||t.tree?e.selectBox.show():e.selectBox.table.find("tr").length||t.selectBoxRender&&e.selectBoxInner.html()?e.selectBox.show():e.selectBox.hide())},_highLight:function(e,t){if(!e)return e;var i=e.indexOf(t);return-1==i?e:e.substring(0,i)+"<span class='lee-highLight'>"+t+"</span>"+e.substring(t.length+i)},_setAutocomplete:function(t){var l=this,o=this.options;t&&(o.readonly||(l.inputText.removeAttr("readonly"),l.lastInputText=l.inputText.val(),l.inputText.keyup(function(e){38!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&(this._acto&&clearTimeout(this._acto),this._acto=setTimeout(function(){if(l.lastInputText!=l.inputText.val()){var i=l.inputText.val();if(i?i=i.replace(/(^\s*)|(\s*$)/g,""):(o.initValue="",l.valueField.val("")),l.lastInputText=l.inputText.val(),g.isFunction(t))t.call(l,{key:i,show:function(){l._selectBoxShow()}});else{if(!o.autocompleteAllowEmpty&&!i)return l.clear(),void l.selectBox.hide();if(o.url)l.setParm("key",i),l.setUrl(o.url,function(){l._selectBoxShow()});else if(o.grid)l.grid.setParm("key",i),l.grid.reload();else{var n=[];g.each(o.data,function(e,t){-1!=t[o.textField].indexOf(i)&&n.push(t)}),l.setData(n,!0),l._toggleSelectBox(!1)}this._acto=null}}},100))})))}}),g(document).unbind("keydown.leeDropdown"),g(document).bind("keydown.leeDropdown",function(e){function t(){l.selectBox.is(":visible")||l._toggleSelectBox(!1),l.downFocus()}function i(){a?(l._changeValue(a[o.valueField],a[o.textField],!0),l.trigger("textBoxKeyEnter",[{rowdata:a}])):(l._changeValue(s,r.attr("text"),!0),l.selectValue(s),l.trigger("textBoxKeyEnter",[{element:r.get(0)}])),l._toggleSelectBox(!0)}var n=g("input:focus");if(n.length&&n.attr("data-dropdownid")){var l=leeUI.get(n.attr("data-dropdownid"));if(!l)return;var o=l.options;if(!l.get("keySupport"))return;if(38==e.keyCode)l.upFocus();else if(40==e.keyCode)l.hasBind("textBoxKeyDown")?l.trigger("textBoxKeyDown",[{callback:function(){t()}}]):t();else if(13==e.keyCode){if(!l.selectBox.is(":visible"))return;var a=null;l.grid&&(a=l.grid.getSelected());var r=l.selectBox.table.find("td.lee-over");if(a||r.length){var s=r.attr("value");a&&a.ID&&(s=a.ID),l.enabledLoadDetail()?l.loadDetail(s,function(e){if(!a){var t=l.getRowIndex(s);if(-1==t)return;l.data=l.data||[],l.data[t]=l.selected=e}i()}):i()}}}})}(jQuery),function(l){l.fn.leeDate=function(){return l.leeUI.run.call(this,"leeUIDate",arguments)},l.leeUIDefaults.Date={format:"yyyy-MM-dd",vFormat:"yyyy-MM-dd",showTime:!1,startDate:"",range:!1,showType:"date",cancelable:!0,theme:"#108ee9",max:"",min:""},l.leeUI.controls.Date=function(e,t){l.leeUI.controls.Date.base.constructor.call(this,e,t)},l.leeUI.controls.Date.leeExtend(l.leeUI.controls.Input,{__getType:function(){return"Date"},__idPrev:function(){return"Date"},_render:function(){var n=this,e=this.options;e.showTime&&(e.format="yyyy-MM-dd HH:mm:ss"),n.inputText=l(this.element),n.textFieldID=this.element.id,n.valueField=l('<input type="hidden"/>'),n.valueField[0].id=n.valueField[0].name=n.textFieldID+"_val",n.link=l('<div class="lee-right"><div class="lee-icon lee-ion-android-calendar popup"></div></div>'),n.wrapper=n.inputText.wrap('<div class="lee-text lee-text-date"></div>').parent(),n.wrapper.append(n.link),n.wrapper.append(n.valueField),n.valueField.attr("data-uiid",n.id),n.valueField.data("beforeText","").data("beforeValue",""),n.inputText.addClass("lee-text-field"),n.link.hover(function(){e.disabled||l(this).addClass("lee-right-hover")},function(){e.disabled||l(this).removeClass("lee-right-hover")}).mousedown(function(){e.disabled||l(this).addClass("lee-right-pressed")}).mouseup(function(){e.disabled||l(this).removeClass("lee-right-pressed")}).click(function(){if(!e.disabled)return 0!=n.trigger("beforeOpen",n)&&void n.inputText.focus()}),n.inputText.click(function(){e.disabled||n.showDate()}).blur(function(){e.disabled||n.wrapper.removeClass("lee-text-focus")}).focus(function(){e.disabled||n.wrapper.addClass("lee-text-focus")}).change(function(){n.trigger("change")});var t={elem:"#"+n.textFieldID,range:e.range,format:e.format,type:e.showType,done:function(e,t,i){n.inputText.trigger("change")}};e.min&&(t.min=e.min),e.max&&(t.max=e.max),laydate.render(t),n.set(e)},showDate:function(){this.options},dateFormat:function(e,t){var i=this.stringToDate(e);if(t=t||"yyyy-MM-dd",null==i||"NaN"==i)return null;0==i.getSeconds()&&i.setSeconds((new Date).getSeconds());var n={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"H+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};for(var l in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+l+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[l]:("00"+n[l]).substr((""+n[l]).length)));return t},stringToDate:function(e){var t=null;if(null!=(e=e.replace("T"," "))){var i=(e=e.replace(/\-/g," ").replace(/\:/g," ")).split(" ");if(2<i.length){i[1]=Number(i[1])-1;for(var n=6-i.length,l=0;l<n;l++)i.push("00")}t=new Date(i[0],i[1],i[2],i[3],i[4],i[5])}return t},_toggle:function(){},_setWidth:function(e){20<e&&this.wrapper.css({width:e})},_setCancelable:function(e){var t=this,i=this.options;!e&&t.unselect&&(t.unselect.remove(),t.unselect=null),(e||t.unselect)&&(t.unselect=l('<div class="lee-clear"><i class="lee-icon lee-icon-close lee-clear-achor"></i></div>').hide(),t.wrapper.hover(function(){i.disabled||t.unselect.show()},function(){t.unselect.hide()}),i.disabled||i.readonly||!i.cancelable||t.wrapper.append(t.unselect),t.unselect.click(function(){t._setValue(""),t.inputText.trigger("change")}))},_setValue:function(e){e&&(e=this.dateFormat(e,this.options.format)),this.inputText.val(e),this.valueField.val(e)},_getValue:function(){return this.inputText.val()},_setDisabled:function(e){e?(this.options.disabled=!0,this.wrapper.addClass("lee-text-disabled"),this.inputText.attr("readonly","readonly").attr("disabled","disabled")):(this.options.disabled=!1,this.wrapper.removeClass("lee-text-disabled"),this.inputText.removeAttr("readonly").removeAttr("disabled"))},_setRequired:function(e){e?this.wrapper.addClass("lee-text-required"):this.wrapper.removeClass("lee-text-required")}})}(jQuery),function(a){a.fn.leeLookup=function(e){return a.leeUI.run.call(this,"leeUILookup",arguments)},a.leeUIDefaults.Lookup={helpID:"",modelID:"",valueField:"Code",textField:"Name",codeField:"",returnFields:[],mapFields:[],dgHeight:"380",title:"请选择",dgWidth:"550",type:"",nameSwitch:!0,dockType:"",isTree:"",childOnly:!1,isMul:!1,checkbox:!1,isMulGrid:!1,isAuto:!0,url:"",cancelable:!0,render:null,split:",",condition:null,onBeforeOpen:null,textmode:!1},a.leeUI.controls.Lookup=function(e,t){a.leeUI.controls.Popup.base.constructor.call(this,e,t)},a.leeUI.controls.Lookup.leeExtend(a.leeUI.controls.Input,{__getType:function(){return"Lookup"},_init:function(){a.leeUI.controls.Lookup.base._init.call(this)},_render:function(){var n=this,l=this.options;n.inputText=null,"input"==this.element.tagName.toLowerCase()&&(n.inputText=a(this.element),n.textFieldID=this.element.id,a(this.element).attr("readonly")&&(l.disabled=!0)),n.defer=null,n.valueField=a('<input type="hidden"/>'),n.valueField[0].id=n.valueField[0].name=n.textFieldID+"_val",n.link=a('<div class="lee-right"><div class="lee-icon lee-ion-android-more-horizontal popup"></div></div>'),n.wrapper=n.inputText.wrap('<div class="lee-text lee-text-popup"></div>').parent(),n.wrapper.append(n.link),n.wrapper.append(n.valueField),n.valueField.attr("data-uiid",n.id),n.valueField.data("beforeText","").data("beforeValue",""),n.inputText.addClass("lee-text-field"),l.nameSwitch||n.inputText.attr("readonly","readonly"),n.link.hover(function(){l.disabled||a(this).addClass("lee-right-hover")},function(){l.disabled||a(this).removeClass("lee-right-hover")}).mousedown(function(){l.disabled||a(this).addClass("lee-right-pressed")}).mouseup(function(){l.disabled||a(this).removeClass("lee-right-pressed")}).click(function(){if(!l.disabled)return 0!=n.trigger("beforeOpen",n)&&void n.openLookup()}),n.inputText.data("otext",""),n.inputText.data("ovalue",""),n.inputText.click(function(){l.disabled}).blur(function(){l.disabled||n.wrapper.removeClass("lee-text-focus")}).focus(function(){l.disabled||n.wrapper.addClass("lee-text-focus")}),n.inputText.bind("keydown",function(e){"13"==e.keyCode&&n.inputText.trigger("change")}),n.inputText.on("change",function(e){if(l.nameSwitch){var t=n.valueField.data("beforeText"),i=n.valueField.data("beforeValue");n.onTextSearch.call(n,e,t,i)}}),n.wrapper.hover(function(){l.disabled||n.wrapper.addClass("lee-text-over")},function(){l.disabled||n.wrapper.removeClass("lee-text-over")}),n.set(l)},setAchorLoading:function(){this.options;this.link.addClass("loading"),this.link.find(".popup").addClass("lee-ion-load-d")},setAchorNormal:function(){this.options;this.link.removeClass("loading"),this.link.find(".popup").removeClass("lee-ion-load-d")},onTextSearch:function(e,t,i){var n=this,l=this.options;if(""==n.inputText.val()){var o={};return n.setValue("",""),o[l.textField]=o[l.valueField]="",void n.confirmSelect([o])}n.inputText.val()!=t&&(n.defer=a.Deferred(),n.getQueryResult(n.inputText.val()))},getDefer:function(){return this.defer?this.defer.promise():null},getQueryResult:function(n){if(!(l=this).query){l.query=!0;var l=this,o=this.options;if(o.service){l.setAchorLoading();var e="";o.getFilter&&(e=o.getFilter()),o.service.getQueryHelpSwitch(o.helpID,n,o.codeField,o.textField,e,!1).done(function(e){if(e.res){var t=e.data;if(1<t.length||0==t.length){if(o.textmode){var i={};i[o.textField]=i[o.valueField]=n,l.inputText.val(n),l.valueField.val(n),l.confirmSelect([i])}o.textmode&&0==t.length?l.query=!1:(l.setKeyword(n),l.openLookup())}else l.confirmSelect(t),l.query=!1}else l.query=!1;l.defer&&(l.defer.resolve(e),l.defer=null)}).fail(function(e){console.log("失败")}).always(function(){l.setAchorNormal()})}}},destroy:function(){this.wrapper&&this.wrapper.remove(),a.leeUI.remove(this)},clear:function(){var e=this,t=this.options;e.inputText.val(""),e.valueField.val(""),e.curData=null,e.trigger("valuechange",{});var i=e.textFieldID;t.gridEditParm&&(i=t.gridEditParm.column.columnname),e.trigger("clearValue",[e,t,{},i])},getLookUpContext:function(){return this.getContext().document.getElementById("lookupwindow").contentWindow.lookupHelper},getContext:function(){return window.parent&&window.parent.$&&window.parent.$.leeDialog?window.parent:window},setKeyword:function(e){this.keyword=e},getKeyword:function(e){return this.keyword},dealcolse:function(){var e=this,t=this.options;e.setKeyword(""),e.inputText.data("otext")!==e.inputText.val()&&(t.textmode||e.inputText.val(e.inputText.data("otext"))),e.query=!1},openLookup:function(){var n=this,i=this.options;if(!n.isopen){n.isopen=!0;var l=this.getContext().$.leeDialog.open({title:i.title,name:"lookupwindow",isHidden:!1,showMax:!0,width:i.dgWidth,slide:!1,height:i.dgHeight,onclose:function(){n.dealcolse(),n.isopen=!1},url:i.url+i.helpID,onLoaded:function(){var e=n.getLookUpContext(),t=i.getFilter();t&&e.setFilter(t),e.init(),e.setOptions({textField:i.textField,codeField:i.codeField,isMul:i.isMul||i.isMulGrid,isChildOnly:i.isChildOnly,async:i.async,keyword:n.keyword,filter:i.getFilter(),params:i.params})},buttons:[{id:"dialog_lookup_ok",text:"选择",cls:"lee-btn-primary lee-dialog-btn-ok",onclick:function(e,t){var i=n.getLookUpContext().getReturnValue();i?(n.confirmSelect(i),l.close(),n.dealcolse(),n.isopen=!1,n.setKeyword("")):!1===i||n.getContext().leeUI.Error("请选中要操作的数据！")}},{text:"取消",cls:"lee-dialog-btn-cancel ",onclick:function(e,t){n.dealcolse(),n.isopen=!1,l.close()}}]})}},confirmSelect:function(e){var t=this,i=this.options,n=t.textFieldID;if(i.gridEditParm&&(n=i.gridEditParm.column.columnname),i.isMul&&!i.gridEditParm){var l=[],o=[];for(var a in e)o.push(e[a][i.textField]),l.push(e[a][i.valueField]);t.setValue(l.join(";"),o.join(";"))}else{var r=e[0][i.valueField],s=e[0][i.textField];t.setValue(r,s)}t.curData=e,t.trigger("change"),t.trigger("confirmSelect",[t,i,e,n])},getCurData:function(){return this.curData},_setCancelable:function(e){var t=this,i=this.options;!e&&t.unselect&&(t.unselect.remove(),t.unselect=null),(e||t.unselect)&&(t.unselect=a('<div class="lee-clear"><i class="lee-icon lee-icon-close lee-clear-achor"></i></div>').hide(),t.wrapper.hover(function(){i.disabled||t.unselect.show()},function(){t.unselect.hide()}),i.disabled||i.readonly||!i.cancelable||t.wrapper.append(t.unselect),t.unselect.click(function(){t.clear()}))},_setDisabled:function(e){e?(this.options.disabled=!0,this.wrapper.addClass("lee-text-disabled"),this.inputText.attr("readonly","readonly")):(this.options.disabled=!1,this.wrapper.removeClass("lee-text-disabled"),this.options.nameSwitch&&this.inputText.removeAttr("readonly"))},_setRequired:function(e){e?this.wrapper.addClass("lee-text-required"):this.wrapper.removeClass("lee-text-required")},_setWidth:function(e){20<e&&this.wrapper.css({width:e})},_setHeight:function(e){10<e&&this.wrapper.height(e)},_getText:function(){return a(this.inputText).val()},_getValue:function(){return a(this.valueField).val()},getValue:function(){return this._getValue()},getText:function(){return this._getText()},setValue:function(e,t){var i=this;this.options;if(2<=arguments.length)return i.setValue(e),i.setText(t),i.inputText.data("otext",t),void i.inputText.data("ovalue",e);i.valueField.val(e)},setText:function(e){var t=this.options;t.render?this.inputText.val(t.render(e)):this.inputText.val(e)}})}(jQuery),function(u){u.fn.leePopup=function(e){return u.leeUI.run.call(this,"leeUIPopup",arguments)},u.leeUIDefaults.Popup={valueFieldID:null,onButtonClick:null,nullText:null,disabled:!1,cancelable:!0,width:null,heigth:null,onValuechange:null,render:null,split:";",data:[],condition:null,valueField:"id",textField:"text",parms:null},u.leeUI.controls.Popup=function(e,t){u.leeUI.controls.Popup.base.constructor.call(this,e,t)},u.leeUI.controls.Popup.leeExtend(u.leeUI.controls.Input,{__getType:function(){return"Popup"},_init:function(){u.leeUI.controls.Popup.base._init.call(this)},_render:function(){var e=this,t=this.options;e.inputText=null,"input"==this.element.tagName.toLowerCase()&&(this.element.readOnly=!0,e.inputText=u(this.element),e.textFieldID=this.element.id),null==e.inputText[0].name&&(e.inputText[0].name=e.textFieldID),e.valueField=null,t.valueFieldID?(e.valueField=u("#"+t.valueFieldID+":input"),0==e.valueField.length&&(e.valueField=u('<input type="hidden"/>')),null==e.valueField[0].name&&(e.valueField[0].id=e.valueField[0].name=t.valueFieldID)):(e.valueField=u('<input type="hidden"/>'),e.valueField[0].id=e.valueField[0].name=e.textFieldID+"_val"),null==e.valueField[0].name&&(e.valueField[0].name=e.valueField[0].id),e.link=u('<div class="lee-right"><div class="lee-icon lee-icon-search popup"></div></div>'),e.wrapper=e.inputText.wrap('<div class="lee-text lee-text-popup"></div>').parent(),e.wrapper.append(e.link),e.wrapper.append(e.valueField),e.valueField.attr("data-ligerid",e.id),e.inputText.addClass("lee-text-field"),e.link.hover(function(){t.disabled||u(this).addClass("lee-right-hover")},function(){t.disabled||u(this).removeClass("lee-right-hover")}).mousedown(function(){t.disabled||u(this).addClass("lee-right-pressed")}).mouseup(function(){t.disabled||u(this).removeClass("lee-right-pressed")}).click(function(){if(!t.disabled)return 0!=e.trigger("buttonClick",e)&&void 0}),e.inputText.click(function(){t.disabled}).blur(function(){t.disabled||e.wrapper.removeClass("lee-text-focus")}).focus(function(){t.disabled||e.wrapper.addClass("lee-text-focus")}),e.wrapper.hover(function(){t.disabled||e.wrapper.addClass("lee-text-over")},function(){t.disabled||e.wrapper.removeClass("lee-text-over")}),e.set(t)},destroy:function(){this.wrapper&&this.wrapper.remove(),this.options=null,u.leeUI.remove(this)},clear:function(){this.options;""!=this.getValue()&&(this.inputText.val(""),this.valueField.val(""),this.trigger("valuechange",{}))},_setCancelable:function(e){var t=this,i=this.options;!e&&t.unselect&&(t.unselect.remove(),t.unselect=null),(e||t.unselect)&&(t.unselect=u('<div class="lee-clear"><i class="lee-icon lee-icon-close lee-clear-achor"></i></div>').hide(),t.wrapper.hover(function(){t.unselect.show()},function(){t.unselect.hide()}),i.disabled||i.readonly||!i.cancelable||t.wrapper.append(t.unselect),t.unselect.click(function(){t.clear()}))},_setDisabled:function(e){e?this.wrapper.addClass("lee-text-disabled"):this.wrapper.removeClass("lee-text-disabled")},_setWidth:function(e){20<e&&this.wrapper.css({width:e})},_setHeight:function(e){10<e&&this.wrapper.height(e)},getData:function(){var i=this.options,n=[],e=u(this.valueField).val(),t=u(this.inputText).val(),l=e?e.split(i.split):null,o=t?t.split(i.split):null;return u(l).each(function(e){var t={};t[i.textField]=o[e],t[i.valueField]=l[e],n.push(t)}),n},_getText:function(){return u(this.inputText).val()},_getValue:function(){return u(this.valueField).val()},getValue:function(){return this._getValue()},getText:function(){return this._getText()},setValue:function(e,t){this.options;if(2<=arguments.length)return this.setValue(e),void this.setText(t);this.valueField.val(e)},setText:function(e){var t=this.options;t.render?this.inputText.val(t.render(e)):this.inputText.val(e)},addValue:function(e,t){var i=this,n=this.options;if(e){var l=i.getValue(),o=i.getText();if(l){for(var a=[],r=[],s=l.split(n.split),d=(e=e.split(n.split),t=t.split(n.split),0),c=e.length;d<c;d++)-1==u.inArray(e[d],s)&&(a.push(e[d]),r.push(t[d]));a.length&&(i.setValue(l+n.split+a.join(n.split)),i.setText(o+n.split+r.join(n.split)))}else i.setValue(e),i.setText(t)}},removeValue:function(e,t){var i=this.options;if(e){var n=this.getValue(),l=this.getText();if(n){for(var o=n.split(i.split),a=l.split(i.split),r=0,s=-1,d=(e=e.split(i.split)).length;r<d;r++)-1!=(s=u.inArray(e[r],o))&&(o.splice(s,1),a.splice(s,1));this.setValue(o.join(i.split)),this.setText(a.join(i.split))}}}}),u.leeUI.PopUpHelp=function(e){e.url,e.textField,e.valueField,e.title;return function(){var n,l=this,e=u("<div></div>");u.leeDialog.open({title:"选择数据源",width:"600",height:"400",target:e,isResize:!0,onContentHeightChange:function(e){},onStopResize:function(){},buttons:[{text:"选择",cls:"lee-btn-primary lee-dialog-btn-ok",onclick:function(e,t){var i=n.getSelected();i?(l.setText(i.name),l.setValue(i.name),l.trigger("valuechange",i),t.close()):leeUI.Error("请选中要操作的数据！")}},{text:"取消",cls:"lee-dialog-btn-cancel ",onclick:function(e,t){t.close()}}]}),n=e.leeGrid({columns:[{display:"编号",name:"code",align:"left",width:100,minWidth:60},{display:"名称",name:"name",align:"left",width:100,minWidth:60}],alternatingRow:!1,method:"get",url:"data/datamodel.json",dataAction:"server",usePager:!0,pageSize:20,inWindow:!1,height:"100%",rownumbers:!0,rowHeight:30})}},u.leeUI.PopUp={},u.leeUI.PopUp.LookupInjector=function(e){this.options=e,this.init()},u.leeUI.PopUp.LookupInjector.prototype={init:function(){var e=this.options,t=this;this.wrap=u("<div style='position:absolute;top:1px;left:1px;bottom:1px;right:1px;'></div>"),this.search=u("<div class='lee-text'></div>"),this.grid=u("<div class='helpgrid' ></div>"),e.filter&&(this.$searchwrap=u('<div class="lee-search-wrap" style="float:none;margin:5px;"><input style="width:100%;" class="lee-search-words" type="text"   placeholder="请输入查询关键字"><button class="search lee-ion-search" type="button" style="position: absolute;right: 0;"></button></div>'),this.wrap.append(this.$searchwrap),this.$input=u(this.$searchwrap.find("input")),this.$btn=u(this.$searchwrap.find("button")),this.$btn.click(function(){t.gridm.loadData(!0)}),this.$input.keydown(function(e){13==e.keyCode&&t.gridm.loadData(!0)})),this.wrap.append(this.grid)},getParams:function(){var e=[];return e.push({name:"keyword",value:this.$input.val()}),e},initUI:function(){var e=this.options;this.gridm?this.gridm.loadData(!0):this.gridm=this.grid.leeGrid({columns:e.column,alternatingRow:!1,method:e.method,url:e.url,dataAction:"server",usePager:!0,pageSize:50,inWindow:!1,height:"100%",parms:u.proxy(this.getParams,this),rownumbers:!0,rowHeight:30,checkbox:e.checkbox||!1})},clearSearch:function(){},getOptions:function(){return this.options},clear:function(){},getRenderDom:function(){return this.wrap},onResize:function(){},onConfirm:function(e,t,i){var n=i.options,l=i.gridm.getSelectedRows();if(0<l.length){if(n.checkbox);else{var o=e.getValue();e.setText(l[0][n.textfield||"text"]),e.setValue(l[0][n.valuefield||"id"]),o!==l[0][n.valuefield||"id"]&&e.trigger("valuechange",l[0])}return!0}return leeUI.Warning("没有选中记录"),!1}},u.leeUI.PopUp.Lookup=function(n){var e=n.getOptions(),t=e.title||"请选择";return function(){var i=this;u.leeDialog.open({title:t,width:e.width||600,height:e.height||400,target:n.getRenderDom(),isResize:!0,overflow:"hidden",onContentHeightChange:function(e){n.onResize.call(this,i)},onStopResize:function(){n.onResize.call(this,i)},buttons:[{text:"确定",cls:"lee-btn-primary lee-dialog-btn-ok",onclick:function(e,t){n.onConfirm.call(this,i,t,n)&&t.close()}},{text:"取消",cls:"lee-dialog-btn-cancel ",onclick:function(e,t){t.close()}}]}),n.initUI()}}}(jQuery),function(i){i.fn.leeRadio=function(){return i.leeUI.run.call(this,"leeUIRadio",arguments)},i.fn.leeUIGetRadioManager=function(){return i.leeUI.run.call(this,"leeUIGetRadioManager",arguments)},i.leeUIDefaults.Radio={disabled:!1},i.leeUI.controls.Radio=function(e,t){i.leeUI.controls.Radio.base.constructor.call(this,e,t)},i.leeUI.controls.Radio.leeExtend(i.leeUI.controls.Input,{__getType:function(){return"Radio"},__idPrev:function(){return"Radio"},_extendMethods:function(){return[]},_render:function(){var e=this,t=this.options;e.input=i(this.element),e.link=i('<a href="javascript:void(0)" class="lee-radio"></a>'),e.wrapper=e.input.addClass("lee-hidden").css("display","none").wrap('<div class="lee-radio-wrapper"></div>').parent(),e.wrapper.prepend(e.link),e.input.change(function(){return this.checked?e.link.addClass("lee-radio-checked"):e.link.removeClass("lee-radio-checked"),!0}),e.link.click(function(){e._doclick()}),e.wrapper.hover(function(){t.disabled||i(this).addClass("lee-over")},function(){i(this).removeClass("lee-over")}),this.element.checked&&e.link.addClass("lee-radio-checked"),this.element.id&&i("label[for="+this.element.id+"]").click(function(){e._doclick()}),e.set(t)},setValue:function(e){this.options;e?(this.input[0].checked=!0,this.link.addClass("lee-radio-checked")):(this.input[0].checked=!1,this.link.removeClass("lee-radio-checked"))},getValue:function(){return this.input[0].checked},setEnabled:function(){this.input.attr("disabled",!1),this.wrapper.removeClass("l-disabled"),this.options.disabled=!1},setDisabled:function(){this.input.attr("disabled",!0),this.wrapper.addClass("l-disabled"),this.options.disabled=!0},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("l-disabled"),this.options.disabled=!0),this.input[0].checked?this.link.addClass("lee-checkbox-checked"):this.link.removeClass("lee-checkbox-checked")},_doclick:function(){var e,t=this;this.options;return t.input.attr("disabled")||(t.input.trigger("click").trigger("change"),e=t.input[0].form?t.input[0].form:document,i("input:radio[name="+t.input[0].name+"]",e).not(t.input).trigger("change")),!1}})}(jQuery),function(c){c.fn.leeRadioList=function(e){return c.leeUI.run.call(this,"leeUIRadioList",arguments)},c.leeUIDefaults.RadioList={rowSize:4,valueField:"id",textField:"text",valueFieldID:null,name:null,data:null,parms:null,url:null,urlParms:null,ajaxContentType:null,ajaxType:"post",onSuccess:null,onError:null,onSelect:null,css:null,value:null,valueFieldCssClass:null},c.leeUI.controls.RadioList=function(e,t){c.leeUI.controls.RadioList.base.constructor.call(this,e,t)},c.leeUI.controls.RadioList.leeExtend(c.leeUI.controls.Input,{__getType:function(){return"RadioList"},_extendMethods:function(){return[]},_init:function(){c.leeUI.controls.RadioList.base._init.call(this)},_render:function(){var e=this,t=this.options;e.data=t.data,e.valueField=null,c(this.element).is(":hidden")||c(this.element).is(":text")?(e.valueField=c(this.element),c(this.element).is(":text")&&e.valueField.hide()):t.valueFieldID?(e.valueField=c("#"+t.valueFieldID+":input,[name="+t.valueFieldID+"]:input"),0==e.valueField.length&&(e.valueField=c('<input type="hidden"/>')),e.valueField[0].id=e.valueField[0].name=t.valueFieldID):(e.valueField=c('<input type="hidden"/>'),e.valueField[0].id=e.valueField[0].name=e.id+"_val"),null==e.valueField[0].name&&(e.valueField[0].name=e.valueField[0].id),t.valueFieldCssClass&&e.valueField.addClass(t.valueFieldCssClass),e.valueField.attr("data-leeid",e.id),c(this.element).is(":hidden")||c(this.element).is(":text")?e.radioList=c("<div></div>").insertBefore(this.element):e.radioList=c(this.element),e.radioList.html('<div class="lee-radiolist-inner"><table cellpadding="0" cellspacing="0" border="0" class="lee-radiolist-table"></table></div>').addClass("lee-radiolist").append(e.valueField),e.radioList.table=c("table:first",e.radioList),t.value=e.valueField.val()||t.value,e.set(t),e._addClickEven()},destroy:function(){this.radioList&&this.radioList.remove(),this.options=null,c.leeUI.remove(this)},clear:function(){this._changeValue(""),this.trigger("clear")},_setCss:function(e){e&&this.radioList.addClass(e)},_setDisabled:function(e){e?(this.radioList.addClass("lee-radiolist-disabled"),c("input:radio",this.radioList).attr("disabled",!0)):(this.radioList.removeClass("lee-radiolist-disabled"),c("input:radio",this.radioList).removeAttr("disabled"))},_setRequired:function(e){},_setWidth:function(e){this.radioList.width(e)},_setHeight:function(e){this.radioList.height(e)},indexOf:function(e){var t=this.options;if(!this.data)return-1;for(var i=0,n=this.data.length;i<n;i++)if("object"==typeof e){if(this.data[i]==e)return i}else if(this.data[i][t.valueField].toString()==e.toString())return i;return-1},removeItems:function(e){var n=this;n.data&&(c(e).each(function(e,t){var i=n.indexOf(t);-1!=i&&n.data.splice(i,1)}),n.refresh())},removeItem:function(e){if(this.data){var t=this.indexOf(e);-1!=t&&(this.data.splice(t,1),this.refresh())}},insertItem:function(e,t){this.data||(this.data=[]),this.data.splice(t,0,e),this.refresh()},addItems:function(e){var i=this;i.data||(i.data=[]),c(e).each(function(e,t){i.data.push(t)}),i.refresh()},addItem:function(e){this.data||(this.data=[]),this.data.push(e),this.refresh()},_setValue:function(e){var t=this.options;this.valueField.val(e),t.value=e,this._dataInit()},setValue:function(e){this._setValue(e)},_setUrl:function(e){var i=this,t=this.options;if(e){var n=c.isFunction(t.urlParms)?t.urlParms.call(i):t.urlParms;if(n)for(name in n)e+=-1==e.indexOf("?")?"?":"&",e+=name+"="+n[name];var l=c.isFunction(t.parms)?t.parms():t.parms;"application/json"==t.ajaxContentType&&"string"!=typeof l&&(l=liger.toJSON(l)),c.ajax({type:"post",url:e,data:l,cache:!1,dataType:"json",contentType:t.ajaxContentType,success:function(e){i.setData(e),i.trigger("success",[e])},error:function(e,t){i.trigger("error",[e,t])}})}},setUrl:function(e){return this._setUrl(e)},setParm:function(e,t){if(e){var i=this.get("parms");i||(i={}),i[e]=t,this.set("parms",i)}},clearContent:function(){this.options;c("table",this.radioList).html("")},_setData:function(e){this.setData(e)},setData:function(e){this.options;e&&e.length&&(this.data=e,this.refresh(),this.updateStyle())},refresh:function(){var e=this.options,t=this.data;if(this.clearContent(),t){for(var i=[],n=e.rowSize,l=!1,o=e.name||this.id,a=0;a<t.length;a++){var r=t[a][e.valueField],s=t[a][e.textField],d=this.id+"-"+a;a%n==0&&(l&&i.push("</tr>"),i.push("<tr>"),l=!0),i.push("<td><input type='radio' name='"+o+"' value='"+r+"' id='"+d+"'/><label for='"+d+"'>"+s+"</label></td>")}l&&i.push("</tr>"),this.radioList.table.append(i.join("")),c("input[type='radio']",this.radioList).leeRadio()}},_getValue:function(){var e=this.options.name||this.id;return c('input:radio[name="'+e+'"]:checked').val()},getValue:function(){var e=this._getValue();return e||(e=""),e},updateStyle:function(){var t=this;this.options;t._dataInit(),c(":radio",t.radioList).change(function(){var e=t.getValue();t.trigger("select",[{value:e}])})},_dataInit:function(){var e=this.options,t=e.name||this.id,i=this.valueField.val()||this._getValue()||e.value;c("input:radio[name='"+t+"']",this.radioList).each(function(){c(this).leeUI().setValue(this.checked=this.value==i)})},_changeValue:function(e){var t=this,i=this.options.name||t.id;c("input:radio[name='"+i+"']",t.radioList).each(function(){this.checked=this.value==e}),t.valueField.val(e),t.selectedValue=e,t.trigger("changeValue",[e])},_addClickEven:function(){var i=this;this.options;i.radioList.click(function(e){var t=i.getValue();t&&(i.trigger("changeValue",[t]),i.valueField.val(t))})}})}(jQuery),function(n){n.fn.leeSpinner=function(){return n.leeUI.run.call(this,"leeUISpinner",arguments)},n.fn.leeGetSpinnerManager=function(){return n.leeUI.run.call(this,"leeUIGetSpinnerManager",arguments)},n.leeUIDefaults.Spinner={type:"int",isNegative:!0,decimalplace:2,step:.1,interval:50,value:null,onChangeValue:!1,minValue:null,maxValue:null,disabled:!1,inline:!1,readonly:!1},n.leeUI.controls.Spinner=function(e,t){n.leeUI.controls.Spinner.base.constructor.call(this,e,t)},n.leeUI.controls.Spinner.leeExtend(n.leeUI.controls.Input,{__getType:function(){return"Spinner"},__idPrev:function(){return"Spinner"},_extendMethods:function(){return{}},_init:function(){n.leeUI.controls.Spinner.base._init.call(this);var e=this.options;"float"==e.type?e.interval=50:("int"==e.type||"time"==e.type||(e.type="int"),e.step=1,e.interval=100)},_render:function(){var t=this,i=this.options;t.interval=null,t.inputText=null,t.value=null,t.textFieldID="","input"==this.element.tagName.toLowerCase()&&this.element.type&&"text"==this.element.type?(t.inputText=n(this.element),this.element.id&&(t.textFieldID=this.element.id)):(t.inputText=n('<input type="text"/>'),t.inputText.appendTo(n(this.element))),""==t.textFieldID&&i.textFieldID&&(t.textFieldID=i.textFieldID),t.link=n('<div class="lee-right"><div class="lee-spinner-up lee-icon lee-angle-up"></div><div class="lee-spinner-split"></div><div class="lee-spinner-down  lee-icon lee-angle-down"></div></div>'),t.wrapper=t.inputText.wrap('<div class="lee-text lee-text-spinner"></div>').parent(),t.wrapper.append(t.link).after(t.selectBox).after(t.valueField),t.link.up=n(".lee-spinner-up",t.link),t.link.down=n(".lee-spinner-down",t.link),t.inputText.addClass("lee-text-field"),i.disabled&&t.wrapper.addClass("lee-text-disabled"),t._isVerify(t.inputText.val())||(t.value=t._getDefaultValue(),t._showValue(t.value)),t.inputText.on("keydown.spinner",function(e){e.which;i.disabled||(38==e.which?(t._uping.call(t),n(document).bind("selectstart.spinner",function(){return!1})):40==e.which&&(t._downing.call(t),n(document).bind("selectstart.spinner",function(){return!1})))}).on("keyup.spinner",function(e){t.inputText.trigger("change").focus()}),t.link.up.hover(function(){i.disabled||n(this).addClass("lee-spinner-up-over")},function(){clearInterval(t.interval),n(document).unbind("selectstart.spinner"),n(this).removeClass("lee-spinner-up-over")}).mousedown(function(){i.disabled||(t._uping.call(t),t.interval=setInterval(function(){t._uping.call(t)},i.interval),n(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(t.interval),t.inputText.trigger("change").focus(),n(document).unbind("selectstart.spinner")}),t.link.down.hover(function(){i.disabled||n(this).addClass("lee-spinner-down-over")},function(){clearInterval(t.interval),n(document).unbind("selectstart.spinner"),n(this).removeClass("lee-spinner-down-over")}).mousedown(function(){i.disabled||(t.interval=setInterval(function(){t._downing.call(t)},i.interval),n(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(t.interval),t.inputText.trigger("change").focus(),n(document).unbind("selectstart.spinner")}),t.inputText.change(function(){var e=t.inputText.val();t.value=t._getVerifyValue(e),t.trigger("changeValue",[t.value]),t._showValue(t.value)}).blur(function(){t.wrapper.removeClass("lee-text-focus")}).focus(function(){t.wrapper.addClass("lee-text-focus")}),t.wrapper.hover(function(){i.disabled||t.wrapper.addClass("lee-text-over")},function(){t.wrapper.removeClass("lee-text-over")}),t.set(i)},_setValue:function(e){null!=e&&this.inputText.val(e)},_setWidth:function(e){},_setInline:function(e){e&&this.wrapper.css({display:"inline-block"})},_setHeight:function(e){10<e&&(this.wrapper.height(e),this.inputText.height(e-2),this.link.height(e-4))},_setDisabled:function(e){this.options.disabled=!!e,e?(this.inputText.attr("readonly","readonly"),this.wrapper.addClass("lee-text-disabled")):(this.inputText.removeAttr("readonly"),this.wrapper.removeClass("lee-text-disabled"))},_showValue:function(e){var t=this.options;e&&"NaN"!=e||(e=0),"float"==t.type&&(e=parseFloat(e).toFixed(t.decimalplace)),this.inputText.val(e)},_setValue:function(e){this._showValue(e)},setValue:function(e){this._showValue(e)},getValue:function(){return this.inputText.val()},_round:function(e,t){this.options;for(var i=1;0<t;i*=10,t--);for(;t<0;i/=10,t++);return Math.round(e*i)/i},_isInt:function(e){return!!(this.options.isNegative?/^-?\d+$/:/^\d+$/).test(e)&&parseFloat(e)==e},_isFloat:function(e){return!!(this.options.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/).test(e)&&parseFloat(e)==e},_isTime:function(e){this.options;var t=e.match(/^(\d{1,2}):(\d{1,2})$/);return null!=t&&!(24<t[1]||60<t[2])},_isVerify:function(e){var t=this.options;if("float"==t.type){if(!this._isFloat(e))return!1;var i=parseFloat(e);return!(null!=t.minValue&&t.minValue>i)&&!(null!=t.maxValue&&t.maxValue<i)}if("int"!=t.type)return"time"==t.type&&this._isTime(e);if(!this._isInt(e))return!1;i=parseInt(e);return!(null!=t.minValue&&t.minValue>i)&&!(null!=t.maxValue&&t.maxValue<i)},_getVerifyValue:function(e){var t=this.options,i=null;return"float"==t.type?i=this._round(e,t.decimalplace):"int"==t.type?i=parseInt(e):"time"==t.type&&(i=e),this._isVerify(i)?i:this.value},_isOverValue:function(e){var t=this.options;return null!=t.minValue&&t.minValue>e||null!=t.maxValue&&t.maxValue<e},_getDefaultValue:function(){var e=this.options;return"float"==e.type||"int"==e.type?0:"time"==e.type?"00:00":void 0},_addValue:function(e){this.options;var t=this.inputText.val();t=parseFloat(t)+e,this._isOverValue(t)||(this._showValue(t),this.inputText.trigger("change"))},_addTime:function(e){this.options;var t=this.inputText.val(),i=t.match(/^(\d{1,2}):(\d{1,2})$/);newminute=parseInt(i[2])+e,newminute<10&&(newminute="0"+newminute),t=i[1]+":"+newminute,this._isOverValue(t)||(this._showValue(t),this.inputText.trigger("change"))},_uping:function(){var e=this.options;"float"==e.type||"int"==e.type?this._addValue(e.step):"time"==e.type&&this._addTime(e.step)},_downing:function(){var e=this.options;"float"==e.type||"int"==e.type?this._addValue(-1*e.step):"time"==e.type&&this._addTime(-1*e.step)},_isDateTime:function(e){this.options;var t=e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(null==t)return!1;var i=new Date(t[1],t[3]-1,t[4]);return"NaN"!=i&&(i.getFullYear()==t[1]&&i.getMonth()+1==t[3]&&i.getDate()==t[4])},_isLongDateTime:function(e){this.options;var t=e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/);if(null==t)return!1;var i=new Date(t[1],t[3]-1,t[4],t[5],t[6]);return"NaN"!=i&&(i.getFullYear()==t[1]&&i.getMonth()+1==t[3]&&i.getDate()==t[4]&&i.getHours()==t[5]&&i.getMinutes()==t[6])}})}(jQuery),$.leeUIDefaults.Grid={title:null,width:"auto",height:"auto",columnWidth:null,resizable:!0,url:!1,urlParms:null,data:null,usePager:!0,hideLoadButton:!1,pagerRender:null,page:1,pageSize:100,pageSizeOptions:[10,20,30,40,50],parms:[],columns:[],minColToggle:1,dataType:"server",dataAction:"server",showTableToggleBtn:!1,switchPageSizeApplyComboBox:!0,allowAdjustColWidth:!0,checkbox:!1,isSingleCheck:!1,allowHideColumn:!0,enabledEdit:!1,isScroll:!0,dateFormat:"yyyy-MM-dd",inWindow:!0,statusName:"__status",method:"post",async:!0,fixedCellHeight:!0,heightDiff:0,cssClass:null,noborder:null,root:"Rows",record:"Total",pageParmName:"page",pagesizeParmName:"pagesize",sortnameParmName:"sortname",sortorderParmName:"sortorder",allowUnSelectRow:!1,alternatingRow:!1,mouseoverRowCssClass:"lee-grid-row-over",enabledSort:!0,rowClsRender:null,rowAttrRender:null,groupColumnName:null,groupColumnDisplay:"分组",groupRender:null,totalRender:null,delayLoad:!1,where:null,selectRowButtonOnly:!1,selectable:!0,whenRClickToSelect:!1,contentType:null,checkboxColWidth:27,detailColWidth:29,clickToEdit:!0,detailToEdit:!1,onEndEdit:null,minColumnWidth:80,tree:null,isChecked:null,isSelected:null,frozen:!0,frozenDetail:!1,frozenCheckbox:!0,detail:null,detailHeight:260,isShowDetailToggle:null,rownumbers:!1,frozenRownumbers:!0,rownumbersColWidth:26,colDraggable:!1,rowDraggable:!1,rowDraggingRender:null,autoCheckChildren:!0,onRowDragDrop:null,rowHeight:28,headerRowHeight:36,minHeight:63,toolbar:null,toolbarShowInLeft:!0,headerImg:null,editorTopDiff:0,editorLeftDiff:1,editorHeightDiff:-1,unSetValidateAttr:!0,autoFilter:!1,rowSelectable:!0,scrollToPage:!1,scrollToAppend:!0,noDataRender:null,onDragCol:null,onToggleCol:null,onChangeSort:null,onSuccess:null,onDblClickRow:null,onSelectRow:null,onBeforeSelectRow:null,onUnSelectRow:null,onBeforeCheckRow:null,onCheckRow:null,onBeforeCheckAllRow:null,onCheckAllRow:null,onBeforeShowData:null,onAfterShowData:null,onError:null,onSubmit:null,onReload:null,onToFirst:null,onToPrev:null,onToNext:null,onToLast:null,onAfterAddRow:null,onBeforeEdit:null,onBeforeSubmitEdit:null,onAfterEdit:null,onLoading:null,onLoaded:null,onContextmenu:null,onBeforeCancelEdit:null,onAfterSubmitEdit:null,onRowDragDrop:null,onGroupExtend:null,onGroupCollapse:null,onTreeExpand:null,onTreeCollapse:null,onTreeExpanded:null,onTreeCollapsed:null,onLoadData:null,onHeaderCellBulid:null,showHeaderFilter:!1,filterRowHeight:29},$.leeUIDefaults.GridString={errorMessage:"发生错误",pageStatMessage:"共{total}条记录  ， 显示第 {from} 条- 第{to} 条 ",pageTextMessage:"Page",loadingMessage:"正在加载中...",findTextMessage:"查找",noRecordMessage:"没有符合条件的记录存在",isContinueByDataChanged:"数据已经改变,如果继续将丢失数据,是否继续?",cancelMessage:"取消",saveMessage:"保存",applyMessage:"应用",draggingMessage:"{count}行"},$.leeUIDefaults.Grid.sorters=$.leeUIDefaults.Grid.sorters||{},$.leeUIDefaults.Grid.formatters=$.leeUIDefaults.Grid.formatters||{},$.leeUIDefaults.Grid.editors=$.leeUIDefaults.Grid.editors||{},$.leeUIDefaults.Grid.sorters.date=function(e,t){return e<t?-1:t<e?1:0},$.leeUIDefaults.Grid.sorters.int=function(e,t){return parseInt(e)<parseInt(t)?-1:parseInt(e)>parseInt(t)?1:0},$.leeUIDefaults.Grid.sorters.float=function(e,t){return parseFloat(e)<parseFloat(t)?-1:parseFloat(e)>parseFloat(t)?1:0},$.leeUIDefaults.Grid.sorters.string=function(e,t){return!!e&&e.localeCompare(t)},$.leeUIDefaults.Grid.formatters.date=function(value,column){function getFormatDate(e,t){this.options;if(isNaN(e))return null;var i=t,n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var l in/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+l+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?n[l]:("00"+n[l]).substr((""+n[l]).length)));return i}if(!value)return"";if("string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),value instanceof Date){var format=column.format||this.options.dateFormat||"yyyy-MM-dd";return getFormatDate(value,format)}return value.toString()},$.leeUIDefaults.Grid.formatters.ref=function(e){return $.isArray(e)?1<e.length?e[1]:e[0]:e},function(T){function n(e,t){for(var i=e.length-1;0<=i;i--)t(e[i])&&e.splice(i,1)}T.fn.leeGrid=function(e){return T.leeUI.run.call(this,"leeUIGrid",arguments)},T.fn.leeGridInstace=function(){return T.leeUI.run.call(this,"leeUIGetGridManager",arguments)},T.leeUI.controls.Grid=function(e,t){T.leeUI.controls.Grid.base.constructor.call(this,e,t)},T.leeUI.controls.Grid.leeExtend(T.leeUI.core.UIComponent,{__getType:function(){return"Grid"},__idPrev:function(){return"grid"},_extendMethods:function(){return{}},_init:function(){T.leeUI.controls.Grid.base._init.call(this);var t=this.options;t.dataType=t.url?"server":"local","local"==t.dataType&&(t.data=t.data||[],t.dataAction="local"),t.frozen||(t.frozenCheckbox=!1,t.frozenDetail=!1,t.frozenRownumbers=!1),t.tree&&(t.tree.childrenName=t.tree.childrenName||"children",t.tree.isParent=t.tree.isParent||function(e){return t.tree.childrenName in e},t.tree.isExtend=t.tree.isExtend||function(e){return!("isextend"in e&&0==e.isextend)})},_render:function(){var e=this,t=this.options;e.grid=T(e.element),e.grid.addClass("lee-ui-grid"),t.fixedCellHeight||e.grid.addClass("lee-ui-grid-auto");var i=[];i.push("        <div class='lee-panel-header'><span class='lee-panel-header-text'></span></div>"),i.push("                    <div class='lee-grid-loading'></div>"),i.push("        <div class='lee-panel-toolbar' style='display:none'><div class='lee-grid-toolbar'></div></div><div class='lee-clear'></div>"),i.push("        <div class='lee-panel-bwarp'>"),i.push("            <div class='lee-panel-body'>"),i.push("                <div class='lee-grid'>"),i.push("                    <div class='lee-grid-dragging-line'></div>"),i.push("                    <div class='lee-grid-popup'><table cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                    <div class='lee-grid-left'>"),i.push("                        <div class='lee-grid-header lee-grid-header-left'>"),i.push("                          <div class='lee-grid-header-inner'><table class='lee-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                        </div>"),i.push("                    <div class='lee-grid-body lee-grid-body-left'></div>"),i.push("                  </div>"),i.push("                  <div class='lee-grid-main'>"),i.push("                      <div class='lee-grid-header lee-grid-header-main'>"),i.push("                          <div class='lee-grid-header-inner'><table class='lee-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                      </div>"),i.push("                      <div class='lee-grid-body lee-grid-body-main lee-grid-scroll'></div>"),i.push("                  </div>"),i.push("                  <div class='lee-grid-right'>"),i.push("                      <div class='lee-grid-header lee-grid-header-right'>"),i.push("                          <div class='lee-grid-header-inner'><table class='lee-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                      </div>"),i.push("                      <div class='lee-grid-body lee-grid-body-right'></div>"),i.push("                  </div>"),i.push("                 </div>"),i.push("              </div>"),i.push("         </div>"),i.push("         <div class='lee-panel-footer'>"),i.push("            <div class='lee-panel-footer-inner'>"),i.push("                <div class='group  lee-bar-message'><span class='lee-bar-text'></span></div>"),i.push("            <div class='group selectpagesize'></div>"),i.push("                <div class='separator'></div>"),i.push("                <div class='group prevgroup'>"),i.push("                    <a href='javascript:void(0)' class='lee-icon lee-bar-button lee-bar-btnfirst'><span class='lee-icon'></span></a>"),i.push("                    <a href='javascript:void(0)' class='lee-icon lee-bar-button lee-bar-btnprev'><span class='lee-icon'></span></a>"),i.push("                </div>"),i.push("                <div class='separator'></div>"),i.push("                <div class='group changepage'><span class='pcontrol'> <input type='text' size='4' value='1' style='width:20px' maxlength='3' /> / <span></span></span></div>"),i.push("                <div class='separator'></div>"),i.push("                <div class='group nextgroup'>"),i.push("                     <a href='javascript:void(0)' class='lee-bar-button lee-bar-btnnext'><span class='lee-icon'></span></a>"),i.push("                     <a href='javascript:void(0)' class='lee-icon lee-bar-button lee-bar-btnlast'><span class='lee-icon'></span></a>"),i.push("                </div>"),i.push("                <div class='separator'></div>"),i.push("                <div class='group refreshgroup'>"),i.push("                     <a href='javascript:void(0)' class='lee-icon lee-bar-button lee-bar-btnload'><span class='lee-icon'></span></a>"),i.push("                </div>"),i.push("                <div class='separator'></div>"),i.push("                <div class='lee-clear'></div>"),i.push("            </div>"),i.push("         </div>"),e.grid.html(i.join("")),e.header=T(".lee-panel-header:first",e.grid),e.body=T(".lee-panel-body:first",e.grid),e.toolbar=T(".lee-panel-footer:first",e.grid),e.popup=T(".lee-grid-popup:first",e.grid),e.gridloading=T(".lee-grid-loading:first",e.grid),e.draggingline=T(".lee-grid-dragging-line",e.grid),e.topbar=T(".lee-grid-toolbar:first",e.grid),e.gridview=T(".lee-grid:first",e.grid),e.gridview.attr("id",e.id+"$grid"),e.gridview1=T(".lee-grid-left:first",e.gridview),e.gridview2=T(".lee-grid-main:first",e.gridview),e.gridview3=T(".lee-grid-right:first",e.gridview),e.gridview3.hide(),e.gridheader=T(".lee-grid-header:first",e.gridview2),e.gridbody=T(".lee-grid-body:first",e.gridview2),e.f={},e.f.gridheader=T(".lee-grid-header:first",e.gridview1),e.f.gridbody=T(".lee-grid-body:first",e.gridview1),e.currentData=null,e.changedCells={},e.editors={},e.editor={editing:!1},e.cacheData={},"auto"==t.height&&e.bind("SysGridHeightChanged",function(){e.enabledFrozen()&&e.gridview.height(Math.max(Math.max(e.gridview1.height()+1,e.gridview2.height()+1),t.minHeight))});var n=T.extend({},t);for(var l in this._bulid(),this._setColumns(t.columns),delete n.columns,delete n.data,delete n.url,e.set(n),t.delayLoad||(t.url?e.set({url:t.url}):t.data&&e.set({data:t.data})),leeUI.editors){var o=leeUI.editors[l];!o||l in t.editors||(t.editors[l]=leeUI.getEditor(T.extend({type:l,master:e},o)))}},_setFrozen:function(e){e?this.grid.addClass("lee-frozen"):this.grid.removeClass("lee-frozen")},_setLoadingMessage:function(e){this.gridloading.html("<div class='lee-grid-loading-inner'><div class='loader'></div><div class='message'>"+e+"</div></div>")},_setToolbar:function(e){var t=this,i=this.options;e&&T.fn.leeToolBar?(t.topbar.parent().show(),t.topbarManager=t.topbar.leeToolBar(e),i.toolbarShowInLeft&&t.topbar.addClass("lee-grid-toolbar-left")):t.topbar.parent().remove()},isHorizontalScrollShowed:function(){if(0<this.gridbody.scrollLeft())return!0;this.gridbody.scrollLeft(1);var e=this.gridbody.scrollLeft();return this.gridbody.scrollLeft(0),0!==e},isVerticalScrollShowed:function(){if(0<this.gridbody.scrollTop())return!0;this.gridbody.scrollTop(1);var e=this.gridbody.scrollTop();return this.gridbody.scrollTop(0),0!==e},_setHeight:function(e){var t=this,i=this.options;if(t.unbind("SysGridHeightChanged"),"auto"!=e){if(0<(e=t._calculateGridBodyHeight(e))){if(t.gridbody.height(e),i.frozen){var n=t.gridbody.width(),l=T(":first-child",t.gridbody).width();l&&n<l+18?18<e&&t.f.gridbody.height(e-18):t.f.gridbody.height(e)}var o=i.headerRowHeight*(t._columnMaxLevel-1)+i.headerRowHeight+3;i.showHeaderFilter&&(o+=i.filterRowHeight),t.gridview.height(e+o)}t._updateHorizontalScrollStatus.leeDefer(t,10)}else t.bind("SysGridHeightChanged",function(){t.enabledFrozen()&&t.gridview.height(Math.max(Math.max(t.gridview1.height()+1,t.gridview2.height()+1),i.minHeight))})},_calculateGridBodyHeight:function(e){var t=this.options;"string"==typeof e&&0<e.indexOf("%")&&(e=t.inWindow?T(window).height()*parseInt(e)*.01:this.grid.parent().height()*parseInt(e)*.01),t.title&&(e-=24),(t.usePager||t.pagerRender&&t.scrollToPage)&&(e-=this.toolbar.outerHeight()),t.totalRender&&(e-=25),t.toolbar&&(e-=this.topbar.outerHeight());var i=t.headerRowHeight*(this._columnMaxLevel-1)+t.headerRowHeight+3;return t.showHeaderFilter&&(i+=t.filterRowHeight),e-=i||0},_updateHorizontalScrollStatus:function(){var e=this;this.options;e.isHorizontalScrollShowed()?e.gridview.addClass("lee-grid-hashorizontal"):e.gridview.removeClass("lee-grid-hashorizontal"),e.isVerticalScrollShowed()?e.gridview.addClass("lee-grid-hasvertical"):e.gridview.removeClass("lee-grid-hasvertical")},_updateFrozenWidth:function(){var e=this;this.options;if(e.enabledFrozen()){e.gridview1.width(e.f.gridtablewidth);var t=e.gridview.width()-e.f.gridtablewidth;e.gridview2.css({left:e.f.gridtablewidth}),0<t&&e.gridview2.css({width:t})}},_setWidth:function(e){this.options;this.enabledFrozen()&&this._onResize()},_setUrl:function(e){(this.options.url=e)?(this.options.dataType="server",this.options.empty?this._onResize():this.loadData(!0)):this.options.dataType="local"},removeParm:function(t){var e=this.get("parms");e||(e={}),e instanceof Array?n(e,function(e){return e.name==t}):delete e[t],this.set("parms",e)},setParm:function(t,e){var i=this.get("parms");i||(i={}),i instanceof Array?(n(i,function(e){return e.name==t}),i.push({name:t,value:e})):i[t]=e,this.set("parms",i)},_setData:function(e){this.loadData(this.options.data),this.trigger("afterSetData")},loadData:function(e,t){var i=this,n=this.options;i.loading=!0,i.trigger("loadData");var l=null,o=!0;"function"==typeof e?(l=e,i.lastData?i.data=i.lastData:(i.data=i.currentData,i.data||(i.data={}),i.data[n.root]||(i.data[n.root]=[]),i.lastData=i.data),o=!1):"boolean"==typeof e?o=e:"object"==typeof e&&e?(o=!1,n.dataType="local",n.data=e):"number"==typeof e&&(n.newPage=e),n.newPage||(n.newPage=1),"server"==n.dataAction&&(n.sortOrder||(n.sortOrder="asc"));var a=[];if(n.parms){var r=T.isFunction(n.parms)?n.parms():n.parms;if(r.length){T(r).each(function(){a.push({name:this.name,value:this.value})});for(var s=r.length-1;0<=s;s--)r[s].temp&&r.splice(s,1)}else if("object"==typeof r)for(var d in r)a.push({name:d,value:r[d]})}"server"==n.dataAction&&(n.usePager&&(a.push({name:n.pageParmName,value:n.newPage}),a.push({name:n.pagesizeParmName,value:n.pageSize})),n.sortName&&(a.push({name:n.sortnameParmName,value:n.sortName}),a.push({name:n.sortorderParmName,value:n.sortOrder}))),T(".lee-bar-btnload",i.toolbar).addClass("lee-disabled"),"local"==n.dataType?(i.filteredData=T.extend(!0,{},n.data||i.currentData),l&&(i.filteredData[n.root]=i._searchData(i.filteredData[n.root],l)),n.usePager?i.currentData=i._getCurrentPageData(i.filteredData):i.currentData=i.filteredData,i._convertTreeData(),i._showData(),T(".lee-bar-btnload",i.toolbar).removeClass("lee-disabled")):"local"!=n.dataAction||o?i.loadServerData(a,l,t):i.data&&i.data[n.root]&&(i.filteredData=i.data,l&&(i.filteredData[n.root]=i._searchData(i.filteredData[n.root],l)),i.currentData=i._getCurrentPageData(i.filteredData),i._convertTreeData(),i._showData()),i.loading=!1},_convertTreeData:function(){var e=this,t=this.options;t.tree&&t.tree.idField&&t.tree.parentIDField?(e.currentData[t.root]=e.arrayToTree(e.currentData[t.root],t.tree.idField,t.tree.parentIDField),e.currentData[t.record]=e.currentData[t.root].length):t.tree&&t.tree.grade&&(e.currentData[t.root]=e.gradeToTree(e.currentData[t.root],t.tree.grade.gradeField,t.tree.grade.levelField,t.tree.grade.detailField,t.tree.grade.format),e.currentData[t.record]=e.currentData[t.root].length)},_setLoading:function(e){var t=e?"loading":"loaded";this.hasBind(t)?this.trigger(t):this.toggleLoading(e)},loadCustomServerData:function(e,t,i){var n=this,l=this.options,o=l.customDataService;n._setLoading(!0),o.call(this,e).then(function(e){n.trigger("success",[e,n]),n.data=e,null!=n.data[l.record]&&(n.cacheData.records=n.data[l.record]),"server"==l.dataAction&&(n.currentData=n.data,null==n.currentData[l.record]&&n.cacheData.records&&(n.currentData[l.record]=n.cacheData.records)),n._convertTreeData(),n._showData.leeDefer(n,10,[i]),T(".lee-bar-btnload",n.toolbar).removeClass("lee-disabled"),n.trigger("complete",[n]),n._setLoading(!1)})},loadServerData:function(e,t,i){var n=this,l=this.options;if(l.customDataService)n.loadCustomServerData(e,t,i);else{var o=l.url;T.isFunction(o)&&(o=o.call(n));var a=T.isFunction(l.urlParms)?l.urlParms.call(n):l.urlParms;if(a)for(name in a)o+=-1==o.indexOf("?")?"?":"&",o+=name+"="+a[name];var r={type:l.method,url:o,data:e,async:l.async,dataType:"json",beforeSend:function(){n.hasBind("loading")?n.trigger("loading"):n.toggleLoading(!0)},success:function(e){if(e.error&&leeUI.Error(e.mes),e.Code&&"ok"!=e.Code&&n.trigger("loadError",[e,n]),e.Code&&(e=e.Data),n.trigger("success",[e,n]),!e||!e[l.root]||!e[l.root].length)return n.currentData=n.data={},n.currentData[l.root]=n.data[l.root]=[],e&&e[l.record]?n.currentData[l.record]=n.data[l.record]=e[l.record]:n.currentData[l.record]=n.data[l.record]=0,n._convertTreeData(),n._showData(i),void T(".lee-bar-btnload",n.toolbar).removeClass("lee-disabled");n.data=e,null!=n.data[l.record]&&(n.cacheData.records=n.data[l.record]),"server"==l.dataAction?(n.currentData=n.data,null==n.currentData[l.record]&&n.cacheData.records&&(n.currentData[l.record]=n.cacheData.records)):(n.filteredData=n.data,t&&(n.filteredData[l.root]=n._searchData(n.filteredData[l.root],t)),l.usePager?n.currentData=n._getCurrentPageData(n.filteredData):n.currentData=n.filteredData),n._convertTreeData(),n._showData.leeDefer(n,10,[i]),T(".lee-bar-btnload",n.toolbar).removeClass("lee-disabled")},complete:function(){n.trigger("complete",[n]),n.hasBind("loaded")?n.trigger("loaded",[n]):n.toggleLoading.leeDefer(n,10,[!1])},error:function(e,t,i){n.currentData=n.data={},n.currentData[l.root]=n.data[l.root]=[],n.currentData[l.record]=n.data[l.record]=0,n.toggleLoading.leeDefer(n,10,[!1]),T(".lee-bar-btnload",n.toolbar).removeClass("lee-disabled"),n.trigger("error",[e,t,i])}};l.contentType&&(r.contentType=l.contentType),"application/json"==l.contentType&&"string"!=typeof parms&&(r.data=function(e){if(!e)return"null";var t=e,i={};if(T.isArray(t))for(var n=0;n<t.length;n++)i[t[n].name]=t[n].value;else i=t;return JSON.stringify(i)}(e)),T.ajax(r)}},toggleLoading:function(e){this.gridloading[e?"show":"hide"]()},_createEditor:function(e,t,i,n,l){var o=e.create.call(this,t,i);return e.setValue&&e.setValue.call(this,o,i.value,i),i.column.editor&&i.column.editor.initSelect&&(o.element&&T(o.element).is(":text")&&(T(o.element).select(),T(o.element).focus()),o instanceof jQuery&&(o.is(":text")?o.select():o.find(":text").select())),e.setText&&i.column.textField&&e.setText.call(this,o,i.text,i),e.resize&&e.resize.call(this,o,n,l,i),o},beginEdit:function(e,t){var l=this,i=this.options;if(i.enabledEdit){var n=l.getRow(e);if(!n._editing&&0!=l.trigger("beginEdit",{record:n,rowindex:n.__index})){l.editors[n.__id]={},n._editing=!0,l.reRender({rowdata:n}),t=t||function(e,t){var i=l.getCellObj(e,t),n=T(i).html("");return l.setCellEditing(e,t,!0),n};for(var o=0,a=l.columns.length;o<a;o++){var r=l.columns[o];if(r.name&&r.editor&&r.editor.type&&i.editors[r.editor.type]){var s=i.editors[r.editor.type],d={record:n,value:l._getValueByName(n,r.name),column:r,rowindex:n.__index,grid:l},c=t(n,r),u=c.width(),h=c.height(),p=l._createEditor(s,c,d,u,h);l.editors[n.__id][r.__id]={editor:s,input:p,editParm:d,container:c}}}l.trigger("afterBeginEdit",{record:n,rowindex:n.__index})}}},cancelEdit:function(e){var t=this;if(null==e)for(var i in t.editors)t.cancelEdit(i);else{var n=t.getRow(e);if(!t.editors[n.__id])return;if(0==t.trigger("beforeCancelEdit",{record:n,rowindex:n.__index}))return;for(var l in t.editors[n.__id]){var o=t.editors[n.__id][l];o.editor.destroy&&o.editor.destroy(o.input,o.editParm)}delete t.editors[n.__id],delete n._editing,t.reRender({rowdata:n})}},addEditRow:function(e,t){this.submitEdit(),e=this.add(e),this.beginEdit(e,t)},submitEdit:function(e){var t=this;this.options;if(null==e)for(var i in t.editors)t.submitEdit(i);else{var n=t.getRow(e),l={};if(!n||!t.editors[n.__id])return;for(var o in t.editors[n.__id]){var a=t.editors[n.__id][o],r=a.editParm.column;r.name&&(l[r.name]=a.editor.getValue(a.input,a.editParm)),r.textField&&a.editor.getText&&(l[r.textField]=a.editor.getText(a.input,a.editParm))}if(0==t.trigger("beforeSubmitEdit",{record:n,rowindex:n.__index,newdata:l}))return!1;t.updateRow(n,l),t.trigger("afterSubmitEdit",{record:n,rowindex:n.__index,newdata:l})}},_enabledEditByCell:function(e){this.options;var t=this.getColumn(e);return!!t&&(t.editor&&t.editor.type&&!t.readonly)},endEditToNext:function(){var e=this,t=(this.options,e.editor),i=null,n=null;if(t){var l=t.editParm,o=l.column,a=(T.inArray(o,e.columns),e.getCellObj(l.record,l.column));if((i=(n=T(a)).next()).length||(i=r()),i.length)for(;!e._enabledEditByCell(i.get(0));){for(i=(n=i).next();"none"==i.css("display");)i=i.next();i.length||(i=r())}function r(){return n.parent("tr").next(".lee-grid-row").find("td:first")}}e.endEdit(),i&&i.length&&e._applyEditor(i.get(0))},endEdit:function(e){var t=this;this.options;if(t.editor.editing){var i=t.editor;t.trigger("beforeEndEdit",[i]),t.trigger("sysEndEdit",[t.editor.editParm]),t.trigger("endEdit",[t.editor.editParm]),i.editor.destroy&&i.editor.destroy(i.input,i.editParm),t.editor.container.remove(),t.reRender({rowdata:t.editor.editParm.record,column:t.editor.editParm.column}),t.trigger("afterEdit",[t.editor.editParm]),t.editor={editing:!1}}else if(null!=e){var n=t.getRow(e);if(!t.editors[n.__id])return;if(0==t.submitEdit(e))return!1;for(var l in t.editors[n.__id]){(i=t.editors[n.__id][l]).editor.destroy&&i.editor.destroy(i.input,i.editParm)}delete t.editors[n.__id],delete n._editing,t.trigger("afterEdit",{record:n,rowindex:n.__index})}else for(var o in t.editors)t.endEdit(o);t._fixHeight.leeDefer(t,10)},setWidth:function(e){return this._setWidth(e)},setHeight:function(e){return this._setHeight(e)},enabledCheckbox:function(){return!!this.options.checkbox},enabledFrozen:function(){var e=this.options;if(!e.frozen)return!1;var t=this.columns||[];if(this.enabledDetail()&&e.frozenDetail||this.enabledCheckbox()&&e.frozenCheckbox||e.frozenRownumbers&&e.rownumbers)return!0;for(var i=0,n=t.length;i<n;i++)if(t[i].frozen)return!0;return this._setFrozen(!1),!1},enabledDetailEdit:function(){return!!this.enabledDetail()&&!!this.options.detailToEdit},enabledDetail:function(){return!(!this.options.detail||!this.options.detail.onShowDetail)},enabledGroup:function(){return!!this.options.groupColumnName},deleteSelectedRow:function(){if(this.selected){for(var e in this.selected){var t=this.selected[e];t.__id in this.records&&this._deleteData.leeDefer(this,10,[t])}this.reRender.leeDefer(this,20)}},removeRange:function(e){var t=this;this.options;T.each(e,function(){t._removeData(this)}),t.reRender()},remove:function(e){this.options,this.getRow(e);this._removeData(e),this.reRender()},deleteRange:function(e){var t=this;this.options;T.each(e,function(){t._deleteData(this)}),t.reRender()},deleteRow:function(e){this.options;var t=this.getRow(e);t&&(this._deleteData(t),this.reRender(),this.isDataChanged=!0)},_deleteData:function(e){var t=this,i=this.options,n=t.getRow(e);if(n[i.statusName]="delete",i.tree){var l=t.getChildren(n,!0);if(l)for(var o=0,a=l.length;o<a;o++)t._deleteData(l[o])}t.deletedRows=t.deletedRows||[],t.deletedRows.push(n),t._removeSelected(n)},updateCell:function(e,t,i){var n,l,o,a=this,r=this.options;if("string"!=typeof e){if("number"==typeof e)n=a.columns[e],o=a.getRow(i),l=a.getCellObj(o,n);else if("object"==typeof e&&e.__id)n=e,o=a.getRow(i),l=a.getCellObj(o,n);else{var s=(l=e).id.split("|"),d=s[s.length-1];n=a._columns[d];var c=T(l).parent();o=o||a.getRow(c[0])}null!=t&&n.name&&(a._setValueByName(o,n.name,t),"add"!=o[r.statusName]&&(o[r.statusName]="update"),a.isDataChanged=!0),a.reRender({rowdata:o,column:n})}else for(var u=0,h=a.columns.length;u<h;u++)a.columns[u].name==e&&a.updateCell(u,t,i)},addRows:function(e,t,i,n){var l=this;this.options;T(e).each(function(){l.addRow(this,t,i,n)})},_createRowid:function(){return"r"+(1e3+this.recordNumber)},_isRowId:function(e){return e in this.records},_addNewRecord:function(e,t,i){var n=this,l=this.options;if(n.recordNumber++,e.__id=n._createRowid(),(e.__previd=t)&&-1!=t){var o=n.records[t];if(o.__nextid&&-1!=o.__nextid){var a=n.records[o.__nextid];a&&(a.__previd=e.__id)}o.__nextid=e.__id,e.__index=o.__index+1}else e.__index=0;if(l.tree){if(i&&-1!=i){var r=n.records[i];e.__pid=i,e.__level=r.__level+1}else e.__pid=-1,e.__level=1;e.__hasChildren=!!e[l.tree.childrenName]}return e[l.statusName]=e[l.statusName]||"nochanged",n.rows[e.__index]=e,n.records[e.__id]=e},_getRows:function(e){var o=this.options,a=[];return function e(t){if(t&&t.length)for(var i=0,n=t.length;i<n;i++){var l=t[i];a.push(l),l[o.tree.childrenName]&&e(l[o.tree.childrenName])}}(e),a},_updateGridData:function(){var a=this,r=this.options;a.recordNumber=0,a.rows=[],a.records={};var s=-1;return function e(t,i){if(t&&t.length)for(var n=0,l=t.length;n<l;n++){var o=t[n];a.formatRecord(o),"delete"!=o[r.statusName]&&(a._addNewRecord(o,s,i),s=o.__id,o.__hasChildren&&e(o[r.tree.childrenName],o.__id))}}(a.currentData[r.root],-1),a.rows},_moveData:function(e,t,i){this.options;var n,l,o=this.getRow(e),a=this.getRow(t),r=this._getParentChildren(o);n=T.inArray(o,r),r.splice(n,1),r=this._getParentChildren(a),l=T.inArray(a,r),r.splice(l+(i?1:0),0,o)},move:function(e,t,i){this._moveData(e,t,i),this.reRender()},moveRange:function(e,t,i){for(var n in e)this._moveData(e[n],t,i);this.reRender()},up:function(e){var t=this,i=(this.options,t.getRow(e)),n=t._getParentChildren(i),l=T.inArray(i,n);if(-1!=l&&0!=l){var o=t.getSelected()||i;t.move(i,n[l-1],!1),t.select(o)}},down:function(e){var t=this,i=(this.options,t.getRow(e)),n=t._getParentChildren(i),l=T.inArray(i,n);if(-1!=l&&l!=n.length-1){var o=t.getSelected()||i;t.move(i,n[l+1],!0),t.select(o)}},addRow:function(e,t,i,n){var l=this,o=this.options;if(e=e||{},l._addData(e,n,t,i),l.reRender(),e[o.statusName]="add",o.tree){var a=l.getChildren(e,!0);if(a)for(var r=0,s=a.length;r<s;r++)a[r][o.statusName]="add"}return l.isDataChanged=!0,o.total=o.total?o.total+1:1,o.pageCount=Math.ceil(o.total/o.pageSize),l._buildPager(),l.trigger("SysGridHeightChanged"),l.trigger("afterAddRow",[e]),e},updateRow:function(e,t){var i=this.options,n=this.getRow(e);return this.isDataChanged=!0,T.extend(n,t||{}),"add"!=n[i.statusName]&&(n[i.statusName]="update"),this.reRender.leeDefer(this,10,[{rowdata:n}]),n},setCellEditing:function(e,t,i){var n=this,l=(this.options,n.getCellObj(e,t)),o=i?"addClass":"removeClass";if(T(l)[o]("lee-grid-row-cell-editing"),0!=e.__id){var a=T(n.getRowObj(e.__id)).prev();if(!a.length||a.length<=0||null==a[0].id||""==a[0].id)return;var r=n.getRow(a[0]);if(!(s=n.getCellObj(r,t)))return;T(s)[o]("lee-grid-row-cell-editing-topcell")}if(-1!=t.__previd&&null!=t.__previd){var s=T(n.getCellObj(e,t)).prev();T(s)[o]("lee-grid-row-cell-editing-leftcell")}},reRender:function(e){var n=this,l=this.options,t=(e=e||{}).rowdata,i=e.column,o=e.totalOnly;if(!(i&&(i.isdetail||i.ischeckbox)||t&&"delete"==t[l.statusName]))if(o)T(n.columns).each(function(){s(this)});else if(t&&i){var a=n.getCellObj(t,i);T(a).html(n._getCellHtml(t,i)),i.issystem||n.setCellEditing(t,i,!1)}else if(t)T(n.columns).each(function(){n.reRender({rowdata:t,column:this})});else if(i){for(var r in n.records)n.reRender({rowdata:n.records[r],column:i});s(i)}else n._showData();function s(e){if(e.totalSummary)for(var t=0;t<n.totalNumber;t++){var i=document.getElementById(n.id+"|total"+t+"|"+e.__id);T("div:first",i).html(n._getTotalCellContent(e,n.groups&&n.groups[t]?n.groups[t]:n.currentData[l.root]))}}},getData:function(e,t){var i=this.options,n=[];for(var l in null==t&&(t=!0),this.records){var o=T.extend(!0,{},this.records[l]);if(o[i.statusName]==e||null==e){var a=this.formatRecord(o,t);i.tree&&delete a[i.tree.childrenName],n.push(a)}}return n},formatRecord:function(e,t){return delete e.__id,delete e.__previd,delete e.__nextid,delete e.__index,this.options.tree&&(delete e.__pid,delete e.__level,delete e.__hasChildren),t&&delete e[this.options.statusName],e},getUpdated:function(){return this.getData("update",!0)},getDeleted:function(){return this.deletedRows},getAdded:function(){return this.getData("add",!0)},getChanges:function(){var t=this,i=(this.options,[]);return this.deletedRows&&T(this.deletedRows).each(function(){var e=T.extend(!0,{},this);i.push(t.formatRecord(e,!1))}),T.merge(i,t.getData("update",!1)),T.merge(i,t.getData("add",!1)),i},findColumByName:function(e){var t=null;for(var i in this._columns)if(this._columns[i].name==e){t=this._columns[i];break}return t},getColumn:function(e){var t=this;this.options;if("string"==typeof e)return t._isColumnId(e)?t._columns[e]:t.findColumByName(e)||t.columns[parseInt(e)];if("number"==typeof e)return t.columns[e];if("object"!=typeof e||1!=e.nodeType)return e;var i=e.id.split("|"),n=i[i.length-1];return t._columns[n]},getColumnByName:function(e){this.options;for(i=0;i<this.columns.length;i++)if(this.columns[i].name==e)return this.columns[i];return null},getColumnType:function(e){this.options;for(i=0;i<this.columns.length;i++)if(this.columns[i].name==e)return this.columns[i].type?this.columns[i].type:"string";return null},isTotalSummary:function(){this.options;for(var e=0;e<this.columns.length;e++)if(this.columns[e].totalSummary)return!0;return!1},getColumns:function(e){this.options;var t=[];for(var i in this._columns){var n=this._columns[i];null!=e?n.__level==e&&t.push(n):n.__leaf&&t.push(n)}return t},changeSort:function(i,e){var n=this,t=this.options;if(n.loading)return!0;if("local"==t.dataAction){var l=n.getColumnType(i);if(n.sortedData||(n.sortedData=n.filteredData),!n.sortedData||!n.sortedData[t.root])return;t.sortName==i?n.sortedData[t.root].reverse():n.sortedData[t.root].sort(function(e,t){return n._compareData(e,t,i,l)}),t.usePager?n.currentData=n._getCurrentPageData(n.sortedData):n.currentData=n.sortedData,n._showData()}t.sortName=i,t.sortOrder=e,"server"==t.dataAction&&n.loadData(t.where)},changePage:function(e){var t=this,i=this.options;if(t.loading)return!0;if("local"!=i.dataAction&&t.isDataChanged&&!confirm(i.isContinueByDataChanged))return!1;switch(i.pageCount=parseInt(T(".pcontrol span",t.toolbar).html()),e){case"first":if(1==i.page)return;i.newPage=1;break;case"prev":if(1==i.page)return;1<i.page&&(i.newPage=parseInt(i.page)-1);break;case"next":if(i.page>=i.pageCount)return;i.newPage=parseInt(i.page)+1;break;case"last":if(i.page>=i.pageCount)return;i.newPage=i.pageCount;break;case"input":var n=parseInt(T(".pcontrol input",t.toolbar).val());isNaN(n)&&(n=1),n<1?n=1:n>i.pageCount&&(n=i.pageCount),T(".pcontrol input",t.toolbar).val(n),i.newPage=n}if(i.newPage==i.page)return!1;if(1==i.newPage?(T(".lee-bar-btnfirst",t.toolbar).addClass("lee-disabled"),T(".lee-bar-btnprev",t.toolbar).addClass("lee-disabled")):(T(".lee-bar-btnfirst",t.toolbar).removeClass("lee-disabled"),T(".lee-bar-btnprev",t.toolbar).removeClass("lee-disabled")),i.newPage==i.pageCount?(T(".lee-bar-btnlast",t.toolbar).addClass("lee-disabled"),T(".lee-bar-btnnext",t.toolbar).addClass("lee-disabled")):(T(".lee-bar-btnlast",t.toolbar).removeClass("lee-disabled"),T(".lee-bar-btnnext",t.toolbar).removeClass("lee-disabled")),t.trigger("changePage",[i.newPage]),"server"==i.dataAction)i.parms||(i.parms=[]),T.isArray(i.parms)?i.parms.push({name:"changepage",value:"1",temp:!0}):i.parms.changepage="1",t.loadData(i.where);else{if(t.currentData=t._getCurrentPageData(t.filteredData),i.tree){var l=i.tree.childrenName;T(t.filteredData[i.root]).each(function(e,t){t[l]&&(t[l]=[])}),t._convertTreeData()}t._showData()}},getSelectedRow:function(){for(var e in this.selected){var t=this.selected[e];if(t.__id in this.records)return t}return null},getSelectedRows:function(){var e=[];for(var t in this.selected){var i=this.selected[t];i.__id in this.records&&e.push(i)}return e},getSelectedRowObj:function(){for(var e in this.selected){var t=this.selected[e];if(t.__id in this.records)return this.getRowObj(t)}return null},getSelectedRowObjs:function(){var e=[];for(var t in this.selected){var i=this.selected[t];i.__id in this.records&&e.push(this.getRowObj(i))}return e},getCellObj:function(e,t){var i=this.getRow(e);return t=this.getColumn(t),document.getElementById(this._getCellDomId(i,t))},getRowObj:function(e,t){var i=this;this.options;return null==e?null:"string"==typeof e?i._isRowId(e)?document.getElementById(i.id+(t?"|1|":"|2|")+e):document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[parseInt(e)].__id):"number"==typeof e?document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[e].__id):"object"==typeof e&&e.__id?i.getRowObj(e.__id,t):e},getRow:function(e){var t=this;this.options;return null==e?null:"string"==typeof e?t._isRowId(e)?t.records[e]:t.rows[parseInt(e)]:"number"==typeof e?t.rows[parseInt(e)]:"object"!=typeof e||1!=e.nodeType||e.__id?e:t._getRowByDomId(e.id)},_setColumnVisible:function(e,t){this.options;if(t){if(e._hide=!0,document.getElementById(e.__domid).style.display="none",-1!=e.__pid){for(var i=!0,n=this._columns[e.__pid],l=0;n&&l<n.columns.length;l++)if(!n.columns[l]._hide){i=!1;break}i&&(n._hide=!0,document.getElementById(n.__domid).style.display="none",this._setColumnVisible(n,t))}}else e._hide=!1,document.getElementById(e.__domid).style.display="",-1!=e.__pid&&(n=this._columns[e.__pid])._hide&&(document.getElementById(n.__domid).style.display="",this._setColumnVisible(n,t))},toggleCol:function(e,t,i){var n,l=this;this.options;if("number"==typeof e)n=l.columns[e];else if("object"==typeof e&&e.__id)n=e;else if("string"==typeof e){if(!l._isColumnId(e))return void T(l.columns).each(function(){this.name==e&&l.toggleCol(this,t,i)});n=l._columns[e]}if(n){var o=n.__leafindex,a=document.getElementById(n.__domid);if(a){a=T(a);var r=[];for(var s in l.rows){var d=l.getCellObj(l.rows[s],n);d&&r.push(d)}for(s=0;s<l.totalNumber;s++){var c=document.getElementById(l.id+"|total"+s+"|"+n.__id);c&&r.push(c)}var u=n._width;t&&n._hide?(n.frozen?l.f.gridtablewidth+=parseInt(u)+1:l.gridtablewidth+=parseInt(u)+1,l._setColumnVisible(n,!1),T(r).show()):t||n._hide||(n.frozen?l.f.gridtablewidth-=parseInt(u)+1:l.gridtablewidth-=parseInt(u)+1,l._setColumnVisible(n,!0),T(r).hide()),n.frozen?(T("div:first",l.f.gridheader).width(l.f.gridtablewidth),T("div:first",l.f.gridbody).width(l.f.gridtablewidth)):(T("div:first",l.gridheader).width(l.gridtablewidth+40),l.gridtablewidth?T("div:first",l.gridbody).width(l.gridtablewidth):T("div:first",l.gridbody).css("width","auto")),l._updateFrozenWidth(),i||T(":checkbox[columnindex="+o+"]",l.popup).each(function(){if(this.checked=t,T.fn.leeCheckBox){var e=T(this).leeUI();e&&e.updateStyle()}})}}},setColumnWidth:function(e,t){var i=this,n=this.options;if(t){var l;if(t=parseInt(t,10),"number"==typeof e)l=i.columns[e];else if("object"==typeof e&&e.__id)l=e;else if("string"==typeof e){if(!i._isColumnId(e))return void T(i.columns).each(function(){this.name==e&&i.setColumnWidth(this,t)});l=i._columns[e]}if(l){var o=n.minColumnWidth;l.minWidth&&(o=l.minWidth);var a=(t=t<o?o:t)-l._width;if(0!=i.trigger("beforeChangeColumnWidth",[l,t])){l._width=t,l.frozen?(i.f.gridtablewidth+=a,T("div:first",i.f.gridheader).width(i.f.gridtablewidth),T("div:first",i.f.gridbody).width(i.f.gridtablewidth)):(i.gridtablewidth+=a,T("div:first",i.gridheader).width(i.gridtablewidth+40),T("div:first",i.gridbody).width(i.gridtablewidth)),T(document.getElementById(l.__domid)).css("width",t);var r=[];for(var s in i.records){var d=i.getCellObj(i.records[s],l);if(d&&r.push(d),!i.enabledDetailEdit()&&i.editors[s]&&i.editors[s][l.__id]){var c=i.editors[s][l.__id];c.editor.resize&&c.editor.resize(c.input,t,c.container.height(),c.editParm)}}for(var u=0;u<i.totalNumber;u++){var h=document.getElementById(i.id+"|total"+u+"|"+l.__id);h&&r.push(h)}T(r).css("width",t).find("> div.lee-grid-row-cell-inner:first").css("width",t-8),i._updateFrozenWidth(),i._updateHorizontalScrollStatus.leeDefer(i,10),i.trigger("afterChangeColumnWidth",[l,t])}}}},changeHeaderText:function(e,t){var i,n=this,l=this.options;if("number"==typeof e)i=n.columns[e];else if("object"==typeof e&&e.__id)i=e;else if("string"==typeof e){if(!n._isColumnId(e))return void T(n.columns).each(function(){this.name==e&&n.changeHeaderText(this,t)});i=n._columns[e]}if(i){var o=i.__leafindex,a=document.getElementById(i.__domid);T(".lee-grid-hd-cell-text",a).html(t),l.allowHideColumn&&T(":checkbox[columnindex="+o+"]",n.popup).parent().next().html(t)}},changeCol:function(e,t,i){var n=this,l=this.options;if(e&&t){var o,a,r=n.getColumn(e),s=n.getColumn(t);r.frozen=s.frozen;var d=-1==r.__pid?l.columns:n._columns[r.__pid].columns,c=-1==s.__pid?l.columns:n._columns[s.__pid].columns;o=T.inArray(r,d),a=T.inArray(s,c);var u=d==c;r.__level,s.__level;c.splice(a+(i?1:0),0,r),u?i?d.splice(o,1):d.splice(o+1,1):d.splice(o,1),n._setColumns(l.columns),n.reRender()}},collapseDetail:function(e){var t=this,i=(this.options,t.getRow(e));if(i)for(var n=0,l=t.columns.length;n<l;n++)if(t.columns[n].isdetail){var o=t.getRowObj(i),a=t.getCellObj(i,t.columns[n]);return T(o).next("tr.lee-grid-detailpanel").hide(),T(".lee-grid-row-cell-detailbtn:first",a).removeClass("lee-open"),void t.trigger("SysGridHeightChanged")}},extendDetail:function(e){var t=this,i=(this.options,t.getRow(e));if(i)for(var n=0,l=t.columns.length;n<l;n++)if(t.columns[n].isdetail){var o=t.getRowObj(i),a=t.getCellObj(i,t.columns[n]);return T(o).next("tr.lee-grid-detailpanel").show(),T(".lee-grid-row-cell-detailbtn:first",a).addClass("lee-open"),void t.trigger("SysGridHeightChanged")}},getParent:function(e){if(!this.options.tree)return null;var t=this.getRow(e);return t&&t.__pid in this.records?this.records[t.__pid]:null},getChildren:function(e,o){var a=this.options;if(!a.tree)return null;var t=this.getRow(e);if(!t)return null;var r=[];return function e(t){if(t[a.tree.childrenName])for(var i=0,n=t[a.tree.childrenName].length;i<n;i++){var l=t[a.tree.childrenName][i];"delete"!=l[a.statusName]&&(r.push(l),o&&e(l))}}(t),r},isLeaf:function(e){this.options;var t=this.getRow(e);if(t)return!t.__hasChildren},hasChildren:function(e){var t=this.options,i=this.getRow(e);if(i)return!(!i[t.tree.childrenName]||!i[t.tree.childrenName].length)},existRecord:function(e){for(var t in this.records)if(this.records[t]==e)return!0;return!1},_removeSelected:function(e){var t=this;if(this.options.tree){var i=t.getChildren(e,!0);if(i)for(var n=0,l=i.length;n<l;n++){var o=T.inArray(i[n],t.selected);-1!=o&&t.selected.splice(o,1)}}var a=T.inArray(e,t.selected);-1!=a&&t.selected.splice(a,1)},_getParentChildren:function(e){var t=this,i=this.options,n=t.getRow(e);return i.tree&&t.existRecord(n)&&n.__pid in t.records?t.records[n.__pid][i.tree.childrenName]:t.currentData[i.root]},_removeData:function(e){this.options;var t=this._getParentChildren(e),i=T.inArray(e,t);-1!=i&&t.splice(i,1),this._removeSelected(e)},_addData:function(e,t,i,n){var l=this,o=this.options;l.currentData||(l.currentData={}),l.currentData[o.root]||(l.currentData[o.root]=[]);var a=l.currentData[o.root];if(i){o.tree&&(t?a=t[o.tree.childrenName]:i.__pid in l.records&&(a=l.records[i.__pid][o.tree.childrenName]));var r=T.inArray(i,a);a.splice(-1==r?-1:r+(n?0:1),0,e)}else o.tree&&t&&(t[o.tree.childrenName]||(t[o.tree.childrenName]=[]),a=t[o.tree.childrenName]),a.push(e)},_appendData:function(e,t,i,n){e[this.options.statusName]="update",this._removeData(e),this._addData(e,t,i,n)},appendRange:function(e,i,n,l){var o=this,a=(this.options,!1);T.each(e,function(e,t){t.__id&&o.existRecord(t)?(o.isLeaf(i)&&o.upgrade(i),o._appendData(t,i,n,l),a=!0):o.appendRow(t,i,n,l)}),a&&o.reRender()},appendRow:function(e,t,i,n){var l=this;this.options;if(T.isArray(e))l.appendRange(e,t,i,n);else{if(e.__id&&l.existRecord(e))return l._appendData(e,t,i,n),void l.reRender();t&&l.isLeaf(t)&&l.upgrade(t),l.addRow(e,i,!!n,t)}},upgrade:function(e){var t=this.options,i=this.getRow(e);if(i&&t.tree){i[t.tree.childrenName]=i[t.tree.childrenName]||[],i.__hasChildren=!0;var n=[this.getRowObj(i)];this.enabledFrozen()&&n.push(this.getRowObj(i,!0)),T("> td > div > .lee-grid-tree-space:last",n).addClass("lee-grid-tree-link lee-grid-tree-link-open")}},demotion:function(e){var t=this,i=this.options,n=t.getRow(e);if(n&&i.tree){var l=[t.getRowObj(n)];if(t.enabledFrozen()&&l.push(t.getRowObj(n,!0)),T("> td > div > .lee-grid-tree-space:last",l).removeClass("lee-grid-tree-link lee-grid-tree-link-open lee-grid-tree-link-close"),t.hasChildren(n))for(var o=t.getChildren(n),a=0,r=o.length;a<r;a++)t.deleteRow(o[a]);n.__hasChildren=!1}},collapseAll:function(){var n=this;this.options;T(n.rows).each(function(e,t){var i=n.getRowObj(t);T(".lee-grid-tree-link",i).hasClass("lee-grid-tree-link-close")||n.toggle(t)})},expandAll:function(){var n=this;this.options;T(n.rows).each(function(e,t){var i=n.getRowObj(t);T(".lee-grid-tree-link",i).hasClass("lee-grid-tree-link-open")||n.toggle(t)})},collapse:function(e){this.options;var t=this.getRowObj(e);T(".lee-grid-tree-link",t).hasClass("lee-grid-tree-link-close")||this.toggle(e)},expand:function(e){this.options;var t=this.getRowObj(e);T(".lee-grid-tree-link",t).hasClass("lee-grid-tree-link-open")||this.toggle(e)},toggle:function(e){if(e){var s=this,t=(this.options,s.getRow(e)),i=[s.getRowObj(t)];s.enabledFrozen()&&i.push(s.getRowObj(t,!0));t.__level;var n,l=T(".lee-grid-tree-link:first",i),o=!0;if(s.collapsedRows=s.collapsedRows||[],l.hasClass("lee-grid-tree-link-close")){function a(){l.removeClass("lee-grid-tree-link-close").addClass("lee-grid-tree-link-open"),-1!=(n=T.inArray(t,s.collapsedRows))&&s.collapsedRows.splice(n,1)}var r={update:function(){a(),c()}};if(s.hasBind("treeExpand")&&0==s.trigger("treeExpand",[t,r]))return!1;a()}else{function d(){l.addClass("lee-grid-tree-link-close").removeClass("lee-grid-tree-link-open"),-1==(n=T.inArray(t,s.collapsedRows))&&s.collapsedRows.push(t)}r={update:function(){d(),c()}};if(s.hasBind("treeCollapse")&&0==s.trigger("treeCollapse",[t,r]))return!1;o=!1,d()}c()}function c(){var e=[];if(!o)return e=s.getChildren(t,!0),T(e).each(function(){T(s.getRowObj(this)).hide(),s.enabledFrozen()&&T(s.getRowObj(this,!0)).hide()}),void s.trigger("treeCollapsed",[t]);(function e(t){for(var i=0,n=t.length;i<n;i++){var l=t[i],o=s.getChildren(l,!1),a=!!(o&&0<=o.length),r=T([s.getRowObj(l.__id)]);s.enabledFrozen()&&(r=r.add(s.getRowObj(l.__id,!0))),console.log("subchildren:"+o),a?T(".lee-grid-tree-link",r).hasClass("lee-grid-tree-link-close")?r.show():(r.show(),e(o)):(T(".lee-grid-tree-link",r).removeClass("lee-grid-tree-link-close").addClass("lee-grid-tree-link-open"),r.show())}})(e=s.getChildren(t,!1)),s.trigger("treeExpanded",[t])}},_bulid:function(){var e=this;e._clearGrid(),e._initBuildHeader(),e._initHeight(),e._initFootbar(),e._buildPager(),e._setEvent()},_setColumns:function(e){this._initColumns(),this._initBuildGridHeader(),this._initBuildPopup()},_initBuildHeader:function(){var e=this.options;e.title?(T(".lee-panel-header-text",this.header).html(e.title),e.headerImg&&this.header.append("<img src='"+e.headerImg+"' />").addClass("lee-panel-header-hasicon")):this.header.hide()},_createColumnId:function(e){return null!=e.id&&""!=e.id?e.id.toString():"c"+(100+this._columnCount)},_isColumnId:function(e){return e in this._columns},_initColumns:function(){var d=this,e=this.options;if(d._columns={},d._columnCount=0,d._columnLeafCount=0,d._columnMaxLevel=1,e.columns){var t=-1;if(e.rownumbers){var i=!d.enabledGroup()&&(e.frozen&&e.frozenRownumbers);c(s={isrownumber:!0,issystem:!0,width:e.rownumbersColWidth,frozen:i},1,-1,t),t=s.__id}if(d.enabledDetail()){var n=!d.enabledGroup()&&(e.frozen&&e.frozenDetail);c(s={isdetail:!0,issystem:!0,width:e.detailColWidth,frozen:n},1,-1,t),t=s.__id}if(d.enabledCheckbox()){var l=!d.enabledGroup()&&(e.frozen&&e.frozenCheckbox);c(s={ischeckbox:!0,issystem:!0,width:e.detailColWidth,frozen:l},1,-1,t),t=s.__id}for(var o=0,a=e.columns.length;o<a;o++){(s=e.columns[o])&&(c(s,1,-1,t),t=s.__id)}for(var r in d._columns){var s;1<(s=d._columns[r]).__leafcount&&(s.__colSpan=s.__leafcount),s.__leaf&&s.__level!=d._columnMaxLevel&&(s.__rowSpan=d._columnMaxLevel-s.__level+1)}d.columns=d.getColumns(),T(d.columns).each(function(e,t){t.columnname=t.name,t.columnindex=e,t.type=t.type||"string",t.islast=e==d.columns.length-1,t.isSort=0!=t.isSort,t.frozen=!!t.frozen,t._width=d._getColumnWidth(t),t._hide=!!t.hide})}function c(e,t,i,n){if(e.editorType&&(e.editor=e.editor||{},e.editor.type=e.editorType),function(e,t){for(var i in t)t[i]in e&&delete e[t[i]]}(e,["__id","__pid","__previd","__nextid","__domid","__leaf","__leafindex","__level","__colSpan","__rowSpan"]),t>d._columnMaxLevel&&(d._columnMaxLevel=t),d._columnCount++,e.__id=d._createColumnId(e),e.__domid=d.id+"|hcell|"+e.__id,(d._columns[e.__id]=e).columns&&e.columns.length||(e.__leafindex=d._columnLeafCount++),e.__level=t,e.__pid=i,e.__previd=n,!e.columns||!e.columns.length)return e.__leaf=!0,1;for(var l=0,o=-1,a=0,r=e.columns.length;a<r;a++){var s=e.columns[a];l+=c(s,t+1,e.__id,o),o=s.__id}return e.__leafcount=l}},_getColumnWidth:function(e){var n=this,l=this.options;if(e._width)return e._width;var t=e.width||l.columnWidth;if(!t||"auto"==t){var o=0,a=0;T(n.columns).each(function(e,t){var i=t.width||l.columnWidth;!i||"auto"==i?o++:a+=parseInt(n._getColumnWidth(t))+1}),t=parseInt((n.grid.width()-a-20)/o)-1}if("string"==typeof t&&0<t.indexOf("%")){var i=0;n.enabledDetail()&&(i+=l.detailColWidth),n.enabledCheckbox()&&(i+=l.checkboxColWidth),n.options.rownumbers&&(i+=n.options.rownumbersColWidth),e._width=t=parseInt(.01*parseInt(t)*(n.grid.width()-i-n.columns.length/2-1))}return e.minWidth&&t<e.minWidth&&(t=e.minWidth),e.maxWidth&&t>e.maxWidth&&(t=e.maxWidth),t},_createHeaderCell:function(t){var i=this,n=this.options,l=T("<td class='lee-grid-hd-cell'><div class='lee-grid-hd-cell-inner'><span class='lee-grid-hd-cell-text'></span></div></td>");if(l.attr("id",t.__domid),t.__leaf){if(n.showHeaderFilter){l.find(".lee-grid-hd-cell-inner").css("padding-bottom",n.filterRowHeight+"px");var e=i.id+"_filter_"+t.name;l.append("<div class='lee-grid-cell-filter' style='border-top: 1px solid #DDD;height: "+n.filterRowHeight+"px;'><input id='"+e+"' class='input_filter' col='"+t.name+"' type='text'  style='width: 100%;border:0;height: 100%;outline: none;'></div>"),l.find(".input_filter").keyup(function(e){"function"==typeof n.beforeHeaderFilter&&n.beforeHeaderFilter(i,n),i.loadLocalData(T(this).attr("col"),T(this).val())}),l.find(".input_filter").change(function(e){"function"==typeof n.beforeHeaderFilter&&n.beforeHeaderFilter(i,n),i.loadLocalData(T(this).attr("col"),T(this).val())})}}else l.addClass("lee-grid-hd-cell-mul");if(t.columnindex==i.columns.length-1&&l.addClass("lee-grid-hd-cell-last"),t.isrownumber&&(l.addClass("lee-grid-hd-cell-rownumbers"),l.html("<div class='lee-grid-hd-cell-inner'></div>")),t.ischeckbox&&(l.addClass("lee-grid-hd-cell-checkbox"),l.html("<div class='lee-grid-hd-cell-inner'><div class='lee-grid-hd-cell-text lee-grid-hd-cell-btn-checkbox'></div></div>")),t.isdetail&&(l.addClass("lee-grid-hd-cell-detail"),l.html("<div class='lee-grid-hd-cell-inner'><div class='lee-grid-hd-cell-text lee-grid-hd-cell-btn-detail'></div></div>")),t.heightAlign&&T(".lee-grid-hd-cell-inner:first",l).css("textAlign",t.heightAlign),t.__colSpan&&l.attr("colSpan",t.__colSpan),t.__rowSpan){l.attr("rowSpan",t.__rowSpan),l.height(n.headerRowHeight*t.__rowSpan);var o=(n.headerRowHeight*t.__rowSpan-n.headerRowHeight)/2-5;T(".lee-grid-hd-cell-inner:first",l).css("paddingTop",o)}else l.height(n.headerRowHeight);t.__leaf&&(l.width(t._width),l.attr("columnindex",t.__leafindex),n.showHeaderFilter&&l.height(n.headerRowHeight+n.filterRowHeight));var a=l.height();!t.__rowSpan&&10<a&&t._hide&&l.hide(),t.name&&l.attr({columnname:t.name});var r="";return r=t.display&&""!=t.display?t.display:t.headerRender?t.headerRender(t):"&nbsp;",t.required&&(r="<span style='color:red'>*</span>"+r),T(".lee-grid-hd-cell-text:first",l).html(r),!t.issystem&&t.__leaf&&!1!==t.resizable&&T.fn.leeResizable&&n.allowAdjustColWidth&&(i.colResizable[t.__id]=l.leeResizable({handles:"e",onStartResize:function(e,t){this.proxy.hide(),i.draggingline.css({height:i.body.height(),top:0,left:t.pageX-i.grid.offset().left+parseInt(i.body[0].scrollLeft)}).show()},onResize:function(e,t){i.colresizing=!0,i.draggingline.css({left:t.pageX-i.grid.offset().left+parseInt(i.body[0].scrollLeft)}),T("body").add(l).css("cursor","e-resize")},onStopResize:function(e){return i.colresizing=!1,T("body").add(l).css("cursor","default"),i.draggingline.hide(),i.setColumnWidth(t,parseInt(t._width)+e.diffX),i._fixHeight.leeDefer(i,10),!1}})),i.trigger("headerCellBulid",[l,t]),l},loadLocalData:function(e,t){var a=this;this.options;!function(i,n,l){var o,a,r,s=null,d=0;l||(l={});var c=function(){d=!1===l.leading?0:(new Date).getTime(),s=null,r=i.apply(o,a),s||(o=a=null)};return function(){var e=(new Date).getTime();d||!1!==l.leading||(d=e);var t=n-(e-d);return o=this,a=arguments,t<=0||n<t?(clearTimeout(s),s=null,d=e,r=i.apply(o,a),s||(o=a=null)):s||!1===l.trailing||(s=setTimeout(c,t)),r}}(function(e,t){for(var i in a.rows){var n=a.rows[i],l=T(a.getRowObj(n)),o=T(a.getRowObj(n,!0));-1<String(n[e]).indexOf(t)?(l.removeClass("row_hide"),o.removeClass("row_hide")):(l.addClass("row_hide"),o.addClass("row_hide"))}},400)(e,t)},_initBuildGridHeader:function(){var n=this,e=this.options;if(n.gridtablewidth=0,n.f.gridtablewidth=0,n.colResizable){for(var t in n.colResizable)n.colResizable[t].destroy();n.colResizable=null}n.colResizable={},T("tbody:first",n.gridheader).html(""),T("tbody:first",n.f.gridheader).html("");for(var i=1;i<=n._columnMaxLevel;i++){var l=n.getColumns(i),o=i==n._columnMaxLevel,a=T("<tr class='lee-grid-hd-row'></tr>"),r=T("<tr class='lee-grid-hd-row'></tr>");o||a.add(r).addClass("lee-grid-hd-mul"),T("tbody:first",n.gridheader).append(a),T("tbody:first",n.f.gridheader).append(r),T(l).each(function(e,t){if((t.frozen?r:a).append(n._createHeaderCell(t)),t.__leaf){var i=t._width;t._hide||(t.frozen?n.f.gridtablewidth+=(parseInt(i)?parseInt(i):0)+1:n.gridtablewidth+=(parseInt(i)?parseInt(i):0)+1)}})}if(0<n._columnMaxLevel){var s=e.headerRowHeight*n._columnMaxLevel;e.showHeaderFilter&&(s+=e.filterRowHeight),n.gridheader.add(n.f.gridheader).height(s),e.rownumbers&&e.frozenRownumbers&&n.f.gridheader.find("td:first").height(s)}n._updateFrozenWidth(),T("div:first",n.gridheader).width(n.gridtablewidth+40)},_initBuildPopup:function(){var l=this,t=this.options;if(T(":checkbox",l.popup).unbind(),T("tbody tr",l.popup).remove(),T(l.columns).each(function(e,t){if(!t.issystem&&0!=t.isAllowHide){var i='checked="checked"';t._hide&&(i="");var n=t.display;T("tbody",l.popup).append('<tr><td class="l-column-left"\n><input type="checkbox" '+i+' class="l-checkbox" columnindex="'+e+'"/></td><td class="l-column-right">'+n+"</td></tr>")}}),T.fn.leeCheckBox&&T("input:checkbox",l.popup).leeCheckBox({onBeforeClick:function(e){return!e.checked||!(T("input:checked",l.popup).length<=t.minColToggle)}}),t.allowHideColumn){T("tr",l.popup).hover(function(){T(this).addClass("l-popup-row-over")},function(){T(this).removeClass("l-popup-row-over")});var e=function(){if(T("input:checked",l.popup).length+1<=t.minColToggle)return!1;l.toggleCol(parseInt(T(this).attr("columnindex")),this.checked,!0)};T.fn.leeCheckBox?T(":checkbox",l.popup).bind("change",e):T(":checkbox",l.popup).bind("click",e)}},_initHeight:function(){var e=this,t=this.options;"auto"==t.height&&(e.gridbody.height("auto"),e.f.gridbody.height("auto")),t.width&&e.grid.width(t.width),e._onResize.call(e)},_initFootbar:function(){var e=this,i=this.options;if(i.usePager){if(i.pagerRender)return void e.toolbar.html(i.pagerRender.call(e));if(i.scrollToPage)return void e.toolbar.hide();var n="",l=-1;T(i.pageSizeOptions).each(function(e,t){i.pageSize==t&&(l=e),n+="<option value='"+t+"'  >"+t+"</option>"}),T(".selectpagesize",e.toolbar).append("<select name='rp'>"+n+"</select>"),-1!=l&&(T(".selectpagesize select",e.toolbar)[0].selectedIndex=l),i.switchPageSizeApplyComboBox&&T.fn.leeDropDown&&T(".selectpagesize select",e.toolbar).leeDropDown({onBeforeSelect:function(){return!(i.url&&e.isDataChanged&&!confirm(i.isContinueByDataChanged))},width:45})}else e.toolbar.hide()},_searchData:function(e,t){this.options;for(var i=new Array,n=0;n<e.length;n++)t(e[n],n)&&(i[i.length]=e[n]);return i},_clearGrid:function(){var e=this;this.options;for(var t in e._fixRows(),e.rows){var i=T(e.getRowObj(e.rows[t]));e.enabledFrozen()&&(i=i.add(e.getRowObj(e.rows[t],!0))),i.unbind()}e.gridbody.html(""),e.f.gridbody.html(""),e.recordNumber=0,e.records={},e.rows=[],e._fixRows(),e.selected=[],e.totalNumber=0,e.editorcounter=0},_fixRows:function(){this.options;if(this.rows)for(var e in this.rows)T.isFunction(this.rows[e])&&delete this.rows[e]},_fillGridBody:function(e,i,t){var n=this,l=this.options,o="scrollappend"==t?[]:['<div class="lee-grid-body-inner"><table class="lee-grid-body-table" cellpadding=0 cellspacing=0><tbody>'];if(n.enabledGroup()){var a=[],r=[];for(var s in n.groups=r,e){var d=e[s],c=d[l.groupColumnName],u=T.inArray(c,a);-1==u&&(a.push(c),u=a.length-1,r.push([])),r[u].push(d)}T(r).each(function(e,t){1==r.length&&o.push('<tr class="lee-grid-grouprow lee-grid-grouprow-last lee-grid-grouprow-first"'),e==r.length-1?o.push('<tr class="lee-grid-grouprow lee-grid-grouprow-last"'):0==e?o.push('<tr class="lee-grid-grouprow lee-grid-grouprow-first"'):o.push('<tr class="lee-grid-grouprow"'),o.push(' groupindex"='+e+'" >'),o.push('<td colSpan="'+n.columns.length+'" class="lee-grid-grouprow-cell">'),o.push('<span class="lee-icon lee-grid-group-togglebtn"></span>'),l.groupRender?o.push(l.groupRender(a[e],t,l.groupColumnDisplay)):o.push(l.groupColumnDisplay+":"+a[e]),o.push("</td>"),o.push("</tr>"),o.push(n._getHtmlFromData(t,i)),n.isTotalSummary()&&o.push(n._getTotalSummaryHtml(t,"lee-grid-totalsummary-group",i))})}else o.push(n._getHtmlFromData(e,i));if("scrollappend"==!t&&o.push("</tbody></table></div>"),"scrollappend"==t?(i?n.f.gridbody:n.gridbody).find("tbody:first").append(o.join("")):(i?n.f.gridbody:n.gridbody).html(o.join("")),i&&(n.f.gridbody.find(">l-jplace").remove(),n.f.gridbody.append('<div class="l-jplace"></div>')),l.usePager&&l.scrollToPage&&!l.scrollToAppend){var h=i?n.f.gridbody.find("> .lee-grid-body-inner"):n.gridbody.find("> .lee-grid-body-inner"),p=h.find("> .l-scrollreplacetop");(p=p.length?p:T('<div class="l-scrollreplacetop"></div>').prependTo(h)).css("width","80%").height(n.lastScrollTop),(p=(p=h.find("> .l-scrollreplacebottom")).length?p:T('<div class="l-scrollreplacebottom"></div>').appendTo(h)).css("width","80%").height((l.pageCount-l.newPage)*n._getOnePageHeight())}n.enabledGroup()||n._bulidTotalSummary(i),T("> div:first",n.gridbody).width(n.gridtablewidth),n._onResize()},_showData:function(e){var t=this,i=this.options;t.changedCells={};var n=t.currentData[i.root];if(i.usePager&&("server"==i.dataAction&&t.data&&t.data[i.record]?i.total=t.data[i.record]:t.filteredData&&t.filteredData[i.root]?i.total=t.filteredData[i.root].length:t.data&&t.data[i.root]?i.total=t.data[i.root].length:n&&(i.total=n.length),i.page=i.newPage,i.total||(i.total=0),i.page||(i.page=1),i.pageCount=Math.ceil(i.total/i.pageSize),i.pageCount||(i.pageCount=1),i.scrollToPage||t._buildPager()),T(".l-bar-btnloading:first",t.toolbar).removeClass("l-bar-btnloading"),0!=t.trigger("beforeShowData",[t.currentData]))if("scrollappend"!=e&&t._clearGrid(),t.isDataChanged=!1,n&&n.length){if(t.gridview.removeClass("lee-grid-empty"),T(t.element).removeClass("lee-empty"),T(".lee-grid-empty-wrap",t.gridview).remove(),T(".l-bar-btnload:first span",t.toolbar).removeClass("l-disabled"),t._updateGridData(),t.enabledFrozen()&&t._fillGridBody(t.rows,!0,e),t._fillGridBody(t.rows,!1,e),t.trigger("SysGridHeightChanged"),"scroll"==e&&t.trigger("sysScrollLoaded"),i.totalRender&&(T(".l-panel-bar-total",t.element).remove(),T(".l-panel-bar",t.element).before('<div class="l-panel-bar-total">'+i.totalRender(t.data,t.filteredData)+"</div>")),i.mouseoverRowCssClass)for(var l in t.rows){var o=T(t.getRowObj(t.rows[l]));t.enabledFrozen()&&(o=o.add(t.getRowObj(t.rows[l],!0))),o.bind("mouseover.gridrow",function(){t._onRowOver(this,!0)}).bind("mouseout.gridrow",function(){t._onRowOver(this,!1)})}t._fixHeight(),i.pagerRender?t.toolbar.html(i.pagerRender.call(t)):(t.gridbody.trigger("scroll.grid"),t.trigger("afterShowData",[t.currentData]))}else{if(t.gridview.addClass("lee-grid-empty"),T(t.element).addClass("lee-empty"),T("<div></div>").addClass("lee-grid-body-inner").appendTo(t.gridbody).css({width:t.gridheader.find(">div:first").width()-40,height:"100%"}),i.pagerRender)return void t.toolbar.html(i.pagerRender.call(t));if(t._onResize.leeDefer(t,50),i.noDataRender){var a;a=i.headerRowHeight*t._columnMaxLevel+1;var r;r=i.noDataRender.call(t),0<T(".lee-grid-empty-wrap",t.gridview).length?T(".lee-grid-empty-wrap",t.gridview).html(r).css("top",a):T("<div>"+r+"</div>").addClass("lee-grid-empty-wrap").appendTo(t.gridview).css("top",a)}t.trigger("afterShowData",[t.currentData])}},_fixHeight:function(){var e=this,t=this.options;if(!t.fixedCellHeight&&t.frozen){var i,n;for(var l in e.columns){var o=e.columns[l];if(i&&n)break;!o.frozen||i?o.frozen||n||(n=o):i=o}if(i&&n)for(var a in e.records){var r=e.getCellObj(a,i),s=e.getCellObj(a,n);T(r).add(s).height("auto");var d=Math.max(T(r).height(),T(s).height());T(r).add(s).height(d)}}},_getRowDomId:function(e,t){return this.id+"|"+(t?"1":"2")+"|"+e.__id},_getCellDomId:function(e,t){return this._getRowDomId(e,t.frozen)+"|"+t.__id},_getHtmlFromData:function(e,n){if(!e)return"";for(var l=this,o=this.options,a=[],t=0,i=e.length;t<i;t++){var r=e[t],s=r.__id;if(r){if(a.push("<tr"),a.push(' id="'+l._getRowDomId(r,n)+'"'),a.push(' class="lee-grid-row'),!n&&l.enabledCheckbox()&&o.isChecked&&o.isChecked(r)?(l.select(r),a.push(" lee-selected")):l.isSelected(r)?a.push(" lee-selected"):o.isSelected&&o.isSelected(r)&&(l.select(r),a.push(" lee-selected")),r.__index%2==1&&o.alternatingRow&&a.push(" lee-grid-row-alt"),o.rowClsRender){var d=o.rowClsRender(r,s);d&&a.push(" "+d)}if(a.push('" '),o.rowAttrRender&&a.push(o.rowAttrRender(r,s)),o.tree&&l.collapsedRows&&l.collapsedRows.length)(function(){for(var e=l.getParent(r);e;){if(-1!=T.inArray(e,l.collapsedRows))return!0;e=l.getParent(e)}return!1})()&&a.push(' style="display:none;" ');else if(o.tree&&o.tree.isExtend){(function(){for(var e=l.getParent(r);e;){if(0==o.tree.isExtend(e))return!0;e=l.getParent(e)}return!1})()&&a.push(' style="display:none;" ')}a.push(">"),T(l.columns).each(function(e,t){if(n==t.frozen){if(a.push("<td"),a.push(' id="'+l._getCellDomId(r,this)+'"'),this.isrownumber)return a.push(' class="lee-grid-row-cell lee-grid-row-cell-rownumbers" style="width:'+this.width+"px;height:"+o.rowHeight+'px;"><div class="lee-grid-row-cell-inner"'),o.fixedCellHeight,a.push(' style = "" '),void a.push(">"+(parseInt(r.__index)+1)+"</div></td>");if(this.ischeckbox)return a.push(' class="lee-grid-row-cell lee-grid-row-cell-checkbox" style="width:'+this.width+"px;height:"+o.rowHeight+'px;"><div class="lee-grid-row-cell-inner"'),o.fixedCellHeight,a.push(' style = "" '),a.push(">"),a.push('<span class="lee-grid-row-cell-btn-checkbox"></span>'),void a.push("</div></td>");if(this.isdetail)return a.push(' class="lee-grid-row-cell lee-grid-row-cell-detail" style="width:'+this.width+"px;height:"+o.rowHeight+'px;"><div class="lee-grid-row-cell-inner"'),o.fixedCellHeight,a.push(' style = "" '),a.push(">"),o.isShowDetailToggle&&!o.isShowDetailToggle(r)||a.push('<span class="lee-grid-row-cell-detailbtn"></span>'),void a.push("</div></td>");var i=this._width;a.push(' class="lee-grid-row-cell '),l.changedCells[s+"_"+this.__id]&&a.push("lee-grid-row-cell-edited "),this.islast&&a.push("lee-grid-row-cell-last "),a.push('"'),a.push(' style = "'),a.push("width:"+i+"px; "),o.fixedCellHeight&&a.push("height:"+o.rowHeight+"px;"),t._hide&&a.push("display:none;"),a.push(' ">'),a.push(l._getCellHtml(r,t)),a.push("</td>")}}),a.push("</tr>")}}return a.join("")},_getCellHtml:function(e,t){this.options;if(t.isrownumber)return'<div class="lee-grid-row-cell-inner">'+(parseInt(e.__index)+1)+"</div>";var i=[];i.push('<div class="lee-grid-row-cell-inner"'),i.push(' style = "width:'+parseInt(t._width-8)+"px;"),t.align&&i.push("text-align:"+t.align+";");var n=this._getCellContent(e,t);return i.push('">'+n+"</div>"),i.join("")},_setValueByName:function(e,t,i){if(!e||!t)return null;if(-1==t.indexOf("."))e[t]=i;else try{new Function("data,value","data."+t+"=value;")(e,i)}catch(e){}},_getValueByName:function(e,t){if(!e||!t)return null;if(-1==t.indexOf("."))return e[t];try{return new Function("data","return data."+t+";")(e)}catch(e){return null}},_getCellContent:function(e,t){var i=this,n=this.options;if(!e||!t)return"";if(t.isrownumber)return parseInt(e.__index)+1;e.__id;var l=e.__index,o=i._getValueByName(e,t.name),a=i._getValueByName(e,t.textField),r="";return t.render?r=t.render.call(i,e,l,o,t,i.rows.length):n.formatters[t.type]?r=n.formatters[t.type].call(i,o,t):null!=a?r=a.toString():null!=o&&(r=o.toString()),n.tree&&(null!=n.tree.columnName&&n.tree.columnName==t.name||null!=n.tree.columnId&&n.tree.columnId==t.id)&&(r=i._getTreeCellHtml(r,e)),r||""},_getTreeCellHtml:function(e,t){var i=t.__level,n=this.options,l=!1;l=null==this.collapsedRows?n.tree.isExtend(t):-1==T.inArray(t,this.collapsedRows||[]);var o=n.tree.isParent(t),a="";i=parseInt(i)||1;for(var r=1;r<i;r++)a+="<div class='lee-grid-tree-space'></div>";var s=!1;return t.children&&0==t.children.length&&(s=!0),a+=l&&o&&!s?"<div class='lee-icon lee-grid-tree-space lee-grid-tree-link lee-grid-tree-link-open'></div>":o?"<div class='lee-icon lee-grid-tree-space lee-grid-tree-link lee-grid-tree-link-close'></div>":"<div class='lee-grid-tree-space'></div>",a+=this._getIconHtml(t),a+="<span class='lee-grid-tree-content'>"+e+"</span>"},_getIconHtml:function(e){var t=e.treeicon;if(t){if("function"==typeof t)return t.call(this,e);if("string"==typeof t)return"<i class='tree-grid-icon icon-img icon-img-"+t+"'></i>"}return this.options.treeIconRender?this.options.treeIconRender.call(this,e):""},_applyEditor:function(e){var t=this,i=this.options,n=e,l=n.id.split("|"),o=l[l.length-1],a=t._columns[o],r=T(n).parent(),s=t.getRow(r[0]),d=s.__id,c=s.__index;if(!i.disabled){if(0==t.trigger("beforeApplyEditor",[c,s,a]))return!1;if(a&&a.editor){var u=a.name;a.columnindex;if(a&&!a.readonly&&a.editor&&!a.editor.readonly&&a.editor.type&&i.editors[a.editor.type]){var h=t._getValueByName(s,u),p={record:s,value:h,column:a,rowindex:c};if(a.textField&&(p.text=t._getValueByName(s,a.textField)),0==t.trigger("beforeEdit",[p]))return!1;t.lastEditRow=s,leeUI.lastEditGrid=t;var g=i.editors[a.editor.type],f=T(n),v=(T(n).offset(),T(n).width()),m=T(n).height(),b=T("<div class='lee-grid-editor'></div>").appendTo(f),w=0,x=0,y=f.position(),_=t.gridbody.position(),C=t.gridview2.position(),k=(i.toolbar?t.topbar.parent().outerHeight():0)+(i.title?t.header.outerHeight():0);w=y.left+_.left+C.left,x=y.top+_.top+C.top+k;x=(m-23)/2,w=0,t.setCellEditing(s,a,!0);window.ActiveXObject||window;w+=i.editorLeftDiff||0,x+=i.editorTopDiff||0,b.css({left:w,top:x}).show(),a.textField&&(p.text=t._getValueByName(s,a.textField));var I=t._createEditor(g,b,p,v,m-1);t.editor={editing:!0,editor:g,input:I,editParm:p,container:b},t.unbind("sysEndEdit"),t.bind("sysEndEdit",function(){var e=g.getValue(I,p);a.textField&&g.getText&&(p.text=g.getText(I,p)),g.getSelected&&(p.selected=g.getSelected(I,p)),e!=h&&(T(n).addClass("lee-grid-row-cell-edited"),t.changedCells[d+"_"+a.__id]=!0,p.value=e),a.editor.onChange&&a.editor.onChange.call(I,p,t),t._checkEditAndUpdateCell(p)&&a.editor.onChanged&&a.editor.onChanged.call(I,p,t)}),t.trigger("afterApplyEditor",[t.editor])}}}},_checkEditAndUpdateCell:function(e){var t=this;this.options;if(0==t.trigger("beforeSubmitEdit",[e]))return!1;var i=e.column;return null!=e.text&&i.textField&&t._setValueByName(e.record,i.textField,e.text),t.updateCell(i,e.value,e.record),(i.render||t.enabledTotal())&&t.reRender({column:i}),t.reRender({rowdata:e.record}),t.trigger("afterSubmitEdit",[e]),!0},_getCurrentPageData:function(e){var t=this.options,n={};if(n[t.root]=[],!e||!e[t.root]||!e[t.root].length)return n[t.record]=0,n;for(n[t.record]=e[t.root].length,t.newPage||(t.newPage=1),i=(t.newPage-1)*t.pageSize;i<e[t.root].length&&i<t.newPage*t.pageSize;i++)n[t.root].push(e[t.root][i]);return n},_compareData:function(e,t,i,n){var l=this.options,o=e[i],a=t[i];return null==o&&null!=a?1:null==o&&null==a?0:null!=o&&null==a?-1:l.sorters[n]?l.sorters[n].call(this,o,a):o<a?-1:a<o?1:0},_getTotalInfo:function(e,t){var i=this.options;try{if(!e.totalSummary)return null;var n=0,l=0,o=0,a=0,r=0;if(t&&t.length){r=parseFloat(t[0][e.name]),a=parseFloat(t[0][e.name]);for(var s=0;s<t.length;s++)if("delete"!=t[s][i.statusName]){l+=1;var d=t[s][e.name];"string"==typeof d&&(d=d.replace(/\$|\,/g,"")),(d=parseFloat(d))&&(n+=d,r<d&&(r=d),d<a&&(a=d))}o=1*n/t.length}return{sum:n,count:l,avg:o,min:a,max:r}}catch(e){return{}}},_getTotalCellContent:function(e,t){this.options;var i=[];if(e.totalSummary){var n=function(e){for(var t=0;t<a.length;t++)if(a[t].toLowerCase()==e.toLowerCase())return!0;return!1},l=this._getTotalInfo(e,t);if(e.totalSummary.render){var o=e.totalSummary.render(l,e,this.data);i.push(o)}else if(e.totalSummary.type&&l){var a=e.totalSummary.type.split(",");n("sum")&&i.push("<div>Sum="+l.sum.toFixed(2)+"</div>"),n("tsum")&&i.push("<div>"+sum.toFixed(0)+"</div>"),n("count")&&i.push("<div>Count="+l.count+"</div>"),n("max")&&i.push("<div>Max="+l.max.toFixed(2)+"</div>"),n("min")&&i.push("<div>Min="+l.min.toFixed(2)+"</div>"),n("avg")&&i.push("<div>Avg="+l.avg.toFixed(2)+"</div>")}}return i.join("")},_getTotalSummaryHtml:function(i,e,n){var l=this,o=this.options,a=[];return e?a.push('<tr class="lee-grid-totalsummary '+e+'">'):a.push('<tr class="lee-grid-totalsummary">'),T(l.columns).each(function(e,t){this.frozen==n&&(this.isrownumber?a.push('<td class="lee-grid-totalsummary-cell lee-grid-totalsummary-cell-rownumbers" style="width:'+this.width+"px;height:"+o.rowHeight+'px;"><div>&nbsp;</div></td>'):this.ischeckbox?a.push('<td class="lee-grid-totalsummary-cell lee-grid-totalsummary-cell-checkbox" style="width:'+this.width+"px;height:"+o.rowHeight+'px;"><div>&nbsp;</div></td>'):this.isdetail?a.push('<td class="lee-grid-totalsummary-cell lee-grid-totalsummary-cell-detail" style="width:'+this.width+"px;height:"+o.rowHeight+'px;"><div>&nbsp;</div></td>'):(a.push('<td class="lee-grid-totalsummary-cell'),this.islast&&a.push(" lee-grid-totalsummary-cell-last"),a.push('" '),a.push(' style="height:'+o.rowHeight+'px;"'),a.push('id="'+l.id+"|total"+l.totalNumber+"|"+t.__id+'" '),a.push('width="'+this._width+'" '),columnname=this.columnname,columnname&&a.push('columnname="'+columnname+'" '),a.push('columnindex="'+e+'" '),a.push('><div class="lee-grid-totalsummary-cell-inner"'),t.align&&a.push(' style="text-Align:'+t.align+';"'),a.push(">"),a.push(l._getTotalCellContent(t,i)),a.push("</div></td>")))}),a.push("</tr>"),n||l.totalNumber++,a.join("")},_bulidTotalSummary:function(e){var t=this,i=this.options;if(!t.isTotalSummary())return!1;if(!t.currentData||0==t.currentData[i.root].length)return!1;var n=T(t._getTotalSummaryHtml(t.currentData[i.root],null,e));T("tbody:first",e?t.f.gridbody:t.gridbody).append(n),e?t.totalRow1=n:t.totalRow2=n},updateTotalSummary:function(){this.options;this.reRender({totalOnly:!0})},setPage:function(e){this.options.page=e,this._buildPager()},_buildPager:function(){var e=this,t=this.options;if(!t.pagerRender){T(".pcontrol input",e.toolbar).val(t.page),t.pageCount||(t.pageCount=1),T(".pcontrol span",e.toolbar).html(t.pageCount);var i=parseInt((t.page-1)*t.pageSize)+1,n=parseInt(i)+parseInt(t.pageSize)-1;t.total||(t.total=0),t.total<n&&(n=t.total),t.total||(i=n=0),i<0&&(i=0),n<0&&(n=0);var l=t.pageStatMessage;l=(l=(l=(l=l.replace(/{from}/,i)).replace(/{to}/,n)).replace(/{total}/,t.total)).replace(/{pagesize}/,t.pageSize),0==t.total&&(l=t.noRecordMessage),T(".lee-bar-text",e.toolbar).html(l),t.total||T(".lee-bar-btnfirst,.lee-bar-btnprev,.lee-bar-btnnext,.lee-bar-btnlast",e.toolbar).addClass("lee-disabled"),t.hideLoadButton&&(T(".lee-bar-btnload:first",e.toolbar).parent().hide(),T(".lee-bar-btnload:first",e.toolbar).parent().next().hide()),1==t.page?(T(".lee-bar-btnfirst ",e.toolbar).addClass("lee-disabled"),T(".lee-bar-btnprev ",e.toolbar).addClass("lee-disabled")):t.page>t.pageCount&&0<t.pageCount&&(T(".lee-bar-btnfirst ",e.toolbar).removeClass("lee-disabled"),T(".lee-bar-btnprev ",e.toolbar).removeClass("lee-disabled")),t.page==t.pageCount?(T(".lee-bar-btnlast ",e.toolbar).addClass("lee-disabled"),T(".lee-bar-btnnext ",e.toolbar).addClass("lee-disabled")):t.page<t.pageCount&&0<t.pageCount&&(T(".lee-bar-btnlast ",e.toolbar).removeClass("lee-disabled"),T(".lee-bar-btnnext ",e.toolbar).removeClass("lee-disabled"))}},_getRowIdByDomId:function(e){return e.split("|")[2]},_getRowByDomId:function(e){return this.records[this._getRowIdByDomId(e)]},_isEditing:function(e){if(e.hasClass("l-box-dateeditor")||e.hasClass("l-box-select"))return!0;if(e.hasClass("l-dialog")){var t=[];if(e.find(".l-dialog").each(function(){var e=T(this).attr("leeuiid");e&&t.push(e)}),this._editorIncludeCotrols(t))return!0}return!1},_getSrcElementByEvent:function(e){var t=this,i=e.target||e.srcElement,n=T(i).parents().add(i),l=function(e){for(var t=0,i=n.length;t<i;t++)if("string"==typeof e){if(T(n[t]).hasClass(e))return n[t]}else if("object"==typeof e&&n[t]==e)return n[t];return null};if(l("lee-grid-editor"))return{editing:!0,editor:l("lee-grid-editor")};if(-1==n.index(this.element))return t._isEditing(n)?{editing:!0}:{out:!0};var o=!1;if(n.hasClass("lee-grid-detailpanel")&&t.detailrows)for(var a=0,r=t.detailrows.length;a<r;a++)if(-1!=n.index(t.detailrows[a])){o=!0;break}var s={grid:l("lee-panel"),indetail:o,frozen:!!l(t.gridview1[0]),header:l("lee-panel-header"),gridheader:l("lee-grid-header"),gridbody:l("lee-grid-body"),total:l("lee-panel-bar-total"),popup:l("lee-grid-popup"),toolbar:l("lee-panel-footer")};if(s.gridheader&&(s.hrow=l("lee-grid-hd-row"),s.hcell=l("lee-grid-hd-cell"),s.hcelltext=l("lee-grid-hd-cell-text"),s.checkboxall=l("lee-grid-hd-cell-checkbox"),s.hcell)){var d=s.hcell.id.split("|")[2];s.column=t._columns[d]}return s.gridbody&&(s.row=l("lee-grid-row"),s.cell=l("lee-grid-row-cell"),s.checkbox=l("lee-grid-row-cell-btn-checkbox"),s.groupbtn=l("lee-grid-group-togglebtn"),s.grouprow=l("lee-grid-grouprow"),s.detailbtn=l("lee-grid-row-cell-detailbtn"),s.detailrow=l("lee-grid-detailpanel"),s.totalrow=l("lee-grid-totalsummary"),s.totalcell=l("lee-grid-totalsummary-cell"),s.rownumberscell=T(s.cell).hasClass("lee-grid-row-cell-rownumbers")?s.cell:null,s.detailcell=T(s.cell).hasClass("lee-grid-row-cell-detail")?s.cell:null,s.checkboxcell=T(s.cell).hasClass("lee-grid-row-cell-checkbox")?s.cell:null,s.treelink=l("lee-grid-tree-link"),s.editor=l("lee-grid-editor"),s.row&&(s.data=this._getRowByDomId(s.row.id)),s.cell&&(s.editing=T(s.cell).hasClass("lee-grid-row-cell-editing")),s.editor&&(s.editing=!0),s.editing&&(s.out=!1)),s.toolbar&&(s.first=l("lee-bar-btnfirst"),s.last=l("lee-bar-btnlast"),s.next=l("lee-bar-btnnext"),s.prev=l("lee-bar-btnprev"),s.load=l("lee-bar-btnload"),s.button=l("lee-bar-button")),s},_editorIncludeCotrols:function(e){var t=this;this.options;if(!e||!e.length)return!1;if(t.editor&&t.editor.input){if(t._controlIncludeCotrols(t.editor.input,e))return!0}else if(t.editors)for(var i in t.editors)if(t.editors[i])for(var n in t.editors[i]){var l=t.editors[i][n];if(l&&l.input&&t._controlIncludeCotrols(l.input,e))return!0}return!1},_controlIncludeCotrols:function(e,t){this.options;if(!e||!e.includeControls||!e.includeControls.length)return!1;for(var i=0;i<e.includeControls.length;i++){var n=e.includeControls[i];if(-1!=T.inArray(n.id,t))return!0}return!1},_getOnePageHeight:function(){var e=this.options;return(parseFloat(e.rowHeight||24)+1)*parseInt(e.pageSize)},_setEvent:function(){var v=this,m=this.options;v.grid.bind("mousedown.grid",function(e){v._onMouseDown.call(v,e)}),v.grid.bind("dblclick.grid",function(e){v._onDblClick.call(v,e)}),v.grid.bind("contextmenu.grid",function(e){return v._onContextmenu.call(v,e)}),T(document).bind("mouseup.grid."+this.id,function(e){v._onMouseUp.call(v,e)}),T(document).bind("click.grid."+this.id,function(e){v._onClick.call(v,e)}),T(window).bind("resize.grid."+this.id,function(e){v._onResize.call(v)}),v.gridbody.bind("keydown.grid",function(e){9==e.keyCode&&v.endEditToNext()}),v.gridbody.bind("scroll.grid",function(){var e=v.gridbody.scrollLeft(),t=v.gridbody.scrollTop();if(null!=t&&v.f.gridbody.scrollTop(t),null!=e&&(v.gridheader[0].scrollLeft=e),m.scrollToPage&&m.usePager&&!v.loading){var i=v.gridbody.find(".lee-grid-body-inner:first").height(),n=t+v.gridbody.height();if(m.scrollToAppend)m.newPage!=m.pageCount&&i<=n&&v.reload(m.newPage+1,"scrollappend");else{var l=i<=n?m.pageCount:Math.ceil(n/v._getOnePageHeight());v.scrollLoading||(v.scrollLoading=!0,v.lastScrollTop=t,v.unbind("sysScrollLoaded"),v.bind("sysScrollLoaded",function(){v.gridbody.scrollTop(t),setTimeout(function(){v.scrollLoading=!1},500)}),v.scrollLoading=!0,v.reload(l,"scroll"))}}v.trigger("SysGridHeightChanged")}),T("select",v.toolbar).change(function(){if(v.isDataChanged&&"local"!=m.dataAction&&!confirm(m.isContinueByDataChanged))return!1;m.newPage=1,m.pageSize=this.value,v.loadData("local"!=m.dataAction&&m.where)}),T("span.pcontrol :text",v.toolbar).blur(function(e){v.changePage("input")}),T("div.l-bar-button",v.toolbar).hover(function(){T(this).addClass("l-bar-button-over")},function(){T(this).removeClass("l-bar-button-over")}),T.fn.leeDrag&&m.colDraggable&&(v.colDroptip=T("<div class='l-drag-coldroptip' style='display:none'><div class='l-drop-move-up'></div><div class='l-drop-move-down'></div></div>").appendTo("body"),v.gridheader.add(v.f.gridheader).leeDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(e,t){var i=v._getSrcElementByEvent(t);if(i.hcell&&i.column){var n=T(".lee-grid-hd-cell-text:first",i.hcell).html(),l=T("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div></div>").appendTo("body");return l.append(n),l}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),v.children[this.id]=this},onStartDrag:function(e,t){if(2==t.button)return!1;if(v.colresizing)return!1;this.set("cursor","default");var i=v._getSrcElementByEvent(t);if(!i.hcell||!i.column||i.column.issystem||i.hcelltext)return!1;if(-1!=T(i.hcell).css("cursor").indexOf("resize"))return!1;this.draggingColumn=i.column,v.coldragging=!0;var n=v.grid.offset();this.validRange={top:n.top,bottom:n.top+v.gridheader.height(),left:n.left-10,right:n.left+v.grid.width()+10}},onDrag:function(e,t){this.set("cursor","default");var i=this.draggingColumn;if(!i)return!1;if(v.colresizing)return!1;null==v.colDropIn&&(v.colDropIn=-1);var n=t.pageX,l=t.pageY,o=!1,a=(v.grid.offset(),this.validRange);if(n<a.left||n>a.right||l>a.bottom||l<a.top)return v.colDropIn=-1,v.colDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no");for(var r in v._columns){var s=v._columns[r];if(i!=s){if(!s.issystem){var d=!!(s.__level==i.__level)&&!!o;if(i.frozen!=s.frozen&&(d=!s.frozen),-1==v.colDropIn||v.colDropIn==r){var c=document.getElementById(s.__domid),u=T(c).offset(),h={top:u.top,bottom:u.top+T(c).height(),left:u.left-10,right:u.left+10};if(d){var p=T(c).width();h.left+=p,h.right+=p}if(n>h.left&&n<h.right&&l>h.top&&l<h.bottom){var g=m.headerRowHeight;s.__rowSpan&&(g*=s.__rowSpan),v.colDroptip.css({left:h.left+5,top:h.top-9,height:g+18}).show(),v.colDropIn=r,v.colDropDir=d?"right":"left",this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no").addClass("l-drop-yes");break}-1!=v.colDropIn&&(v.colDropIn=-1,v.colDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no"))}}}else o=!0}},onStopDrag:function(e,t){var i=this.draggingColumn;v.coldragging=!1,-1!=v.colDropIn&&(v.changeCol.leeDefer(v,0,[i,v.colDropIn,"right"==v.colDropDir]),v.colDropIn=-1),v.colDroptip.hide(),this.set("cursor","default")}})),T.fn.leeDrag&&m.rowDraggable&&(v.rowDroptip=T("<div class='l-drag-rowdroptip' style='display:none'></div>").appendTo("body"),v.gridbody.add(v.f.gridbody).leeDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(e,t){if(v._getSrcElementByEvent(t).row){var i=m.draggingMessage.replace(/{count}/,e.draggingRows?e.draggingRows.length:1);return m.rowDraggingRender&&(i=m.rowDraggingRender(e.draggingRows,e,v)),T("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div>"+i+"</div>").appendTo("body")}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),v.children[this.id]=this},onStartDrag:function(e,t){if(2==t.button)return!1;if(v.colresizing)return!1;if(!v.columns.length)return!1;this.set("cursor","default");var i=v._getSrcElementByEvent(t);if(!i.cell||!i.data||i.checkbox)return!1;var n=i.cell.id.split("|"),l=v._columns[n[n.length-1]];if(!(i.rownumberscell||i.detailcell||i.checkboxcell||l==v.columns[0]))return!1;if(v.enabledCheckbox()){if(this.draggingRows=v.getSelecteds(),!this.draggingRows||!this.draggingRows.length)return!1}else this.draggingRows=[i.data];this.draggingRow=i.data,this.set("cursor","move"),v.rowdragging=!0,this.validRange={top:v.gridbody.offset().top,bottom:v.gridbody.offset().top+v.gridbody.height(),left:v.grid.offset().left-10,right:v.grid.offset().left+v.grid.width()+10}},onDrag:function(e,t){var i=this.draggingRow;if(!i)return!1;var n=this.draggingRows?this.draggingRows:[i];if(v.colresizing)return!1;null==v.rowDropIn&&(v.rowDropIn=-1);var l=t.pageX,o=t.pageY,a=!1,r=this.validRange;if(l<r.left||l>r.right||o>r.bottom||o<r.top)return v.rowDropIn=-1,v.rowDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");for(var s in v.rows){var d=v.rows[s],c=d.__id;if(i==d&&(a=!0),-1==T.inArray(d,n)){var u=!!a;if(-1==v.rowDropIn||v.rowDropIn==c){var h=v.getRowObj(c),p=T(h).offset(),g={top:p.top-4,bottom:p.top+T(h).height()+4,left:v.grid.offset().left,right:v.grid.offset().left+v.grid.width()};if(g.left<l&&l<g.right&&g.top<o&&o<g.bottom){var f=p.top;u&&(f+=T(h).height()),v.rowDroptip.css({left:g.left,top:f,width:g.right-g.left}).show(),v.rowDropIn=c,v.rowDropDir=u?"bottom":"top",m.tree&&g.top+5<o&&o<g.bottom-5?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),v.rowDroptip.hide(),v.rowDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),v.rowDroptip.show(),v.rowDropInParent=!1);break}-1!=v.rowDropIn&&(v.rowDropIn=-1,v.rowDropInParent=!1,v.rowDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}}}},onStopDrag:function(e,t){var i=this.draggingRows;v.rowdragging=!1;for(var n=0;n<i.length;n++){var l=i[n].children;l&&(i=T.grep(i,function(e,t){return-1==T.inArray(e,l)}))}if(-1!=v.rowDropIn){var o,a;if(m.tree)a=v.rowDropInParent?v.getRow(v.rowDropIn):(o=v.getRow(v.rowDropIn),v.getParent(o)),v.appendRange(i,a,o,"bottom"!=v.rowDropDir),v.trigger("rowDragDrop",{rows:i,parent:a,near:o,after:"bottom"==v.rowDropDir});else v.moveRange(i,v.rowDropIn,"bottom"==v.rowDropDir),v.trigger("rowDragDrop",{rows:i,parent:a,near:v.getRow(v.rowDropIn),after:"bottom"==v.rowDropDir});v.rowDropIn=-1}v.rowDroptip.hide(),this.set("cursor","default")}}))},_onRowOver:function(e,t){if(!leeUI.draggable.dragging){var i=this,n=this.options,l=i.getRow(e),o=t?"addClass":"removeClass";t&&i.editor.editing&&T("tr."+n.mouseoverRowCssClass,i.gridview).removeClass(n.mouseoverRowCssClass),i.enabledFrozen()&&T(i.getRowObj(l,!0))[o](n.mouseoverRowCssClass),T(i.getRowObj(l,!1))[o](n.mouseoverRowCssClass)}},_onMouseUp:function(e){this.options;if(leeUI.draggable.dragging){var t=this._getSrcElementByEvent(e);t.hcell&&t.column?this.trigger("dragdrop",[{type:"header",column:t.column,cell:t.hcell},e]):t.row&&this.trigger("dragdrop",[{type:"row",record:t.data,row:t.row},e])}},_onMouseDown:function(e){this.options},_onContextmenu:function(e){var t=this,i=this.options,n=t._getSrcElementByEvent(e);if(n.row){if(i.whenRClickToSelect&&t.select(n.data),t.hasBind("contextmenu"))return t.trigger("contextmenu",[{data:n.data,rowindex:n.data.__index,row:n.row},e])}else if(n.hcell){if(!i.allowHideColumn)return!0;var l=T(n.hcell).attr("columnindex");if(null==l)return!0;var o=e.pageX-t.body.offset().left+parseInt(t.body[0].scrollLeft);return l==t.columns.length-1&&(o-=50),t.popup.css({left:o,top:t.gridheader.height()+1}),t.popup.toggle(),!1}},_onDblClick:function(e){this.options;var t=this._getSrcElementByEvent(e);t.row&&this.trigger("dblClickRow",[t.data,t.data.__id,t.row])},_onClick:function(e){var t=e.target||e.srcElement,i=this,n=this.options,l=i._getSrcElementByEvent(e);if(l.out)return i.editor.editing&&!T.leeUI.win.masking&&i.endEdit(),void(n.allowHideColumn&&i.popup.hide());if(!l.indetail&&!l.editing)if(i.editor.editing&&i.endEdit(),n.allowHideColumn&&(l.popup||i.popup.hide()),l.checkboxall){var o=(u=T(l.hrow)).hasClass("lee-checked");if(0==i.trigger("beforeCheckAllRow",[!o,i.element]))return!1;for(var a in o?u.removeClass("lee-checked"):u.addClass("lee-checked"),i.selected=[],i.records)o?i.unselect(i.records[a]):i.select(i.records[a]);i.trigger("checkAllRow",[!o,i.element])}else if(l.hcelltext){var r=T(l.hcelltext).parent().parent();if(!n.enabledSort||!l.column)return;if(0==l.column.isSort)return;if(n.url&&"local"!=n.dataAction&&i.isDataChanged&&!confirm(n.isContinueByDataChanged))return;var s=T(".lee-grid-hd-cell-sort:first",r),d=l.column.name;if(!d)return;0<s.length?s.hasClass("lee-grid-hd-cell-sort-asc")?(s.removeClass("lee-grid-hd-cell-sort-asc").addClass("lee-grid-hd-cell-sort-desc"),r.removeClass("lee-grid-hd-cell-asc").addClass("lee-grid-hd-cell-desc"),i.trigger("ChangeSort",[d,"desc"]),i.changeSort(d,"desc")):s.hasClass("lee-grid-hd-cell-sort-desc")&&(s.removeClass("lee-grid-hd-cell-sort-desc").addClass("lee-grid-hd-cell-sort-asc"),r.removeClass("lee-grid-hd-cell-desc").addClass("lee-grid-hd-cell-asc"),i.trigger("ChangeSort",[d,"asc"]),i.changeSort(d,"asc")):(r.removeClass("lee-grid-hd-cell-desc").addClass("lee-grid-hd-cell-asc"),T(l.hcelltext).after("<span class='lee-icon lee-grid-hd-cell-sort lee-grid-hd-cell-sort-asc'></span>"),i.trigger("ChangeSort",[d,"asc"]),i.changeSort(d,"asc")),T(".lee-grid-hd-cell-sort",i.gridheader).add(T(".lee-grid-hd-cell-sort",i.f.gridheader)).not(T(".lee-grid-hd-cell-sort:first",r)).remove()}else if(l.detailbtn&&n.detail){var c=l.data,u=T([i.getRowObj(c,!1)]);i.enabledFrozen()&&(u=u.add(i.getRowObj(c,!0)));a=c.__id;if(T(l.detailbtn).hasClass("l-open"))n.detail.onCollapse&&n.detail.onCollapse(c,T(".lee-grid-detailpanel-inner:first",h)[0]),u.next("tr.lee-grid-detailpanel").hide(),T(l.detailbtn).removeClass("l-open");else{var h=u.next("tr.lee-grid-detailpanel");if(0<h.length)return h.show(),n.detail.onExtend&&n.detail.onExtend(c,T(".lee-grid-detailpanel-inner:first",h)[0]),T(l.detailbtn).addClass("l-open"),void i.trigger("SysGridHeightChanged");T(l.detailbtn).addClass("l-open");for(var p=0,g=0;g<i.columns.length;g++)i.columns[g].frozen&&p++;var f=T("<tr class='lee-grid-detailpanel'><td><div class='lee-grid-detailpanel-inner' style='display:none'></div></td></tr>"),v=T("<tr class='lee-grid-detailpanel'><td><div class='lee-grid-detailpanel-inner' style='display:none'></div></td></tr>");f.find("div:first").width(i.gridheader.find("div:first").width()-50),f.attr("id",i.id+"|detail|"+a),i.detailrows=i.detailrows||[],i.detailrows.push(f[0]),i.detailrows.push(v[0]);var m=T("div:first",f);m.parent().attr("colSpan",i.columns.length-p),u.eq(0).after(f),0<p&&(v.find("td:first").attr("colSpan",p),u.eq(1).after(v)),n.detail.onShowDetail?(n.detail.onShowDetail(c,m[0],function(){i.trigger("SysGridHeightChanged")}),T("div:first",v).add(m).show().height(n.detail.height||n.detailHeight)):n.detail.render&&(m.append(n.detail.render()),m.show()),i.trigger("SysGridHeightChanged")}}else if(l.groupbtn){var b=T(l.grouprow),w=!0;T(l.groupbtn).hasClass("lee-grid-group-togglebtn-close")?(T(l.groupbtn).removeClass("lee-grid-group-togglebtn-close"),b.hasClass("lee-grid-grouprow-last")&&T("td:first",b).width("auto")):(w=!1,T(l.groupbtn).addClass("lee-grid-group-togglebtn-close"),b.hasClass("lee-grid-grouprow-last")&&T("td:first",b).width(i.gridtablewidth));for(var x=b.next(".lee-grid-row,.lee-grid-totalsummary-group,.lee-grid-detailpanel");0!=x.length;)w?(x.show(),x.hasClass("lee-grid-detailpanel")&&!x.prev().find("td.lee-grid-row-cell-detail:first span.lee-grid-row-cell-detailbtn:first").hasClass("l-open")&&x.hide()):x.hide(),x=x.next(".lee-grid-row,.lee-grid-totalsummary-group,.lee-grid-detailpanel");i.trigger(w?"groupExtend":"groupCollapse"),i.trigger("SysGridHeightChanged")}else if(l.treelink)i.toggle(l.data);else if(l.row&&i.enabledCheckbox()){var y=!!n.selectRowButtonOnly;if(n.enabledEdit&&(y=!0),"a"==t.tagName.toLowerCase())return;if((l.checkbox||!y)&&0!=n.selectable){o=(u=T(l.row)).hasClass("lee-selected");if(0==i.trigger("beforeCheckRow",[!o,l.data,l.data.__id,l.row]))return!1;var _=o?"unselect":"select";if(i[_](l.data),n.tree&&n.autoCheckChildren)for(var C=i.getChildren(l.data,!0),k=(g=0,C.length);g<k;g++)i[_](C[g]);i.trigger("checkRow",[!o,l.data,l.data.__id,l.row])}!l.checkbox&&l.cell&&n.enabledEdit&&n.clickToEdit&&i._applyEditor(l.cell)}else if(l.row&&!i.enabledCheckbox()&&0!=n.selectable)if(l.cell&&n.enabledEdit&&n.clickToEdit&&i._applyEditor(l.cell),T(l.row).hasClass("lee-selected")){if(!n.allowUnSelectRow)return void T(l.row).addClass("lee-selected-again");i.unselect(l.data)}else i.select(l.data);else if(l.toolbar)if(l.first){if(0==i.trigger("toFirst",[i.element]))return!1;i.changePage("first")}else if(l.prev){if(0==i.trigger("toPrev",[i.element]))return!1;i.changePage("prev")}else if(l.next){if(0==i.trigger("toNext",[i.element]))return!1;i.changePage("next")}else if(l.last){if(0==i.trigger("toLast",[i.element]))return!1;i.changePage("last")}else if(l.load){if(T(l.load).hasClass("lee-disabled"))return!1;if(0==i.trigger("reload",[i.element]))return!1;if(n.url&&i.isDataChanged&&!confirm(n.isContinueByDataChanged))return!1;i.loadData(n.where)}},select:function(e){var t=this,i=this.options,n=t.getRow(e),l=n.__id,o=t.getRowObj(l);if(i.rowSelectable&&0!=t.trigger("beforeSelectRow",[n,l,o])){var a=t.getRowObj(l,!0);if(!t.enabledCheckbox()&&!t.ctrlKey||i.isSingleCheck){for(var r in t.selected){var s=t.selected[r];s.__id in t.records&&(T(t.getRowObj(s)).removeClass("lee-selected lee-selected-again"),t.enabledFrozen()&&T(t.getRowObj(s,!0)).removeClass("lee-selected lee-selected-again"))}t.selected=[]}o&&T(o).addClass("lee-selected"),a&&T(a).addClass("lee-selected"),t.selected[t.selected.length]=n,t.trigger("selectRow",[n,l,o])}},cancelSelect:function(){var e=this.getSelectedRow();e&&this.unselect(e)},unselect:function(e){var t=this,i=(this.options,t.getRow(e)),n=i.__id,l=t.getRowObj(n),o=t.getRowObj(n,!0);T(l).removeClass("lee-selected lee-selected-again"),t.enabledFrozen()&&T(o).removeClass("lee-selected lee-selected-again"),t._removeSelected(i),t.trigger("unSelectRow",[i,n,l])},isSelected:function(e){this.options;var t=this.getRow(e);for(var i in this.selected)if(this.selected[i]==t)return!0;return!1},arrayToTree:function(e,t,i){var n=this.options,l="children";if(n.tree&&(l=n.tree.childrenName),!e||!e.length)return[];for(var o=[],a={},r=e.length,s=0;s<r;s++){var d=e[s];a[h(d[t])]=d}for(s=0;s<r;s++){var c=e[s],u=a[h(c[i])];u?(u[l]=u[l]||[],u[l].push(c)):o.push(c)}return o;function h(e){return"string"==typeof e&&(e=e.replace(/[.]/g,"").toLowerCase()),e}},gradeToTree:function(e,t,i,n,l){this.options;for(var o=e.length,a={},r=0;r<o;r++){var s=Number(e[r][i]),d="__mainid",c="__parentID",u=this._getLenByFormat(s,l);e[r][d]=e[r][t],a[e[r][d]]="exit",e[r][c]=e[r][t].substring(0,u)}for(r=0;r<o;r++)a[e[r][c]]||(e[r][c]="");return this.arrayToTree(e,"__mainid","__parentID")},_getLenByFormat:function(e,t){for(var i=0,n=0;n<e-1;n++){var l="";l=t.length>e?t.substring(n,n+1):4,i+=Number(l)}return i},_onResize:function(){var e=this,t=this.options;if(t.height&&"auto"!=t.height){var i=T(window).height(),n=0,l=null;if("string"==typeof t.height&&0<t.height.indexOf("%")){var o=e.grid.parent();t.inWindow?(l=i,l-=parseInt(T("body").css("paddingTop")),l-=parseInt(T("body").css("paddingBottom"))):l=o.height(),n=l*parseInt(t.height)*.01,(t.inWindow||"body"==o[0].tagName.toLowerCase())&&(n-=e.grid.offset().top-parseInt(T("body").css("paddingTop")))}else n=parseInt(t.height);n+=t.heightDiff,e.windowHeight=i,e._setHeight(n)}else e._updateHorizontalScrollStatus.leeDefer(e,10);if(e.enabledFrozen()){var a=e.gridview1.width(),r=e.gridview.width();r-a<=0?e.gridview2.css({width:"auto"}):e.gridview2.css({width:r-a})}e.trigger("SysGridHeightChanged")},_setDisabled:function(e){this.options.disabled=e},destroy:function(){this.element&&T(this.element).remove(),this.options=null,this.grid.unbind("mousedown.grid"),this.grid.unbind("dblclick.grid"),this.grid.unbind("contextmenu.grid"),T(document).unbind("mouseup.grid."+this.id),T(document).unbind("click.grid."+this.id),T(window).unbind("resize.grid."+this.id),leeUI.remove(this)}}),T.leeUI.controls.Grid.prototype.update=T.leeUI.controls.Grid.prototype.updateRow,T.leeUI.controls.Grid.prototype.append=T.leeUI.controls.Grid.prototype.appendRow,T.leeUI.controls.Grid.prototype.enabledTotal=T.leeUI.controls.Grid.prototype.isTotalSummary,T.leeUI.controls.Grid.prototype.add=T.leeUI.controls.Grid.prototype.addRow,T.leeUI.controls.Grid.prototype.update=T.leeUI.controls.Grid.prototype.updateRow,T.leeUI.controls.Grid.prototype.append=T.leeUI.controls.Grid.prototype.appendRow,T.leeUI.controls.Grid.prototype.getSelected=T.leeUI.controls.Grid.prototype.getSelectedRow,T.leeUI.controls.Grid.prototype.getSelecteds=T.leeUI.controls.Grid.prototype.getSelectedRows,T.leeUI.controls.Grid.prototype.getCheckedRows=T.leeUI.controls.Grid.prototype.getSelectedRows,T.leeUI.controls.Grid.prototype.getCheckedRowObjs=T.leeUI.controls.Grid.prototype.getSelectedRowObjs,T.leeUI.controls.Grid.prototype.setOptions=T.leeUI.controls.Grid.prototype.set,T.leeUI.controls.Grid.prototype.reload=T.leeUI.controls.Grid.prototype.loadData,T.leeUI.controls.Grid.prototype.refreshSize=T.leeUI.controls.Grid.prototype._onResize,T.leeUI.controls.Grid.prototype.append=T.leeUI.controls.Grid.prototype.appendRange}(jQuery),leeUI.gridRender={},leeUI.gridRender.DropDownRender=function(e,t,i,n){n.columnname;var l=n.editor.data,o="id";n.editor.valueField&&(o=n.editor.valueField),n.editor.valueColumnName&&(o=n.editor.valueColumnName);var a="text";if(n.editor.textField&&(a=n.editor.textField),n.editor.displayColumnName&&(a=n.editor.displayColumnName),n.editor.isMultiSelect){for(var r=[],s=i.split(";"),d=0;d<l.length;d++)for(var c=0;c<l.length;c++)if(s[d]==l[c][o]){r.push(l[c][a]);break}return r.join(";")}for(var u=0;u<l.length;u++)if(i==l[u][o])return l[u][a]},leeUI.gridRender.ToogleRender=function(e,t,i,n){"boolean"!=typeof i&&(i="1"==i);var l=i?"checked='checked'":"",o=n.readonly?"disabled":"",a=this.id+"_chk_"+n.name+"_"+t,r='<div style="padding:1px;"><input type="checkbox" class="lee-toggle-switch" '+l+" "+o+' id="'+a+'"/>';return r+="<label for='"+a+"'/></div>"},leeUI.gridRender.bind=function(){$("body").on("click",".lee-grid-row-cell-inner .lee-toggle-switch",function(e){var t=$(this).closest(".lee-ui-grid").leeUI(),i=$(this).closest(".lee-grid-row-cell"),n=$(this).closest(".lee-grid-row"),l=t.getRow(n.attr("id").split("|")[2]);console.log(l);var o=t.getColumn(i.attr("id").split("|")[3]);console.log(o);var a=$(this).prop("checked")?"1":"0";"boolean"==typeof l[o.columnname]&&(a=$(this).prop("checked")),t.options.onBeforeCheckEditor?t.options.onBeforeCheckEditor.call(this,l,o.columnname)&&t.updateCell(o.columnname,a,l):t.updateCell.leeDefer(t,200,[o.columnname,a,l]),e.stopPropagation()}),$("body").on("click",".lee-grid-row-cell-inner .grid_delete",function(e){var t=$(this).closest(".lee-ui-grid").leeUI(),i=($(this).closest(".lee-grid-row-cell"),$(this).closest(".lee-grid-row"));t.getRow(i.attr("id").split("|")[2]);e.stopPropagation()}),$("body").on("click",".lee-grid-row-cell-inner .lee-checkbox-wrapper",function(e){if(!$(this).hasClass("lee-disabled")){var t=$(this).closest(".lee-ui-grid").leeUI();if(!t.options.disabled){var i=$(this).closest(".lee-grid-row-cell"),n=$(this).closest(".lee-grid-row"),l=$(i.find("span")),o=t.getRow(n.attr("id").split("|")[2]);console.log(o);var a=t.getColumn(i.attr("id").split("|")[3]);console.log(a),l.toggleClass("lee-checkbox-checked");var r=l.hasClass("lee-checkbox-checked")?"1":"0";t.options.onBeforeCheckEditor?t.options.onBeforeCheckEditor.call(this,o,a.columnname)&&t.updateCell(a.columnname,r,o):t.updateCell.leeDefer(t,200,[a.columnname,r,o]),e.stopPropagation()}}})},$(function(){leeUI.gridRender.bind()}),leeUI.gridRender.CheckboxRender=function(e,t,i,n){i="1"==i;var l='<div class="lee-checkbox-wrapper '+(n.readonly?"  lee-disabled ":"")+"> ";return l+=' rowid = "'+e.__id+'"',l+=' gridid = "'+this.id+'"',l+=' columnname = "'+n.name+'"',l+='><span class="lee-checkbox ',i&&(l+=" lee-checkbox-checked "),l+='"></span></div>'},jQuery.fn.leePager=function(e,t){var h=$.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"上一页",next_text:"下一页",first_text:"首页",last_text:"尾页",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,callback:function(){return!1}},t||{});return this.each(function(){function s(){return Math.ceil(e/h.items_per_page)}function d(e,t){c=e,n();var i=h.callback(e,u);return i||(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0),i}function n(){u.empty();var e,t,i,n=(e=Math.ceil(h.num_display_entries/2),t=s(),i=t-h.num_display_entries,[e<c?Math.max(Math.min(c-e,i),0):0,e<c?Math.min(c+e,t):Math.min(h.num_display_entries,t)]),o=s(),l=function(e,t,i){var n;if(e=e<0?0:e<o?e:o-1,t=jQuery.extend({text:e+1,classes:""},t||{}),e==c)l=i?jQuery("<span disabled>"+t.text+"</span>"):jQuery("<span class='current'>"+t.text+"</span>");else var l=jQuery("<span>"+t.text+"</span>").bind("click",(n=e,function(e){return d(n,e)})).attr("href",h.link_to.replace(/__id__/,e));t.classes&&l.addClass(t.classes),u.append(l)};if(h.prev_text&&(0<c||h.prev_show_always)&&(l(0,{text:h.first_text,classes:"prev"},!0),l(c-1,{text:h.prev_text,classes:"prev"},!0)),!h.simple){if(0<n[0]&&0<h.num_edge_entries){for(var a=Math.min(h.num_edge_entries,n[0]),r=0;r<a;r++)l(r);h.num_edge_entries<n[0]&&h.ellipse_text&&jQuery("<span>"+h.ellipse_text+"</span>").appendTo(u)}for(r=n[0];r<n[1];r++)l(r);if(n[1]<o&&0<h.num_edge_entries){o-h.num_edge_entries>n[1]&&h.ellipse_text&&jQuery("<span>"+h.ellipse_text+"</span>").appendTo(u);for(r=Math.max(o-h.num_edge_entries,n[1]);r<o;r++)l(r)}}h.next_text&&(c<o-1||h.next_show_always)&&(l(c+1,{text:h.next_text,classes:"next"},!0),l(o-1,{text:h.last_text,classes:"prev"},!0))}var c=h.current_page;e=!e||e<0?1:e,h.items_per_page=!h.items_per_page||h.items_per_page<0?1:h.items_per_page;var u=jQuery(this);this.selectPage=function(e){d(e)},this.prevPage=function(){return 0<c&&(d(c-1),!0)},this.nextPage=function(){return c<s()-1&&(d(c+1),!0)},n()})};